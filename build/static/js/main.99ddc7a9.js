/*! For license information please see main.99ddc7a9.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=f(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case v:case u:return e;default:return t}}case i:return t}}}function _(e){return w(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var h=0;h<s.length;h++)r.call(o,s[h])&&(u[s[h]]=o[s[h]])}}return u}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,x=60106,T=60107,E=60108,I=60114,S=60109,C=60110,N=60112,R=60113,P=60120,A=60115,O=60116,D=60121,M=60128,L=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;_=U("react.element"),x=U("react.portal"),T=U("react.fragment"),E=U("react.strict_mode"),I=U("react.profiler"),S=U("react.provider"),C=U("react.context"),N=U("react.forward_ref"),R=U("react.suspense"),P=U("react.suspense_list"),A=U("react.memo"),O=U("react.lazy"),D=U("react.block"),U("react.scope"),M=U("react.opaque.id"),L=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,q="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var W=!1;function H(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function G(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case x:return"Portal";case I:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case A:return K(e.type);case D:return K(e._render);case O:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Y(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Y(n)}}function ce(e,t){var n=Y(t.value),r=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Te(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ie(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Re(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Pe(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Ae(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function Oe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Me(){}var Le=Oe,Fe=!1,je=!1;function Ue(){null===Ce&&null===Ne||(Me(),Ae())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(h)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(me){qe=!1}function ze(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,He=null,Ge=!1,Ke=null,Ye={onError:function(e){We=!0,He=e}};function Qe(e,t,n,r,i,a,o,s,u){We=!1,He=null,ze.apply(Ye,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Je(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ze(i),e;if(a===r)return Ze(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ht=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ht.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function _t(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)yt(n),null===n.blockedOn&&ft.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tt={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Et={},It={};function St(e){if(Et[e])return Et[e];if(!Tt[e])return e;var t,n=Tt[e];for(t in n)if(n.hasOwnProperty(t)&&t in It)return Et[e]=n[t];return e}h&&(It=document.createElement("div").style,"AnimationEvent"in window||(delete Tt.animationend.animation,delete Tt.animationiteration.animation,delete Tt.animationstart.animation),"TransitionEvent"in window||delete Tt.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),Rt=St("animationstart"),Pt=St("transitionend"),At=new Map,Ot=new Map,Dt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",Rt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Mt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),At.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Lt=8;function Ft(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function jt(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Lt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Ft(u),i=Lt):0!==(s&=a)&&(r=Ft(s),i=Lt)}else 0!==(a=n&~o)?(r=Ft(a),i=Lt):0!==s&&(r=Ft(s),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Vt(10,t):e;case 10:return 0===(e=qt(192&~t))?Vt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Gt|0)|0},Ht=Math.log,Gt=Math.LN2;var Kt=a.unstable_UserBlockingPriority,Yt=a.unstable_runWithPriority,Qt=!0;function Jt(e,t,n,r){Fe||Me();var i=Zt,a=Fe;Fe=!0;try{De(i,e,t,n,r)}finally{(Fe=a)||Ue()}}function Xt(e,t,n,r){Yt(Kt,Zt.bind(null,e,t,n,r))}function Zt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=$t(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ht.set(a,mt(ht.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Mr(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Ie(r);if(null!==(i=ni(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Mr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,ln=e.screenY-hn.screenY):ln=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=un(mn),gn=un(i({},mn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),bn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=un(wn),xn=un(i({},fn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=un(Nn),Pn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=un(Dn),Ln=[9,13,27,32],Fn=h&&"CompositionEvent"in window,jn=null;h&&"documentMode"in document&&(jn=document.documentMode);var Un=h&&"TextEvent"in window&&!jn,Vn=h&&(!Fn||jn&&8<jn&&11>=jn),qn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Yn(e,t,n,r){Pe(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Jn=null;function Xn(e){Nr(e,0)}function Zn(e){if(X(ii(e)))return e}function $n(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Qn&&(Qn.detachEvent("onpropertychange",ar),Jn=Qn=null)}function ar(e){if("value"===e.propertyName&&Zn(Jn)){var t=[];if(Yn(t,Jn,e,Ie(e)),e=Xn,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),Jn=n,(Qn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Jn)}function ur(e,t){if("click"===e)return Zn(t)}function cr(e,t){if("input"===e||"change"===e)return Zn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hr=Object.prototype.hasOwnProperty;function fr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=h&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==kr||kr!==Z(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&fr(wr,r)||(wr=r,0<(r=Fr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Mt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Mt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Mt(Dt,2);for(var Tr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Tr.length;Er++)Ot.set(Tr[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Qe.apply(this,arguments),We){if(!We)throw Error(o(198));var l=He;We=!1,He=null,Ge||(Ge=!0,Ke=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}}}if(Ge)throw e=Ke,Ge=!1,Ke=null,e}function Rr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Pr]||(e[Pr]=!0,s.forEach((function(t){Sr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Dr(a,e,i,t),o.add(s))}function Dr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Xt;break;default:i=Zt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(je)return e(t,n);je=!0;try{Le(e,t,n)}finally{je=!1,Ue()}}((function(){var r=a,i=Ie(n),o=[];e:{var s=At.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Rn;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Ct:case Nt:case Rt:u=bn;break;case Pt:u=On;break;case"scroll":u=vn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Pn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ve(p,f))&&l.push(Lr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(h=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Pn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=jr(d))p++;for(d=0,v=f;v;v=jr(v))d++;for(;0<p-d;)l=jr(l),p--;for(;0<d-p;)f=jr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=jr(l),f=jr(f)}l=null}else l=null;null!==u&&Ur(o,s,u,l,!1),null!==c&&null!==h&&Ur(o,h,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Kn(s))if(er)m=cr;else{m=sr;var y=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Yn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ii(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(kr=y,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(y=Fr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,qn);case"textInput":return(e=t.data)===qn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Lr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Lr(e,a,i))),e=e.return}return r}function jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ve(n,a))&&o.unshift(Lr(n,u,s)):i||null!=(u=Ve(n,a))&&o.push(Lr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var qr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Kr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Yr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Xr=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Xr,$r="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Zr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Zr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Zr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Zr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[$r]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function hi(e,t){ui++,si[ui]=e.current,e.current=t}var fi={},di=ci(fi),pi=ci(!1),vi=fi;function mi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==fi)throw Error(o(168));hi(di,t),hi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,K(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,vi=di.current,hi(di,e),hi(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),hi(di,e)):li(pi),hi(pi,n)}var xi=null,Ti=null,Ei=a.unstable_runWithPriority,Ii=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ri=a.unstable_now,Pi=a.unstable_getCurrentPriorityLevel,Ai=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Mi=a.unstable_LowPriority,Li=a.unstable_IdlePriority,Fi={},ji=void 0!==Ni?Ni:function(){},Ui=null,Vi=null,qi=!1,Bi=Ri(),zi=1e4>Bi?Ri:function(){return Ri()-Bi};function Wi(){switch(Pi()){case Ai:return 99;case Oi:return 98;case Di:return 97;case Mi:return 96;case Li:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Ai;case 98:return Oi;case 97:return Di;case 96:return Mi;case 95:return Li;default:throw Error(o(332))}}function Gi(e,t){return e=Hi(e),Ei(e,t)}function Ki(e,t,n){return e=Hi(e),Ii(e,t,n)}function Yi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Qi()}function Qi(){if(!qi&&null!==Ui){qi=!0;var e=0;try{var t=Ui;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ii(Ai,Yi),n}finally{qi=!1}}}var Ji=w.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Zi=ci(null),$i=null,ea=null,ta=null;function na(){ta=ea=$i=null}function ra(e){var t=Zi.current;li(Zi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){$i=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===$i)throw Error(o(308));ea=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ha(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==o){for(f=a.baseState,s=0,h=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===h&&(c=f),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=h,qs|=s,e.lanes=s,e.memoizedState=f}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ha(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ha(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ha(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,a))}function ka(e,t,n){var r=!1,i=fi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):fi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ta(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Yu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ku(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Xu(t,e.mode,n)).return=e,t}if(_a(t)||B(t))return(t=Yu(t,e.mode,n,null)).return=e,t;Ta(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===T?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(_a(n)||B(n))return null!==i?null:h(e,t,n,r,null);Ta(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===T?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Ta(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,h=o,v=o=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=d(i,h,s[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,h=m}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(o=a(h,o,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,m),null===h?l=k:h.sibling=k,h=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=f(i,g.value,c))&&(s=a(g,s,m),null===h?l=g:h.sibling=g,h=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===T&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===T){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===T?((r=Yu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Ku(a.type,a.key,a.props,null,e.mode,u)).ref=xa(e,r,a),u.return=e,e=u)}return s(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ju(a,e.mode,u)).return=e,e=r),s(e);if(_a(a))return v(e,r,a,u);if(B(a))return m(e,r,a,u);if(l&&Ta(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,K(e.type)||"Component"))}return n(e,r)}}var Ia=Ea(!0),Sa=Ea(!1),Ca={},Na=ci(Ca),Ra=ci(Ca),Pa=ci(Ca);function Aa(e){if(e===Ca)throw Error(o(174));return e}function Oa(e,t){switch(hi(Pa,t),hi(Ra,e),hi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),hi(Na,t)}function Da(){li(Na),li(Ra),li(Pa)}function Ma(e){Aa(Pa.current);var t=Aa(Na.current),n=pe(t,e.type);t!==n&&(hi(Ra,e),hi(Na,n))}function La(e){Ra.current===e&&(li(Na),li(Ra))}var Fa=ci(0);function ja(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,Va=null,qa=!1;function Ba(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(qa){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Yr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(Ua=e);Ba(Ua,n)}Ua=e,Va=Yr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,Ua=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Ga(e){if(e!==Ua)return!1;if(!qa)return Ha(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Va;t;)Ba(e,t),t=Yr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Yr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=Ua?Yr(e.stateNode.nextSibling):null;return!0}function Ka(){Va=Ua=null,qa=!1}var Ya=[];function Qa(){for(var e=0;e<Ya.length;e++)Ya[e]._workInProgressVersionPrimary=null;Ya.length=0}var Ja=w.ReactCurrentDispatcher,Xa=w.ReactCurrentBatchConfig,Za=0,$a=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Za=a,$a=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Oo:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ja.current=Mo,e=n(r,i)}while(ro)}if(Ja.current=Ao,t=null!==eo&&null!==eo.next,Za=0,to=eo=$a=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?$a.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=$a.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?$a.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?$a.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Za&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,a=r):u=u.next=h,$a.lanes|=l,qs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ho(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Za&e)===e)&&(t._workInProgressVersionPrimary=r,Ya.push(t))),e)return n(t._source);throw Ya.push(t),Error(o(350))}function po(e,t,n,r){var i=Os;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Ja.current,c=u.useState((function(){return fo(i,t,n)})),l=c[1],h=c[0];c=to;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var m=$a;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(h,e)||(l(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Wt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=l=Po.bind(null,$a,e),c.queue=e,c.baseQueue=null,h=fo(i,t,n),c.memoizedState=c.baseState=h),h}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Po.bind(null,$a,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$a.updateQueue)?(t={lastEffect:null},$a.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function bo(e,t,n,r){var i=so();$a.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}$a.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function _o(e,t){return bo(516,4,e,t)}function xo(e,t){return wo(516,4,e,t)}function To(e,t){return wo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Io(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ro(e,t){var n=Wi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Po(e,t,n){var r=fu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===$a||null!==o&&o===$a)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Ao={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Po.bind(null,$a,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ro.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:M,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&$a.mode)&&($a.flags|=516,yo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:Io,useLayoutEffect:To,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Mo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:Io,useLayoutEffect:To,useMemo:No,useReducer:ho,useRef:ko,useState:function(){return ho(co)},useDebugValue:So,useDeferredValue:function(e){var t=ho(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=ho(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return ho(co)[0]},unstable_isNewReconciler:!1},Lo=w.ReactCurrentOwner,Fo=!1;function jo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ia(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ku(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Gu(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Wo(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_u(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_u(t,e),null;t.memoizedState={baseLanes:0},_u(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_u(t,r);return jo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Ho(e,t,n,r,i){if(yi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&ba(t,o,r,c),sa=!1;var f=t.memoizedState;o.state=f,da(t,r,o,i),u=t.memoizedState,s!==r||f!==u||pi.current||sa?("function"===typeof l&&(ma(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Xi(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=mi(t,u=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&ba(t,o,r,u),sa=!1,f=t.memoizedState,o.state=f,da(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||pi.current||sa?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,f,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,a,i)}function Go(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),as(e,t,a);r=t.stateNode,Lo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ia(t,e.child,null,a),t.child=Ia(t,null,s,a)):jo(e,t,s,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Yo,Qo,Jo,Xo={dehydrated:null,retryLane:0};function Zo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),hi(Fa,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Qu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function $o(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Qu(t,i,0,null),n=Yu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Gu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gu(o,s),null!==e?r=Gu(e,r):(r=Yu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(jo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ja(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ja(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),Qa(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:La(t);var a=Aa(Pa.current);if(n=t.type,null!==e&&null!=t.stateNode)Qo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Aa(Na.current),Ga(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Zr]=t,r[$r]=s,n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(e=0;e<Ir.length;e++)Rr(Ir[e],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":ee(r,s),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rr("invalid",r);break;case"textarea":ue(r,s),Rr("invalid",r)}for(var c in Te(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Rr("scroll",r));switch(n){case"input":J(r),re(r,s,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Zr]=t,e[$r]=r,Yo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),a=r;break;case"iframe":case"object":case"embed":Rr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ir.length;a++)Rr(Ir[a],e);a=r;break;case"source":Rr("error",e),a=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),a=r;break;case"details":Rr("toggle",e),a=r;break;case"input":ee(e,r),a=$(e,r),Rr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Rr("invalid",e);break;default:a=r}Te(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?_e(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ye(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Rr("scroll",e):null!=h&&b(e,s,h,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Y(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Jo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Aa(Pa.current),Aa(Na.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[Zr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Zr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===js&&(js=3):(0!==js&&3!==js||(js=4),null===Os||0===(134217727&qs)&&0===(134217727&Bs)||gu(Os,Ms))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==js||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=ja(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Gs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=ja(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,hi(Fa,s?1&t|2:1&t),n):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),Qa(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return La(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return xu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Yo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Aa(Na.current);var o,s=null;switch(n){case"input":a=$(e,a),r=$(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(h in Te(n,r),n=null,a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var c=a[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=a?a[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Rr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===M?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Js||(Js=!0,Xs=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Zs?Zs=new Set([this]):Zs.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(o(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Lu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Ti&&"function"===typeof Ti.onCommitFiberUnmount)try{Ti.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(a){Vu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vu(t,a)}break;case 5:vs(t);break;case 4:Es(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):Ts(e,n,t)}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Ts(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ts(e,t,n),e=e.sibling;null!==e;)Ts(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Is(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?_e(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=zi(),gs(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,Rs=w.ReactCurrentDispatcher,Ps=w.ReactCurrentOwner,As=0,Os=null,Ds=null,Ms=0,Ls=0,Fs=ci(0),js=0,Us=null,Vs=0,qs=0,Bs=0,zs=0,Ws=null,Hs=0,Gs=1/0;function Ks(){Gs=zi()+500}var Ys,Qs=null,Js=!1,Xs=null,Zs=null,$s=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,hu=!1;function fu(){return 0!==(48&As)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===uu&&(uu=Vs),0!==Ji.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&As)&&98===e?e=Vt(12,uu):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Os&&(Bs|=t,4===js&&gu(e,Ms));var r=Wi();1===t?0!==(8&As)&&0===(48&As)?ku(e):(mu(e,n),0===As&&(Ks(),Yi())):(0===(4&As)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Wt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var h=Lt;a[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=jt(e,e===Os?Ms:0),t=Lt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ku.bind(null,e),null===Ui?(Ui=[n],Vi=Ii(Ai,Qi)):Ui.push(n),n=Fi):14===t?n=Ki(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ki(n,yu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yu(e){if(su=-1,cu=uu=0,0!==(48&As))throw Error(o(327));var t=e.callbackNode;if(Mu()&&e.callbackNode!==t)return null;var n=jt(e,e===Os?Ms:0);if(0===n)return null;var r=n,i=As;As|=16;var a=Iu();for(Os===e&&Ms===r||(Ks(),Tu(e,r));;)try{Nu();break}catch(u){Eu(e,u)}if(na(),Rs.current=a,As=i,null!==Ds?r=0:(Os=null,Ms=0,r=js),0!==(Vs&Bs))Tu(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=Ut(e))&&(r=Su(e,n))),1===r)throw t=Us,Tu(e,0),gu(e,n),mu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Au(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Hs+500-zi())){if(0!==jt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Au.bind(null,e),r);break}Au(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Wt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Hr(Au.bind(null,e),n);break}Au(e);break;default:throw Error(o(329))}}return mu(e,zi()),e.callbackNode===t?yu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&As))throw Error(o(327));if(Mu(),e===Os&&0!==(e.expiredLanes&Ms)){var t=Ms,n=Su(e,t);0!==(Vs&Bs)&&(n=Su(e,t=jt(e,t)))}else n=Su(e,t=jt(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=Ut(e))&&(n=Su(e,t))),1===n)throw n=Us,Tu(e,0),gu(e,t),mu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e),mu(e,zi()),null}function bu(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Ks(),Yi())}}function wu(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Ks(),Yi())}}function _u(e,t){hi(Fs,Ls),Ls|=t,Vs|=t}function xu(){Ls=Fs.current,li(Fs)}function Tu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),Qa();break;case 5:La(r);break;case 4:Da();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:xu()}n=n.return}Os=e,Ds=Gu(e.current,null),Ms=Ls=Vs=t,js=0,Us=null,zs=Bs=qs=0}function Eu(e,t){for(;;){var n=Ds;try{if(na(),Ja.current=Ao,no){for(var r=$a.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Za=0,to=eo=$a=null,ro=!1,Ps.current=null,null===n||null===n.return){js=1,Us=t,Ds=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ms,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Fa.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var m=f.updateQueue;if(null===m){var y=new Set;y.add(c),f.updateQueue=y}else m.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,ha(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new hs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var b=qu.bind(null,a,c,s);c.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==js&&(js=2),u=cs(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,fa(f,fs(0,a,t));break e;case 1:a=u;var w=f.type,_=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Zs||!Zs.has(_)))){f.flags|=4096,t&=-t,f.lanes|=t,fa(f,ds(f,a,t));break e}}f=f.return}while(null!==f)}Pu(n)}catch(x){t=x,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Iu(){var e=Rs.current;return Rs.current=Ao,null===e?Ao:e}function Su(e,t){var n=As;As|=16;var r=Iu();for(Os===e&&Ms===t||Tu(e,t);;)try{Cu();break}catch(i){Eu(e,i)}if(na(),As=n,Rs.current=r,null!==Ds)throw Error(o(261));return Os=null,Ms=0,js}function Cu(){for(;null!==Ds;)Ru(Ds)}function Nu(){for(;null!==Ds&&!Ci();)Ru(Ds)}function Ru(e){var t=Ys(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Pu(e):Ds=t,Ps.current=null}function Pu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ls)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ls)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===js&&(js=5)}function Au(e){var t=Wi();return Gi(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Mu()}while(null!==eu);if(0!==(48&As))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Os&&(Ds=Os=null,Ms=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=As,As|=32,Ps.current=null,qr=Qt,yr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(I){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,m=s,y=null;t:for(;;){for(var g;m!==u||0!==a&&3!==m.nodeType||(f=h+a),m!==c||0!==l&&3!==m.nodeType||(d=h+l),3===m.nodeType&&(h+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===s)break t;if(y===u&&++p===a&&(f=h),y===c&&++v===l&&(d=h),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Br={focusedElem:s,selectionRange:u},Qt=!1,lu=null,hu=!1,Qs=r;do{try{Du()}catch(I){if(null===Qs)throw Error(o(330));Vu(Qs,I),Qs=Qs.nextEffect}}while(null!==Qs);lu=null,Qs=r;do{try{for(s=e;null!==Qs;){var k=Qs.flags;if(16&k&&ge(Qs.stateNode,""),128&k){var b=Qs.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:_s(Qs),Qs.flags&=-3;break;case 6:_s(Qs),Qs.flags&=-3,Is(Qs.alternate,Qs);break;case 1024:Qs.flags&=-1025;break;case 1028:Qs.flags&=-1025,Is(Qs.alternate,Qs);break;case 4:Is(Qs.alternate,Qs);break;case 8:Es(s,u=Qs);var _=u.alternate;bs(u),null!==_&&bs(_)}Qs=Qs.nextEffect}}catch(I){if(null===Qs)throw Error(o(330));Vu(Qs,I),Qs=Qs.nextEffect}}while(null!==Qs);if(w=Br,b=mr(),k=w.focusedElem,s=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&yr(k)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),u=k.textContent.length,_=Math.min(s.start,u),s=void 0===s.end?_:Math.min(s.end,u),!w.extend&&_>s&&(u=s,s=_,_=u),u=pr(k,_),a=pr(k,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),_>s?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Qt=!!qr,Br=qr=null,e.current=n,Qs=r;do{try{for(k=e;null!==Qs;){var x=Qs.flags;if(36&x&&ys(k,Qs.alternate,Qs),128&x){b=void 0;var T=Qs.ref;if(null!==T){var E=Qs.stateNode;Qs.tag,b=E,"function"===typeof T?T(b):T.current=b}}Qs=Qs.nextEffect}}catch(I){if(null===Qs)throw Error(o(330));Vu(Qs,I),Qs=Qs.nextEffect}}while(null!==Qs);Qs=null,ji(),As=i}else e.current=n;if($s)$s=!1,eu=e,tu=t;else for(Qs=r;null!==Qs;)t=Qs.nextEffect,Qs.nextEffect=null,8&Qs.flags&&((x=Qs).sibling=null,x.stateNode=null),Qs=t;if(0===(r=e.pendingLanes)&&(Zs=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Ti&&"function"===typeof Ti.onCommitFiberRoot)try{Ti.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(I){}if(mu(e,zi()),Js)throw Js=!1,e=Xs,Xs=null,e;return 0!==(8&As)||Yi(),null}function Du(){for(;null!==Qs;){var e=Qs.alternate;hu||null===lu||(0!==(8&Qs.flags)?et(Qs,lu)&&(hu=!0):13===Qs.tag&&Cs(e,Qs)&&et(Qs,lu)&&(hu=!0));var t=Qs.flags;0!==(256&t)&&ms(e,Qs),0===(512&t)||$s||($s=!0,Ki(97,(function(){return Mu(),null}))),Qs=Qs.nextEffect}}function Mu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Gi(e,ju)}return!1}function Lu(e,t){nu.push(t,e),$s||($s=!0,Ki(97,(function(){return Mu(),null})))}function Fu(e,t){ru.push(t,e),$s||($s=!0,Ki(97,(function(){return Mu(),null})))}function ju(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&As))throw Error(o(331));var t=As;As|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return As=t,Yi(),!0}function Uu(e,t,n){ha(e,t=fs(0,t=cs(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(zt(e,1,t),mu(e,t))}function Vu(e,t){if(3===e.tag)Uu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r))){var i=ds(n,e=cs(t,e),1);if(ha(n,i),i=fu(),null!==(n=vu(n,1)))zt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ms&n)===n&&(4===js||3===js&&(62914560&Ms)===Ms&&500>zi()-Hs?Tu(e,0):zs|=n),mu(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===uu&&(uu=Vs),0===(t=qt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(zt(e,t,n),mu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new zu(e,t,n,r)}function Hu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gu(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ku(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Hu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case T:return Yu(n.children,i,a,t);case L:s=8,i|=16;break;case E:s=8,i|=1;break;case I:return(e=Wu(12,n,t,8|i)).elementType=I,e.type=I,e.lanes=a,e;case R:return(e=Wu(13,n,t,i)).type=R,e.elementType=R,e.lanes=a,e;case P:return(e=Wu(19,n,t,i)).elementType=P,e.lanes=a,e;case F:return Qu(n,i,a,t);case j:return(e=Wu(24,n,t,i)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case C:s=9;break e;case N:s=11;break e;case A:s=14;break e;case O:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Yu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Qu(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=F,e.lanes=n,e}function Ju(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function Xu(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function $u(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=fu(),s=du(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(yi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=bi(n,c,u);break e}}n=u}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ha(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zu(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}wu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return $u(e,t,null,n)}Ys=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ko(t),Ka();break;case 5:Ma(t);break;case 1:yi(t.type)&&wi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;hi(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Zo(e,t,n):(hi(Fa,1&Fa.current),null!==(t=as(e,t,n))?t.sibling:null);hi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return as(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ma(t,r,s,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Go(null,t,r,!0,a,n)}else t.tag=0,jo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===A)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ka(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Yr(t.stateNode.containerInfo.firstChild),Ua=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ya.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else jo(e,t,r,n),Ka();t=t.child}return t;case 5:return Ma(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Wr(r,i)?s=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),jo(e,t,s,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return Zo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ia(t,null,r,n):jo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(hi(Zi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,ha(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}jo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,jo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Vo(e,t,i,a=Xi(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,fu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,fu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=fu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bu,De=function(e,t,n,r,i){var a=As;As|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(As=a)&&(Ks(),Yi())}},Me=function(){0===(49&As)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,zi())}))}Yi()}(),Mu())},Le=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Ks(),Yi())}};var uc={Events:[ri,ii,ai,Pe,Ae,Mu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{xi=hc.inject(lc),Ti=hc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{As=n,Yi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},666:function(e){e.exports=function(){for(var e=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"],t=[],n=0;n<35;n++)t[n]=7===n||12===n||17===n||22===n?"-":e[Math.floor(Math.random()*e.length-1)];return t.join("")}},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:b.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+I(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+I(s=e[c],c);u+=S(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=S(s=s.value,t,n,l=r+I(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var R={current:null};function P(){var e=R.current;if(null===e)throw Error(d(321));return e}var A={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=h;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return R()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};u(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var _=g.prototype=m.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return y.prototype=g,u(_,"constructor",g),u(g,"constructor",y),y.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(T.prototype),u(T.prototype,o,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),u(_,s,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,h=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){y=f((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],S=[],C=1,N=null,R=3,P=!1,A=!1,O=!1;function D(e){for(var t=x(S);null!==t;){if(null===t.callback)T(S);else{if(!(t.startTime<=e))break;T(S),t.sortIndex=t.expirationTime,_(I,t)}t=x(S)}}function M(e){if(O=!1,D(e),!A)if(null!==x(I))A=!0,n(L);else{var t=x(S);null!==t&&r(M,t.startTime-e)}}function L(e,n){A=!1,O&&(O=!1,i()),P=!0;var a=R;try{for(D(n),N=x(I);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,R=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===x(I)&&T(I),D(n)}else T(I);N=x(I)}if(null!==N)var u=!0;else{var c=x(S);null!==c&&r(M,c.startTime-n),u=!1}return u}finally{N=null,R=a,P=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||P||(A=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return x(I)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,_(S,e),null===x(I)&&e===x(S)&&(O?i():O=!0,r(M,o-s))):(e.sortIndex=u,_(I,e),A||P||(A=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},962:function(e,t,n){"use strict";e.exports=n.p+"static/media/taxi.85fa4f41ff07bc2c9ccc.ico"},3:function(e,t,n){"use strict";e.exports=n.p+"static/media/header_main.a3d59b502f121c7beb00.jpg"},883:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA5gAAAIABAMAAAAVpN4UAAAAHlBMVEXm5uZKyOztwZwTFh7///99aZAyw+3/2a+wqKVFT1HdlO0vAAAc6klEQVR42uzdTU/jOhcA4KlUdV2LEmm2QaOwHSKGya6VXrFnKi6wSzRMpLtthdpuQYi5S1Qh1H/7Jm3Txvm0kxPHsY9X93Apk+GZY5/YsfPlf7s2/rJrioW9Hom14VC5vyAdKvqX+9Ijhh80L44ZfeULYnYmHPdIQpESJeH/HSJmF8KQyiBlLUhSgphyhwESYW5hfiKmpGGPR3LHGXgipoRhz+el3Pe3Q8SUKxz38iseBs4+YsoTVszKY29LEFOSsCblznOImBKEPcMjAM3Y3noiZqshDOWOEzFbDXs+AWz+EDHbC+HSMppG6CNmOyFsWsaTs8vlYND6+y91KIROy+PI2cXfRhh2F9MnDbWgrEVMoWGvMcsgOYeIKTJspos9aLqIKS5s1vJY1SJm4+HYJ403v4+YIsKJAEti+CPEbD4UYhlyjhCz6bAnyDIsahGz2VCc5WFZDDEbCgceEdh8FzGbC8VaHjQRs4FQtGWoOUbMRkLxluFkEGI2EfZasNxVQZ3B7MySXRuWJ+/bFU5cnAYOJy1YntpOmJsjxIQNJ34LXezatr/H7zcREyQct2H51Q7abi4IMeHCVixJaLlNTWIgJlxotGF5ssV0Dg8GISZIaLRxU3Jq79r77sEgxIQJB6S1TjZoP3ahi5gQYTuTBb8jTPs4eYCYdcNWbkp2lWy8nw1LWsSsG7ZS/BhHy6if3Z44g5i1wlYsw+kCO9HPBiUtYtYLe6S9u5JEPxsUQYhZJ2yn+KEtd/MG0TNeiFk59Foufo7zBjvNvvwTLLKu0fUNGSwPg2Y0d4CL01XCVjrZ05TlcdAkZIiYFUOv5ZuS1KBJiI+Y1cJWOtkMS/uSUB0tYvKHAzn6WHrQDCdpEZN/O60nQ+2za143tuLKi9lCJ/tvjmW8AgoaYvKGLXSyv/Ms4xWQzPuqZcVs4WG8da7lca49thEXMZlDQ5bhMl0BHWbcEZMtFF39GGubHTOao0VMprDqnKz/58/tPz5g5RO1G5LR0SImU8jfyRoPydzabD4Y/0mcrsssE+XsvqNFTJaQt/oxNrkK5aKlWZkqZ8M2QkzGkC8x/y1NrHxRY23blTA93AXGFg6g7iioRcnNP+mu2WZtl1n7NnFxmiH0IEuXhOiH7wc//s/Dxub7YLrWQkyWcACflvVbuoP2ELM85Kl+hFnaGX/4EDEhn60UZ5m80dw2xCx9ttKT0TJ5o3m4PUHMopDdcmq3jOkjZnHIXv2ciLRM32iGNdAjYsI8KGvYrWPK9xitXJgDKQfMXEwXMfND9sQU28kml6ep1ETM7JA9MQVbZkwBHVITMTNDeRMzB3O7sImYmaG8iZmHGaYmYmaFE3kTM3M+b5uaI9wFlhVy7PmypcEkBBenM0OZEzMXU6YH3CXCHMicmPmZ6SJmRsicmKdSYRqIWWc/wolcmC5ipkJP6l7Wzr88eXYrSIPJnphfbaky85CaiHkIPbl72YLMJAZi0iHHU1y2ZJkZrWsiZhSyJ+apLVtm7h85QMx9OJG9l7ULF8pHiFltp9Bv+TKTeIhZbaeQLV9myrKPSA5MnofYpcR0ETMKefbWnkiJ6fdxF1iFbV9yYkqyKaxr277WUmJKsilMgkvgOo3ClhOTDBFzG/JslD6VFZMgJu8evtaGTKf0CfshYo45d71Lixmdxq85JtfRIi3N/6QPNchbO9Ebk+8wrraK2R/lmI+IyXlKXlv1z/fyS/MQk/MAJ4kx90926YzJd+jPqcyYrvaYfInZVjGbuQ0+e41aY8xJRzBvWDZzjzTH5Dy/sq07E5vt8vTG5D1Ydio1phQbqdtbheM9Vr+t20yH7fJcrReneU8JbisxL9kuz9Ma0+sI5ne2yzN0xuR+eYnsmK7GmEZXMN8Jcz+rKyb3m2gMue9MwlVNbTG5e9mvchezpOV3+LWK6XUF8wd736ErJv/7vk7krn+2D3Zpisn/Ir4Tyeufls+raBPT6wwmT42mJ2avM5gOD+ZIS8wKrzv9Lf2QScijlpj8lm1l5jvXReqIWeXdtVPph8xWT5Jpbz3zmnSlm/3BN0vlarg4XeVFxFP5h8zdOphmmJVeXjuVv5fdrYNphlmll23nQYPvvJiudphGZzBveK/S0w7T6wqmw32Vhm6Yvc5gvvNf5lAzzAHpCKZT4TJdzTC9rmDeVLhMXy/MSTVM2ScM4v2sPpjVetkWMvOm0nW6OmH2DdKRzHyvdqFaZaYHhelAyv0HhWnohNkDw7yagU3xXS5mYJk51Aiz4pCZgflpLr7BWP5amBYYpqvRLjADDNMyTWvxrXZh5PxazIKfNIXC9PVZnB57YJgBQch5XovTeV5sf445h8I0+tpgXhMozJ87hIBz9lrR07m39pSmuQLDfNQGcwCGeWUeWiVP535xkAzaEgqTuNpgemCYd2asWdZiYb4+MIo6H0FKBh+gfgIYpq8L5hgO00y1LdDrw6aA1Nnc3psLKiWjD79AYRp9TTArD5kpTCftcRANsf7+vb29/dhs20Pwn/d/zcX+f2W3ORjmoyaYAzDMizyUQ1tQrfTbl1CYxNUE0wPDvDKBmwWG6euBOYbDtMAxX6AwjaEWmNWHTMI4ZNZocyhMogfmAAzzAtwyNWhWx3S1wPTBMD/hMS0wTE8HzBpDJsmamG120KyOaeiAOQHDvGwAMzlo1sAcarALrMaQSRq+MQnbDApzv+tW6cXpymuZacy3JjCtNRQm0eBJAw8Ms4leNtnP1sA01MecgGFeNIO5BMvMkfKYNaYMEpifjVgm+tk6mI/KYw7AMJtJzEQ/WwfTVR7Tg8K8aArzCQrTVx1zDIZ515AlPQlUB1P8+fuCMSdgmLPGMM+gMEeKY9aqf4iIXpbuZ+tgbisglTEHUJifjVlS/WwtTFdxTA8Kc9Yg5hkQpq825hgKs8Felpo3qIUZVkAKY06gMN8atIzPG9TCDOeAFMasV/+QJh8YyZ43qIf5qPQuMAMI86pRS3MBhElUXpzuEyDMRbOYxxIIMfNDDwbzotleNnarWQ/TUBmzB4R517DlsQSqiTlUGHMA0806TSfmsQSq2c26iFmGedW45eFRIMTMDQ0YTKt5zOh4g5qYRGFMDwTzsvle9rAjviamgZglmAJ62cNsO2LmhT0YzJkQzBcQzKGymHXrH0KdMCKkn607ZrqIWYj5KcRy388iZl5ogGDOBGGeQWASZTE9CExBvex+Sq8upoGYRZhXgix3/Wy3MAWuZ05AMN+EYU4hMIeKLk5fEwhMUb3sbn629pjpImY+5k9xmEvEzA8NCExhQ+Zu0KyNSRTFJBCYbwIxpxCYYzUxPQhMcb3sdtCsjWmomZljCMyfIjFXiJkXTiAwBQ6ZQYPoZodKYl5DjJmpiVnLog+u5Hhur/STFgSmi5h5mPGHDGbhoaPnr7cPm+NRwZv7Z5ajSMOjS83z14fN4eHNTfBJK0EaVECImR0OIDBnR4zZecyCah/PhZ6B2Szv8G/6rO8zAExPSUwDADN6Lm/2uik+gX0TomSnJMtnZ1E5Wx+TKInpAWDun3621kwn6r8lPResb1g4LJzUxzRUxBxDYF5lnz0ZpdQ65RnLTytL0snO0ueonEVMsZjOvnKJzmGne1Hn3oq+vqb70ud4JXtOf+ot+nMAMIcK7gLrEQDMuxTmR2psDL6QeJvUx+3tQ+rdNOlP/ZfGXAOMmSMFF6cHEJipUwc+F9n16vKhYDB9y651F8sU5hQA8xExszFnCcz87WCLZf67FfM+ZK2SO5NeEFMcZsF8j5X9mlTHmpVvSjiszcwBMF0FMQFuM4mTwCyeqV2cZb2+lmlf5h0gJlEQE+C3Qi4TmBbb7p9YXi7YjgCKMFcAmIaCmAB3JuQnjVm6T3PG+1abaP87YhaGELeZ5IJOoIvSdZEV77vDVjTmEwRmXznMCQTmFY1ZvlFhseZ93RSNeQ4xZo7UwyTwmAxHG5xxnjds0dN55nfEzAivITCjVLS+se46mWe9obr0ZIpDd2xBZOYjYhZh7hOoCcwXqjtGzMxwAIs5ZdwOP+d9RdGc/ldyA3DVrnKYEHMG5I5KoJ+8mA4/JkTZ5iFmVvtFFTYXJmsB9Gu3jMKCuaK/DwKTKLcLDOKXYjxTCcTw2OVuCLybWQvWQfaJ7o5BMJVbnIb4rRgmN+Y0qk3njJjndP8NctmIWY75yYj5dpg+YHkcnu6/EVMA5ooRcx2NgNtZV0bMK8QsDHvAmE/smPsZgBUbptUA5lAxTJDZvATmHR/N8QlKwZhENcwBMKbJjhl7COyN7ROfwJguYpZiMtLMjj3uJ2LKiMmYZ8sY5gsz5h1iyoj5FJsBmLPdmdI/GDEzQqMdzFXspnHFNAFo0XUSCKanFmYfHHPNhBnPxnO2NTD6DgYEkyiWmQQac8r6oMFdjMlpCXOMmIXV7AsT5kuszwyTGTMTIvSgMc9YMCm/sJxlwnSgMQ3FdoGBY85ZbjQsajlrzjTMNoGp1uL0uAnM8huNGVXArlj8l3SZBHPdfcQsxFyxYNLfdM7ykSf6BgYx0+EEHPOJRWZODawWy71J4h8JYorAPGeZAjijSp6gHCq/N5k3gBk+Bq0SJviticnw5GRCzzpjKGcThRViisBkmQKwEtnLUs4mbnkQUxBmaZrNEuPqsrycDWeWTHDMR6Uwr+Exp+UPDqwSEwtWedGUnCZCTBGYLFNAyTGSoQJK9t6IKQSzfAooZRdWQFbpBNAlYgrHLJ81WKa+o/wziTkDxBSD+VQ6BTBPdcQWy2euELM4HMBjmmX3JmGJNCv9UvqAik94TBcxizFL702y0nBeUjWFxazVXUwx62xNYJYtT2etqyxL+tnUvxAgTKUWp40GutmScjaVZBGWVVwzXSKm+Mwsq4Ay95aE6Vx0GFAqm2EwPczMEkyzcNAMa52r7L20xR/6bACTKIVJGsAs3m/wlN2h/r+9c+lpHNkCcNEyEUuMklIvCdKQ7EcjpndGslAvG821rmcXIybKOgjRswtMh86sW6M7/NubOA+c+FUun1NlV53aoCMRy6kv512P1YeuCo9nGxBMDTBX1brc5CTXnv5ZcBriIP1EgqkIZrxHc5rvMTMjnaeCI/S+pvfWE0xFMOPTtAbTPGTZ0dHgIXdjQ7xTfkAwFcF8yTiz53sGs6ff8rdvDvJORIw/dPgLIJiqYK7PrPz+dIjz6a+C47jiww0+pT8z/ZFFmWCqgnmxPlT/l/2bhZ7Wh7N/Lzy29NP3vY88Tde3LaRcMMFUBnN7cPOnxI0z03nZOcGPuwtRtnctzn/POVxvSDCVwVz7ud1NUJ/EDtYfJA6h/fH2lrxZ4YJgqoLpnqVt5t/Z99AUHqwf+1ShmxW+EkyFMC+efvq58oUX2T+BXzM+1DLNVNPPxIN5MUjfvfdv6V3Fg8cf6fv8Mv6vDwTTqOY0IszN/aZvOyqhyL3Tg6efdvfivr39k3Nz6kXfJZhYMO/y2STuXLwQGgORW8cJpgaYWOOSYBJMglk+JgSTYEqPV4KJBtMlmARTenCCiQaTq4bpEkxzYEYEMy1ygkl7TUp7YASzvZp5ppblkGDiaaarGCZU08SsXWBQUaHieh5UnZ02DjUA5iXBRIQ5IZjmwFRcAnolmIgwFSeaLsE0B2ZEMDFhvhBMc3zmWStrBgRTf27SJ5+ZJR61EiZUZuKeEkztiSbBzBSvoaZFaaIJtc7A7ZqlmVEbcxMolvyUro/SnptEZGZRYarMTcAyE8PuAvOiFoazYJmJYZfU+FELw1mwYNawi93gYCoMZ18JJjJM3r5g1jiYcBPz0r5g1jUMJlj+rS6cBQtm3cgwmGCVdnXhLFgwu1qcRzD1hrOXBBMdprJwFs4z3BsG88ZtXTgbEUx8mC9ti3+MgwnXA1MVAcHFP7xrGsyobREQXPzjmgYTrtKuKgKCi39WdXaCqTUCiloIU1WfDXBuzloW/3DcBqb65jQgTDUREFz8szqg1CyYDuDcRK3qfy3f1zNNM+HiCTVO0yXNzBcB63lKygaAbmFEMPU6zT7BVARz0qqSgYEwj9xWOU1AF79aNWsazKhVThPybc2DCZlo4jtNSJfJGcHU6jQhXSbB1Ow0IV2mayBMyPnBdppDyF9eZCBMyNwE22lCFmbXmYlhMG8gJwi5PPvaUpiK+pmg6/PQnSaklY1XAJnVnAZdBYS9rh3UZcYrgEyDeQT6c5+0JTFZrzMwDSZoboK7EIgTTKUwMZOTIeyb+ibCBFVMzOQE1MrGW8CMg+lwtyV2FvZFR0ZqJmhugmhnYa3sJjMhmHrsLKyVNRQmbG6CVwSCtbKbNNM0mMC5CZqdBX5Nh2Dqs7N9YJi+mTBhWWLZ2Vfg1zQUJnBugrTnBNh+jAyFCRzO4thZ4Fh2G8yatQuMQW6FR+yDAZuPTTfTtOa0D7l7Gq0PNoR+x1NDYXrQE1XeBxs87Y2pcivLmaEw/Ui5nf37bW/8qjr8cblnKkxof1RuZx9+3htXipPMzd5MI2FCh7PlrZPHfZj/VZ1kuiNjYUKHs+UlvcE+zKlqK+veGwsTPJwtTTUHvyVZ/jJVHP64btdYmODhrDuu5DSvVCeZLneMhQkezpaHQI9VXCZ4+ONy31yY4L/80mr7oIrLfIV/PYNhwoezZSFQ0mmWucwhvOEYGQwTPJwtrwI9iLtM+PDHvTcYJnw4W1oFehR3mfAv53YNhokQAfE7Yac5VbiPb7dmRClMhf1MBr5yREA1351mmcuEj85Wm6YVTazy5jSD708LLDh4EHSZfYQfWkQwYbOTR0GXiaGYI6NhHiH8/EsKBwMxl4mhmKsTgAyGieE0S3onW6dZ4jIxFJMzs2FisCzxmg8iLhNDMU2H6WAoQIlqPoq4TJz3MlwzO+pVcyDgMlEUM16ZZzLM60i5aq6dZrHLxFHMruEwcSKg4oD2odRl4igmZwQTPNd8LHWZOIppPswOzrzdlTnNqXLFXB+aRzBhK7Qrp1noMnEUc70zwWiYRzhawCfFTvNKbR9zW/8xHKaDA7MwBnosdJlDpDfiTDlMtf3MpYhk04rSk0Ghy3xFep9I8cQqb04vxQ4WzLsCp1ngMvtYpuLeAphHWDAL1nY9XCmPfrbHjJgNk2FpQoGh/fN/yo3s9pgRw2GisZQ55GCI9tPivg0w0ZymzHl6aOHY9mQKgomRbKo1sruTKQyHeR01xtD2EV/FsQImntOsfAYbR3wT3w6YiE6zmttENLK7w5wIZo0xaYSRdbktMBEzzSpus4/6GoxgKnSbQ9y3sAYmqp11oxfdwU/cy7QF5lGES1M/S64HpvJ+JspBFfszGelmucoyNUysFpg+LkyBkPYS+Q0i3x6YHWS9KD2Jto/8axpZBPMaWTHK0xNkQ9+1CCayneXa4x/fJphcr8tEW5GXWP5jD8wbzVYWuWRwbxVM1OREqAaEnJjYBBPXaeq4JSHV/rIIJmZycqe7zD6yDOa19ko74iKDrmUwEe2s4LVSl7hW1iqYXK+VRbWz1sFEc5rC9xAhr8uzCSZah1p43QiWnd2sy9MBU1fbDcvOii8bwaobRKpnUm9zOhZvNFtZ3A3TlsFE6pxUWZ2H82s6tRCmr3U5F2Kq6dkI80azYiKFQCNmI0wUO1ttswnGG5xaCRPDzla8VBxhf8LYsxNmR7diXnyFV82RpTDh7WxFxURQTd61FCb8TbeV98GDF2i5byvMjm7FhFfNkbUwge1sEw6o6FoLE7g+K6GY0KoZ+fbCvNEZymIEtPcWwwRdpDe5kBqQZaBV90snTG39zHgA2tmKZ1PgNE/0zaTe5nQ8OlqjH/D0ZGQ1TLD1BnxyIgvzHCwGGjO7YULZuPE5+yDHcsg+QL1EZDlMoB3xcUdYDuaMsRMg+3BqOUygkt5k9awPcoq5HDCGljPLYTodMPsmp5qz+GcAYWj5yHqYEKkmn60fJhEDnW8+OQZb/GMzTICSHj/bfosXKSO7GhD5CSOYtavtfPJe+5AysvF4jWAU026YdUOgJMuqhvY88dG6NDkjmLW7mlGSSDVDO0x+sm5IOyKYTt2uZjTbI8LkjCxASNslmE7NriafefswT2RZLj9ar5NJMJ2aCw56AWOSNM8PPxmEdRZyNQGm1n7mRpSH+TEIvhwyeZFxmMtxHAS3dcKfBsxkE2BKh0CTYDmYFM0US7Z61muN8IdgerUaYfMVgC8yNNMsj1fPCmrkJQTTq9MI68Xzn1bNcppplmz9LFm3STB3olwI9HE9/xmqyRaVWR5vHiblNuPqD8Fci46UagbbkUZTHNPOWJ5iLgeXVEyCuRVletTz3fyHGXDyTe0wi+Xx+8Nky7IEcyuOZR1mnmoulTMb5yLzfxMPu5UKfwjmu3gjb2SX418vE+dCECVj8+TTnuXKsgTTk1w+wvemPysGWmvcHs9hDsqEkY0NbcV3GTOCuS925CLZQkO74blYXAyHi8Us/38OHnYro5gE812suHzkYPqD0Msl5Tjxn4J/mB8+TUYxCWZC7MhGP8WGVmAcpx4WSigmwUyIVVRzEqSHPMyMhz1XV0yCmRQ7stFPqaEtHpkPq6CYXnNgNqCfuRHFa3pZiiltaI8zHyaumqcNmLoGNae3Yqd67ac+zZPsZwnHQBEjmFmiaE2vlzP/wbfqLD/nPUs0PTklmJmi6FaFeR6AACT4qaSaESOYOWJUSzFzKu5Vg58qqjl2CGatjdRBAEZzXvSsFmyVbjRMEdXsBWA0C1mKqOaYEcx8sVNPMav5zXnJkwSLPwQzRyxXzV4ZzMABYlmummNGMIvEm6imYi7HrE5+WUU1RwSzWBzXVUwhx+nMRZ7zLLTvi2DKbtcUghCEJabWE3tM0PQNmU2HWbyNaBIIjoVT08QGpQvcI0Yw6+zw4/MgqI3zRPwZRQtIeJdglosdAMVcB0JOuivmnVR6xHPB2SJ+82A2p58psCmsV4lE8E+wSK4WcdhiXu0BBX1Nzho4dQ2E2amTl6TGfLGYzU5Wy7pkPl106A/BFBE5jGJCjNuC6Idgioh5jc1Aw2j2TqEWwMzZR/RRB8zn/LSEYIqJ44ZY2ZwQaOwQTHExM9kMgobY2U3th2AKirxukokZAkWMYNbcrTDXAzPMLcoSTOHdClEzrGw6BOLbZc8EU1g8NLR/6IJ5aGej5s1V42EexEB8rgtmcFhgJ5gSd/hFjbCyB3aWj3yCWffat54+mLf7Bx4STKmbwsb6Y9lDOzt2mgyzef3MdzFRo51oZJmws3FW0si5amhzOiHyJljZpJ2NGMGUFd8NrU6W73WDdU2WYMqJ2/zko1aYWzur/+aSVsPc5ic9vTBv90o/BLPWyks+D/TbWR41fa4aD3NNM9A8mnKkftthXo+1u8zYzo67BLO+uAyCerphhqvrEQgmgNgZB9oHH/kEE0Ts6Yd56xNMGNHTD9MhmFDiZ90sv/kEE0p0TvSy/I9PMOFE51gnyy9+S2A2uJ+5J2qkGTZ+clrQnN4XtVX0Qp9ggou61s36BBNBnGtiSTAxxLkelgQTRZxrYUkwUUTlNH2CiSeqpRn6BBNTVOk3Q49gIr/vXGGtgGAii6pqQV88RjDRRTVV91krzVbrYDJHQUfsm8cIphoRvVvttGk2Wg4TuRgU+qydMNvRz0yJmI5z5rVtNtrVnE6LeI5z6S4JpmoRx9TGJpZgqhc/Y0WxBFOHCKyc24P6CaYWEVQ5v/mMYGoVwap7i1Z+fbNgAtnasLVf3yyYzuf6OB2fYDZkibR/Ug/nzPcJZnNEX147Q8f3HILZJNGRXO4VOp4JX98smLF4ImFfDfr6ZsFcDuGraH6PPaVRX984mL7vLUTs7cwx5fsmYLa0n1kieot8hVxd4Lf7b7O+vpkwNz/ZxSIMw12oE4aLxczY77sU/w8KdDg7zQN2jwAAAABJRU5ErkJggg=="},985:function(e,t,n){"use strict";e.exports=n.p+"static/media/taxi_header.71fcb3f69197baa97582.gif"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/";var r={};!function(){"use strict";n.d(r,{_:function(){return aB}});var e={};n.r(e),n.d(e,{FirebaseError:function(){return te},SDK_VERSION:function(){return ct},_DEFAULT_ENTRY_NAME:function(){return Je},_addComponent:function(){return et},_addOrOverwriteComponent:function(){return tt},_apps:function(){return Ze},_clearComponents:function(){return at},_components:function(){return $e},_getProvider:function(){return rt},_registerComponent:function(){return nt},_removeServiceInstance:function(){return it},deleteApp:function(){return dt},getApp:function(){return ht},getApps:function(){return ft},initializeApp:function(){return lt},onLog:function(){return mt},registerVersion:function(){return vt},setLogLevel:function(){return yt}});var t=n(791),i=n(164);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||s(e,t)||u()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function f(){return f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=h(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},f.apply(this,arguments)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){if(t&&("object"===y(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function k(e){var t=m();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function w(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(rA){return void n(rA)}s.done?t(u):Promise.resolve(u).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){w(a,r,i,o,s,"next",e)}function s(e){w(a,r,i,o,s,"throw",e)}o(void 0)}))}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function S(e){return function(e){if(Array.isArray(e))return o(e)}(e)||I(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=n(757),R=n.n(N);function P(e,t,n){return P=m()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i},P.apply(null,arguments)}function A(e){var t="function"===typeof Map?new Map:void 0;return A=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return P(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},A(e)}var O=!1,D=!1,M="${JSCORE_VERSION}",L=function(e,t){if(!e)throw F(t)},F=function(e){return new Error("Firebase Database ("+M+") INTERNAL ASSERT FAILED: "+e)},j=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},U={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(j(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},V=function(e){var t=j(e);return U.encodeByteArray(t,!0)},q=function(e){return V(e).replace(/\./g,"")},B=function(e){try{return U.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function z(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&W(n)&&(e[n]=z(e[n],t[n]));return e}function W(e){return"__proto__"!==e}var H=function(){function e(){var t=this;x(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return E(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function G(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[q(JSON.stringify({alg:"none",type:"JWT"})),q(JSON.stringify(a)),""].join(".")}function K(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(K())}function Q(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function J(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function X(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Z(){var e=K();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function $(){return!0===O||!0===D}function ee(){return"object"===typeof indexedDB}var te=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(d(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(d(a),ne.prototype.create),a}return E(n)}(A(Error)),ne=function(){function e(t,n,r){x(this,e),this.service=t,this.serviceName=n,this.errors=r}return E(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?re(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new te(n,a,t);return o}}]),e}();function re(e,t){return e.replace(ie,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ie=/\{\$([^}]+)}/g;function ae(e){return JSON.parse(e)}function oe(e){return JSON.stringify(e)}var se=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ae(B(a[0])||""),n=ae(B(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ce(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function le(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function he(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function fe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(de(s)&&de(u)){if(!fe(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function de(e){return null!==e&&"object"===typeof e}function pe(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ve(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function me(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ye=function(){function e(){x(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return E(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ge(e,t){var n=new ke(e,t);return n.subscribe.bind(n)}var ke=function(){function e(t,n){var r=this;x(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return E(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=be),void 0===r.error&&(r.error=be),void 0===r.complete&&(r.complete=be);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function be(){}var we=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function _e(e,t){return"".concat(e," failed: ").concat(t," argument ")}function xe(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(_e(e,t)+"must be a valid function.")}function Te(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(_e(e,t)+"must be a valid context object.")}var Ee=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Ie(e){return e&&e._delegate?e._delegate:e}function Se(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var Ce=function(){function e(t){x(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return E(e,[{key:"transaction",value:function(e,t){return new Ne(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new Re(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),Ne=function(){function e(t){var n=this;x(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return E(e,[{key:"objectStore",value:function(e){return new Re(this._transaction.objectStore(e))}}]),e}(),Re=function(){function e(t){x(this,e),this._store=t}return E(e,[{key:"index",value:function(e){return new Pe(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new Pe(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return Se(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return Se(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return Se(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return Se(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),Pe=function(){function e(t){x(this,e),this._index=t}return E(e,[{key:"get",value:function(e){return Se(this._index.get(e),"Error reading from IndexedDB")}}]),e}();var Ae=function(){function e(t,n,r){x(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return E(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Oe="[DEFAULT]",De=function(){function e(t,n){x(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return E(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new H;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Oe})}catch(u){}var t,n=b(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=_(N.mark((function e(){var t;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(S(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),S(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=b(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=c(i.value,2),u=s[0],l=s[1],h=this.normalizeInstanceIdentifier(u);r===h&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(QS){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Oe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(QS){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;return this.component?this.component.multipleInstances?e:Oe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Me,Le,Fe=function(){function e(t){x(this,e),this.name=t,this.providers=new Map}return E(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new De(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),je=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Le||(Le={}));var Ue,Ve,qe={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Be=Le.INFO,ze=(C(Me={},Le.DEBUG,"log"),C(Me,Le.VERBOSE,"log"),C(Me,Le.INFO,"info"),C(Me,Le.WARN,"warn"),C(Me,Le.ERROR,"error"),Me),We=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ze[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},He=function(){function e(t){x(this,e),this.name=t,this._logLevel=Be,this._logHandler=We,this._userLogHandler=null,je.push(this)}return E(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Le))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?qe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Le.DEBUG].concat(t)),this._logHandler.apply(this,[this,Le.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Le.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Le.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Le.INFO].concat(t)),this._logHandler.apply(this,[this,Le.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Le.WARN].concat(t)),this._logHandler.apply(this,[this,Le.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Le.ERROR].concat(t)),this._logHandler.apply(this,[this,Le.ERROR].concat(t))}}]),e}();var Ge=function(){function e(t){x(this,e),this.container=t}return E(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ke="@firebase/app",Ye="0.7.20",Qe=new He("@firebase/app"),Je="[DEFAULT]",Xe=(C(Ue={},Ke,"fire-core"),C(Ue,"@firebase/app-compat","fire-core-compat"),C(Ue,"@firebase/analytics","fire-analytics"),C(Ue,"@firebase/analytics-compat","fire-analytics-compat"),C(Ue,"@firebase/app-check","fire-app-check"),C(Ue,"@firebase/app-check-compat","fire-app-check-compat"),C(Ue,"@firebase/auth","fire-auth"),C(Ue,"@firebase/auth-compat","fire-auth-compat"),C(Ue,"@firebase/database","fire-rtdb"),C(Ue,"@firebase/database-compat","fire-rtdb-compat"),C(Ue,"@firebase/functions","fire-fn"),C(Ue,"@firebase/functions-compat","fire-fn-compat"),C(Ue,"@firebase/installations","fire-iid"),C(Ue,"@firebase/installations-compat","fire-iid-compat"),C(Ue,"@firebase/messaging","fire-fcm"),C(Ue,"@firebase/messaging-compat","fire-fcm-compat"),C(Ue,"@firebase/performance","fire-perf"),C(Ue,"@firebase/performance-compat","fire-perf-compat"),C(Ue,"@firebase/remote-config","fire-rc"),C(Ue,"@firebase/remote-config-compat","fire-rc-compat"),C(Ue,"@firebase/storage","fire-gcs"),C(Ue,"@firebase/storage-compat","fire-gcs-compat"),C(Ue,"@firebase/firestore","fire-fst"),C(Ue,"@firebase/firestore-compat","fire-fst-compat"),C(Ue,"fire-js","fire-js"),C(Ue,"firebase","fire-js-all"),Ue),Ze=new Map,$e=new Map;function et(e,t){try{e.container.addComponent(t)}catch(n){Qe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function tt(e,t){e.container.addOrOverwriteComponent(t)}function nt(e){var t=e.name;if($e.has(t))return Qe.debug("There were multiple attempts to register component ".concat(t,".")),!1;$e.set(t,e);var n,r=b(Ze.values());try{for(r.s();!(n=r.n()).done;){et(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function rt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function it(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Je;rt(e,t).clearInstance(n)}function at(){$e.clear()}var ot=(C(Ve={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),C(Ve,"bad-app-name","Illegal App name: '{$appName}"),C(Ve,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),C(Ve,"app-deleted","Firebase App named '{$appName}' already deleted"),C(Ve,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),C(Ve,"invalid-log-argument","First argument to `onLog` must be null or a function."),C(Ve,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),C(Ve,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),C(Ve,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),C(Ve,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Ve),st=new ne("app","Firebase",ot),ut=function(){function e(t,n,r){var i=this;x(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ae("app",(function(){return i}),"PUBLIC"))}return E(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw st.create("app-deleted",{appName:this._name})}}]),e}(),ct="9.6.10";function lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Je,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw st.create("bad-app-name",{appName:String(i)});var a=Ze.get(i);if(a){if(fe(e,a.options)&&fe(r,a.config))return a;throw st.create("duplicate-app",{appName:i})}var o,s=new Fe(i),u=b($e.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new ut(e,r,s);return Ze.set(i,l),l}function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=Ze.get(e);if(!t)throw st.create("no-app",{appName:e});return t}function ft(){return Array.from(Ze.values())}function dt(e){return pt.apply(this,arguments)}function pt(){return(pt=_(N.mark((function e(t){var n;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ze.has(n)){e.next=6;break}return Ze.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e,t,n){var r,i=null!==(r=Xe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Qe.warn(s.join(" "))}nt(new Ae("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function mt(e,t){if(null!==e&&"function"!==typeof e)throw st.create("invalid-log-argument");!function(e,t){var n,r=b(je);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=qe[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Le[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function yt(e){var t;t=e,je.forEach((function(e){e.setLogLevel(t)}))}var gt="firebase-heartbeat-store",kt=null;function bt(){var e,t,n;return kt||(kt=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(gt)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new Ce(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new Ce(a.result),e.oldVersion,e.newVersion,new Ne(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw st.create("storage-open",{originalErrorMessage:e.message})}))),kt}function wt(e){return _t.apply(this,arguments)}function _t(){return _t=_(N.mark((function e(t){var n;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bt();case 3:return n=e.sent,e.abrupt("return",n.transaction(gt).objectStore(gt).get(Et(t)));case 7:throw e.prev=7,e.t0=e.catch(0),st.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),_t.apply(this,arguments)}function xt(e,t){return Tt.apply(this,arguments)}function Tt(){return Tt=_(N.mark((function e(t,n){var r,i,a;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bt();case 3:return r=e.sent,i=r.transaction(gt,"readwrite"),a=i.objectStore(gt),e.next=8,a.put(n,Et(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),st.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Tt.apply(this,arguments)}function Et(e){return"".concat(e.name,"!").concat(e.options.appId)}var It=function(){function e(t){var n=this;x(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Rt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return E(e,[{key:"triggerHeartbeat",value:function(){var e=_(N.mark((function e(){var t,n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=St(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=_(N.mark((function e(){var t,n,r,i,a;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=St(),n=Ct(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=q(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function St(){return(new Date).toISOString().substring(0,10)}function Ct(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=b(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Pt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Pt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Nt,Rt=function(){function e(t){x(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return E(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=_(N.mark((function e(){return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(rA){t(rA)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=_(N.mark((function e(){var t;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,wt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=_(N.mark((function e(t){var n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=_(N.mark((function e(t){var n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(S(r.heartbeats),S(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Pt(e){return q(JSON.stringify({version:2,heartbeats:e})).length}Nt="",nt(new Ae("platform-logger",(function(e){return new Ge(e)}),"PRIVATE")),nt(new Ae("heartbeat",(function(e){return new It(e)}),"PRIVATE")),vt(Ke,Ye,Nt),vt(Ke,Ye,"esm2017"),vt("fire-js","");function At(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ot;Object.create;var Dt="facebook.com",Mt="github.com",Lt="google.com",Ft="password",jt="twitter.com",Ut="EMAIL_SIGNIN",Vt="PASSWORD_RESET",qt="RECOVER_EMAIL",Bt="REVERT_SECOND_FACTOR_ADDITION",zt="VERIFY_AND_CHANGE_EMAIL",Wt="VERIFY_EMAIL";function Ht(){return C({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Gt=function(){var e;return C(e={},"admin-restricted-operation","This operation is restricted to administrators only."),C(e,"argument-error",""),C(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),C(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),C(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),C(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),C(e,"cordova-not-ready","Cordova framework is not ready."),C(e,"cors-unsupported","This browser is not supported."),C(e,"credential-already-in-use","This credential is already associated with a different user account."),C(e,"custom-token-mismatch","The custom token corresponds to a different audience."),C(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),C(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),C(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),C(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),C(e,"email-already-in-use","The email address is already in use by another account."),C(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),C(e,"expired-action-code","The action code has expired."),C(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),C(e,"internal-error","An internal AuthError has occurred."),C(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),C(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),C(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),C(e,"invalid-auth-event","An internal AuthError has occurred."),C(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),C(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),C(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),C(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),C(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),C(e,"invalid-email","The email address is badly formatted."),C(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),C(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),C(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),C(e,"invalid-credential","The supplied auth credential is malformed or has expired."),C(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),C(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),C(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),C(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),C(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),C(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),C(e,"wrong-password","The password is invalid or the user does not have a password."),C(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),C(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),C(e,"invalid-provider-id","The specified provider ID is invalid."),C(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),C(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),C(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),C(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),C(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),C(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),C(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),C(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),C(e,"missing-continue-uri","A continue URL must be provided in the request."),C(e,"missing-iframe-start","An internal AuthError has occurred."),C(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),C(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),C(e,"missing-multi-factor-info","No second factor identifier is provided."),C(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),C(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),C(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),C(e,"app-deleted","This instance of FirebaseApp has been deleted."),C(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),C(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),C(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),C(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),C(e,"no-auth-event","An internal AuthError has occurred."),C(e,"no-such-provider","User was not linked to an account with the given provider."),C(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),C(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),C(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),C(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),C(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),C(e,"provider-already-linked","User can only be linked to one identity for the given provider."),C(e,"quota-exceeded","The project's quota for this operation has been exceeded."),C(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),C(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),C(e,"rejected-credential","The request contains malformed or mismatching credentials."),C(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),C(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),C(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),C(e,"timeout","The operation has timed out."),C(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),C(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),C(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),C(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),C(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),C(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),C(e,"unverified-email","The operation requires a verified email."),C(e,"user-cancelled","The user did not grant your application the permissions it requested."),C(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),C(e,"user-disabled","The user account has been disabled by an administrator."),C(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),C(e,"user-signed-out",""),C(e,"weak-password","The password must be 6 characters long or more."),C(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),C(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Kt=Ht,Yt=new ne("auth","Firebase",Ht()),Qt=new He("@firebase/auth");function Jt(e){if(Qt.logLevel<=Le.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Qt.error.apply(Qt,["Auth (".concat(ct,"): ").concat(e)].concat(n))}}function Xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw tn.apply(void 0,[e].concat(n))}function Zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return tn.apply(void 0,[e].concat(n))}function $t(e,t,n){var r=Object.assign(Object.assign({},Kt()),C({},t,n));return new ne("auth","Firebase",r).create(t,{appName:e.name})}function en(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Xt(e,"argument-error"),$t(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function tn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=S(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(S(o)))}return Yt.create.apply(Yt,[e].concat(n))}function nn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw tn.apply(void 0,[t].concat(r))}}function rn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Jt(t),new Error(t)}function an(e,t){e||rn(t)}var on=new Map;function sn(e){an(e instanceof Function,"Expected a class definition");var t=on.get(e);return t?(an(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,on.set(e,t),t)}function un(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function cn(){return"http:"===ln()||"https:"===ln()}function ln(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var hn=function(){function e(t,n){x(this,e),this.shortDelay=t,this.longDelay=n,an(n>t,"Short delay should be less than long delay!"),this.isMobile=Y()||X()}return E(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(cn()||J()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function fn(e,t){an(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var dn=function(){function e(){x(this,e)}return E(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),pn=(C(Ot={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),C(Ot,"MISSING_CUSTOM_TOKEN","internal-error"),C(Ot,"INVALID_IDENTIFIER","invalid-email"),C(Ot,"MISSING_CONTINUE_URI","internal-error"),C(Ot,"INVALID_PASSWORD","wrong-password"),C(Ot,"MISSING_PASSWORD","internal-error"),C(Ot,"EMAIL_EXISTS","email-already-in-use"),C(Ot,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),C(Ot,"INVALID_IDP_RESPONSE","invalid-credential"),C(Ot,"INVALID_PENDING_TOKEN","invalid-credential"),C(Ot,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),C(Ot,"MISSING_REQ_TYPE","internal-error"),C(Ot,"EMAIL_NOT_FOUND","user-not-found"),C(Ot,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),C(Ot,"EXPIRED_OOB_CODE","expired-action-code"),C(Ot,"INVALID_OOB_CODE","invalid-action-code"),C(Ot,"MISSING_OOB_CODE","internal-error"),C(Ot,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),C(Ot,"INVALID_ID_TOKEN","invalid-user-token"),C(Ot,"TOKEN_EXPIRED","user-token-expired"),C(Ot,"USER_NOT_FOUND","user-token-expired"),C(Ot,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),C(Ot,"INVALID_CODE","invalid-verification-code"),C(Ot,"INVALID_SESSION_INFO","invalid-verification-id"),C(Ot,"INVALID_TEMPORARY_PROOF","invalid-credential"),C(Ot,"MISSING_SESSION_INFO","missing-verification-id"),C(Ot,"SESSION_EXPIRED","code-expired"),C(Ot,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),C(Ot,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),C(Ot,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),C(Ot,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),C(Ot,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),C(Ot,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),C(Ot,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),C(Ot,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),C(Ot,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),C(Ot,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),C(Ot,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ot),vn=new hn(3e4,6e4);function mn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function yn(e,t,n,r){return gn.apply(this,arguments)}function gn(){return gn=_(R().mark((function e(t,n,r,i){var a,o=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",kn(t,a,_(R().mark((function e(){var a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=pe(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",dn.fetch()(xn(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),gn.apply(this,arguments)}function kn(e,t,n){return bn.apply(this,arguments)}function bn(){return bn=_(R().mark((function e(t,n,r){var i,a,o,s,u,l,h,f,d,p;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},pn),n),e.prev=2,a=new Tn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw En(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,l=u.split(" : "),h=c(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw En(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw En(t,"email-already-in-use",s);case 25:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw $t(t,p,d);case 30:Xt(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof te)){e.next=37;break}throw e.t0;case 37:Xt(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),bn.apply(this,arguments)}function wn(e,t,n,r){return _n.apply(this,arguments)}function _n(){return _n=_(R().mark((function e(t,n,r,i){var a,o,s=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,yn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Xt(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),_n.apply(this,arguments)}function xn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?fn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Tn=function(){function e(t){var n=this;x(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Zt(n.auth,"network-request-failed"))}),vn.get())}))}return E(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function En(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Zt(e,t,r);return i.customData._tokenResponse=n,i}function In(e,t){return Sn.apply(this,arguments)}function Sn(){return Sn=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Sn.apply(this,arguments)}function Cn(e,t){return Nn.apply(this,arguments)}function Nn(){return Nn=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Nn.apply(this,arguments)}function Rn(e,t){return Pn.apply(this,arguments)}function Pn(){return Pn=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Pn.apply(this,arguments)}function An(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function On(){return On=_(R().mark((function e(t){var n,r,i,a,o,s,u=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Ie(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,nn((a=Mn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:An(Dn(a.auth_time)),issuedAtTime:An(Dn(a.iat)),expirationTime:An(Dn(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),On.apply(this,arguments)}function Dn(e){return 1e3*Number(e)}function Mn(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Jt("JWT malformed, contained fewer than 3 sections"),null;try{var a=B(r);return a?JSON.parse(a):(Jt("Failed to decode base64 JWT payload"),null)}catch(o){return Jt("Caught error parsing JWT payload as JSON",o),null}}function Ln(e,t){return Fn.apply(this,arguments)}function Fn(){return Fn=_(R().mark((function e(t,n){var r=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof te&&jn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Fn.apply(this,arguments)}function jn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Un=function(){function e(t){x(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return E(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(_(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Vn=function(){function e(t,n){x(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return E(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=An(this.lastLoginAt),this.creationTime=An(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function qn(e){return Bn.apply(this,arguments)}function Bn(){return Bn=_(R().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ln(t,Rn(r,{idToken:i}));case 6:nn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Hn(o.providerUserInfo):[],u=Wn(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Vn(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Bn.apply(this,arguments)}function zn(){return(zn=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ie(t),e.next=3,qn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(S(n),S(t))}function Hn(e){return e.map((function(e){var t=e.providerId,n=At(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Gn(e,t){return Kn.apply(this,arguments)}function Kn(){return Kn=_(R().mark((function e(t,n){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(t,{},_(R().mark((function e(){var r,i,a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pe({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=xn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",dn.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Kn.apply(this,arguments)}var Yn=function(){function e(){x(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return E(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){nn(e.idToken,"internal-error"),nn("undefined"!==typeof e.idToken,"internal-error"),nn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Mn(e);return nn(t,"internal-error"),nn("undefined"!==typeof t.exp,"internal-error"),nn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=_(R().mark((function e(t){var n,r=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],nn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=_(R().mark((function e(t,n){var r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return rn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(nn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(nn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(nn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Qn(e,t){nn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Jn=function(){function e(t){x(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=At(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?S(a.providerData):[],this.metadata=new Vn(a.createdAt||void 0,a.lastLoginAt||void 0)}return E(e,[{key:"getIdToken",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ln(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(nn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return On.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return zn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(nn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){nn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=_(R().mark((function e(t){var n,r,i=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,qn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ln(this,In(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;nn(k&&x,t,"internal-error");var T=Yn.fromJSON(this.name,x);nn("string"===typeof k,t,"internal-error"),Qn(h,t.name),Qn(f,t.name),nn("boolean"===typeof b,t,"internal-error"),nn("boolean"===typeof w,t,"internal-error"),Qn(d,t.name),Qn(p,t.name),Qn(v,t.name),Qn(m,t.name),Qn(y,t.name),Qn(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:T,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=_(R().mark((function t(n,r){var i,a,o,s=arguments;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Yn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,qn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Xn=function(){function e(){x(this,e),this.type="NONE",this.storage={}}return E(e,[{key:"_isAvailable",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Xn.type="NONE";var Zn=Xn;function $n(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var er=function(){function e(t,n,r){x(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=$n(this.userKey,a.apiKey,o),this.fullPersistenceKey=$n("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return E(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Jn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=_(R().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(sn(Zn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||sn(Zn),s=$n(i,n.config.apiKey,n.name),u=null,c=b(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=Jn._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function tr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ar(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(sr(t))return"Blackberry";if(ur(t))return"Webos";if(rr(t))return"Safari";if((t.includes("chrome/")||ir(t))&&!t.includes("edge/"))return"Chrome";if(or(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/firefox\//i.test(e)}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/crios\//i.test(e)}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/iemobile/i.test(e)}function or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/android/i.test(e)}function sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/blackberry/i.test(e)}function ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/webos/i.test(e)}function cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/iphone|ipad|ipod/i.test(e)}function lr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return cr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function hr(){return Z()&&10===document.documentMode}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return cr(e)||or(e)||ur(e)||sr(e)||/windows phone/i.test(e)||ar(e)}function dr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=tr(K());break;case"Worker":t="".concat(tr(K()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ct,"/").concat(r)}var pr=function(){function e(t,n,r){x(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mr(this),this.idTokenSubscription=new mr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return E(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=sn(t)),this._initializationPromise=this.queue(_(R().mark((function r(){var i,a;return R().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,er.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=_(R().mark((function e(t){var n,r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return nn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ie(t):null)&&nn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=_(R().mark((function e(t){var n=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&nn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(_(R().mark((function n(){return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(sn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ne("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=_(R().mark((function e(t,n){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return nn(n=t&&sn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,er.create(this,[sn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=_(R().mark((function e(t){var n=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return nn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return nn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=_(R().mark((function e(){var t,n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vr(e){return Ie(e)}var mr=function(){function e(t){var n=this;x(this,e),this.auth=t,this.observer=null,this.addObserver=ge((function(e){return n.observer=e}))}return E(e,[{key:"next",get:function(){return nn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function yr(e,t,n){var r=vr(e);nn(r._canInitEmulator,r,"emulator-config-failed"),nn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=gr(t),o=function(e){var t=gr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:kr(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:kr(o[1])}}(t),s=o.host,u=o.port,l=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function gr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var br=function(){function e(t,n){x(this,e),this.providerId=t,this.signInMethod=n}return E(e,[{key:"toJSON",value:function(){return rn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return rn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return rn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return rn("not implemented")}}]),e}();function wr(e,t){return _r.apply(this,arguments)}function _r(){return _r=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:resetPassword",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),_r.apply(this,arguments)}function xr(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Er(e,t){return Ir.apply(this,arguments)}function Ir(){return Ir=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Sr(e,t){return Cr.apply(this,arguments)}function Cr(){return Cr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithPassword",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}function Nr(e,t){return Rr.apply(this,arguments)}function Rr(){return Rr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:sendOobCode",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}function Pr(e,t){return Ar.apply(this,arguments)}function Ar(){return Ar=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,n));case 1:case"end":return e.stop()}}),e)}))),Ar.apply(this,arguments)}function Or(e,t){return Dr.apply(this,arguments)}function Dr(){return Dr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,n));case 1:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}function Mr(e,t){return Lr.apply(this,arguments)}function Lr(){return Lr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,n));case 1:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Fr(e,t){return jr.apply(this,arguments)}function jr(){return jr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,n));case 1:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}function Ur(e,t){return Vr.apply(this,arguments)}function Vr(){return Vr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithEmailLink",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}function qr(e,t){return Br.apply(this,arguments)}function Br(){return Br=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithEmailLink",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Br.apply(this,arguments)}var zr=function(e){v(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return x(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return E(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Sr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ur(t,{email:this._email,oobCode:this._password}));case 5:Xt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",xr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",qr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Xt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(br);function Wr(e,t){return Hr.apply(this,arguments)}function Hr(){return Hr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithIdp",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}var Gr=function(e){v(n,e);var t=k(n);function n(){var e;return x(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return E(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Wr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Wr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Wr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pe(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xt("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=At(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(br);function Kr(e,t){return Yr.apply(this,arguments)}function Yr(){return Yr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:sendVerificationCode",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}function Qr(){return Qr=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithPhoneNumber",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}function Jr(){return Jr=_(R().mark((function e(t,n){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(t,"POST","/v1/accounts:signInWithPhoneNumber",mn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw En(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}var Xr=C({},"USER_NOT_FOUND","user-not-found");function Zr(){return Zr=_(R().mark((function e(t,n){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithPhoneNumber",mn(t,r),Xr));case 2:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}var $r=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this,"phone","phone")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Qr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Jr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Zr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(br);var ei=function(){function e(t){var n,r,i,a,o,s;x(this,e);var u=ve(me(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);nn(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return E(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ve(me(e)).link,n=t?ve(me(t)).deep_link_id:null,r=ve(me(e)).deep_link_id;return(r?ve(me(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(QS){return null}}}]),e}();var ti=function(){function e(){x(this,e),this.providerId=e.PROVIDER_ID}return E(e,null,[{key:"credential",value:function(e,t){return zr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ei.parseLink(t);return nn(n,"argument-error"),zr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ti.PROVIDER_ID="password",ti.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ti.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ni=function(){function e(t){x(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return E(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ri=function(e){v(n,e);var t=k(n);function n(){var e;return x(this,n),(e=t.apply(this,arguments)).scopes=[],e}return E(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return S(this.scopes)}}]),n}(ni),ii=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return nn(e.idToken||e.accessToken,"argument-error"),Gr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return nn("providerId"in t&&"signInMethod"in t,"argument-error"),Gr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(ri),ai=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.call(this,"facebook.com")}return E(n,null,[{key:"credential",value:function(e){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(QS){return null}}}]),n}(ri);ai.FACEBOOK_SIGN_IN_METHOD="facebook.com",ai.PROVIDER_ID="facebook.com";var oi=function(e){v(n,e);var t=k(n);function n(){var e;return x(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return E(n,null,[{key:"credential",value:function(e,t){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(QS){return null}}}]),n}(ri);oi.GOOGLE_SIGN_IN_METHOD="google.com",oi.PROVIDER_ID="google.com";var si=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.call(this,"github.com")}return E(n,null,[{key:"credential",value:function(e){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(QS){return null}}}]),n}(ri);si.GITHUB_SIGN_IN_METHOD="github.com",si.PROVIDER_ID="github.com";var ui=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return E(n,[{key:"_getIdTokenResponse",value:function(e){return Wr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Wr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Wr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(br),ci=function(e){v(n,e);var t=k(n);function n(e){return x(this,n),nn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return E(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ui.fromJSON(e);return nn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ui._create(r,n)}catch(i){return null}}}]),n}(ni),li=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.call(this,"twitter.com")}return E(n,null,[{key:"credential",value:function(e,t){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(QS){return null}}}]),n}(ri);function hi(e,t){return fi.apply(this,arguments)}function fi(){return fi=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signUp",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),fi.apply(this,arguments)}li.TWITTER_SIGN_IN_METHOD="twitter.com",li.PROVIDER_ID="twitter.com";var di=function(){function e(t){x(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return E(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=_(R().mark((function t(n,r,i){var a,o,s,u,c=arguments;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Jn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=pi(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=_(R().mark((function t(n,r,i){var a;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=pi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function pi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function vi(){return vi=_(R().mark((function e(t){var n,r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new di({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,hi(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,di._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}var mi=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o,s;return x(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(d(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return E(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(te);function yi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw mi._fromErrorAndOperation(e,n,t,r);throw n}))}function gi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ki(e,t){return bi.apply(this,arguments)}function bi(){return bi=_(R().mark((function e(t,n){var r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ie(t),e.next=3,xi(!0,r,n);case 3:return e.t0=Cn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=gi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function wi(e,t){return _i.apply(this,arguments)}function _i(){return _i=_(R().mark((function e(t,n){var r,i,a=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ln,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",di._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function xi(e,t,n){return Ti.apply(this,arguments)}function Ti(){return(Ti=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn(n);case 2:i=gi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",nn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(e,t){return Ii.apply(this,arguments)}function Ii(){return Ii=_(R().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ln(t,yi(i,a,n,t),r);case 6:return nn((o=e.sent).idToken,i,"internal-error"),nn(s=Mn(o.idToken),i,"internal-error"),u=s.sub,nn(t.uid===u,i,"user-mismatch"),e.abrupt("return",di._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Xt(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ii.apply(this,arguments)}function Si(e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=_(R().mark((function e(t,n){var r,i,a,o,s=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,yi(t,i,n);case 4:return a=e.sent,e.next=7,di._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ni(e,t){return Ri.apply(this,arguments)}function Ri(){return Ri=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Si(vr(t),n));case 1:case"end":return e.stop()}}),e)}))),Ri.apply(this,arguments)}function Pi(e,t){return Ai.apply(this,arguments)}function Ai(){return(Ai=_(R().mark((function e(t,n){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ie(t),e.next=3,xi(!1,r,n.providerId);case 3:return e.abrupt("return",wi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oi(e,t){return Di.apply(this,arguments)}function Di(){return(Di=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(Ie(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mi(e,t){return Li.apply(this,arguments)}function Li(){return Li=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithCustomToken",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Li.apply(this,arguments)}function Fi(){return Fi=_(R().mark((function e(t,n){var r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vr(t),e.next=3,Mi(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,di._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}var ji=function(){function e(t,n){x(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return E(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ui._fromServerResponse(e,t):Xt(e,"internal-error")}}]),e}(),Ui=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return E(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ji);function Vi(e,t,n){var r;nn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),nn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(nn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(nn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function qi(){return qi=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ie(t),a={requestType:"PASSWORD_RESET",email:n},r&&Vi(i,a,r),e.next=5,Or(i,a);case 5:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function Bi(){return Bi=_(R().mark((function e(t,n,r){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(Ie(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Bi.apply(this,arguments)}function zi(){return zi=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Er(Ie(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}function Wi(e,t){return Hi.apply(this,arguments)}function Hi(){return Hi=_(R().mark((function e(t,n){var r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ie(t),e.next=3,wr(r,{oobCode:n});case 3:i=e.sent,nn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return nn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:nn(i.mfaInfo,r,"internal-error");case 13:nn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ji._fromServerResponse(vr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}function Gi(){return Gi=_(R().mark((function e(t,n){var r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wi(Ie(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}function Ki(e,t,n){return Yi.apply(this,arguments)}function Yi(){return Yi=_(R().mark((function e(t,n,r){var i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),e.next=3,hi(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,di._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function Qi(){return Qi=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ie(t),a={requestType:"EMAIL_SIGNIN",email:n},nn(r.handleCodeInApp,i,"argument-error"),r&&Vi(i,a,r),e.next=6,Mr(i,a);case 6:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function Ji(){return Ji=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ie(t),nn((a=ti.credentialWithLink(n,r||un()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ni(i,a));case 4:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Xi(e,t){return Zi.apply(this,arguments)}function Zi(){return Zi=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:createAuthUri",mn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function $i(){return $i=_(R().mark((function e(t,n){var r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cn()?un():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Xi(Ie(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function ea(){return(ea=_(R().mark((function e(t,n){var r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ie(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Vi(r.auth,a,n),e.next=8,Pr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(){return(ta=_(R().mark((function e(t,n,r){var i,a,o,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ie(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Vi(i.auth,o,r),e.next=8,Fr(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t){return ra.apply(this,arguments)}function ra(){return ra=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}function ia(){return(ia=_(R().mark((function e(t,n){var r,i,a,o,s,u,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Ie(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ln(a,na(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(e,t,n){return oa.apply(this,arguments)}function oa(){return oa=_(R().mark((function e(t,n,r){var i,a,o,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ln(t,xr(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}var sa=E((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};x(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ua=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o;return x(this,n),(o=t.call(this,e,r,i)).username=a,o}return E(n)}(sa),ca=function(e){v(n,e);var t=k(n);function n(e,r){return x(this,n),t.call(this,e,"facebook.com",r)}return E(n)}(sa),la=function(e){v(n,e);var t=k(n);function n(e,r){return x(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return E(n)}(ua),ha=function(e){v(n,e);var t=k(n);function n(e,r){return x(this,n),t.call(this,e,"google.com",r)}return E(n)}(sa),fa=function(e){v(n,e);var t=k(n);function n(e,r,i){return x(this,n),t.call(this,e,"twitter.com",r,i)}return E(n)}(ua);function da(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Mn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new sa(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ca(a,i);case"github.com":return new la(a,i);case"google.com":return new ha(a,i);case"twitter.com":return new fa(a,i,e.screenName||null);case"custom":case"anonymous":return new sa(a,null);default:return new sa(a,r,i)}}(n)}var pa=function(){function e(t,n){x(this,e),this.type=t,this.credential=n}return E(e,[{key:"toJSON",value:function(){return{multiFactorSession:C({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),va=function(){function e(t,n,r){x(this,e),this.session=t,this.hints=n,this.signInResolver=r}return E(e,[{key:"resolveSignIn",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=vr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ji._fromServerResponse(r,e)}));nn(i.mfaPendingCredential,r,"internal-error");var o=pa._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=_(R().mark((function e(t){var a,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,di._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return nn(n.user,r,"internal-error"),e.abrupt("return",di._forOperation(n.user,n.operationType,s));case 17:Xt(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ma(e,t){return yn(e,"POST","/v2/accounts/mfaEnrollment:start",mn(e,t))}function ya(e,t){return yn(e,"POST","/v2/accounts/mfaEnrollment:withdraw",mn(e,t))}var ga=function(){function e(t){var n=this;x(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ji._fromServerResponse(t.auth,e)})))}))}return E(e,[{key:"getSession",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=pa,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=_(R().mark((function e(t,n){var r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ln(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=_(R().mark((function e(t){var n,r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Ln(this.user,ya(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ka=new WeakMap;var ba="__sak",wa=function(){function e(t,n){x(this,e),this.storageRetriever=t,this.type=n}return E(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ba,"1"),this.storage.removeItem(ba),Promise.resolve(!0)):Promise.resolve(!1)}catch(QS){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var _a=function(e){v(n,e);var t=k(n);function n(){var e;return x(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=K();return rr(e)||cr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=fr(),e._shouldAllowMigration=!0,e}return E(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);hr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=_(R().mark((function e(t,r){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(l(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=_(R().mark((function e(t){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(l(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(l(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(wa);_a.type="LOCAL";var xa=_a,Ta=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return E(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(wa);Ta.type="SESSION";var Ea=Ta;function Ia(e){return Promise.all(e.map(function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Sa=function(){function e(t){x(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return E(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=_(R().mark((function e(t){var n,r,i,a,o,s,u,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ia(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ca(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Sa.receivers=[];var Na=function(){function e(t){x(this,e),this.target=t,this.handlers=new Set}return E(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=_(R().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Ca("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ra(){return window}function Pa(){return"undefined"!==typeof Ra().WorkerGlobalScope&&"function"===typeof Ra().importScripts}function Aa(){return Oa.apply(this,arguments)}function Oa(){return(Oa=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Da(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ma="firebaseLocalStorageDb",La="firebaseLocalStorage",Fa="fbase_key",ja=function(){function e(t){x(this,e),this.request=t}return E(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ua(e,t){return e.transaction([La],t?"readwrite":"readonly").objectStore(La)}function Va(){var e=indexedDB.deleteDatabase(Ma);return new ja(e).toPromise()}function qa(){var e=indexedDB.open(Ma,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(La,{keyPath:Fa})}catch(r){n(r)}})),e.addEventListener("success",_(R().mark((function n(){var r;return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(La)){n.next=12;break}return r.close(),n.next=5,Va();case 5:return n.t0=t,n.next=8,qa();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ba(e,t,n){return za.apply(this,arguments)}function za(){return za=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ua(t,!0).put((C(i={},Fa,n),C(i,"value",r),i)),e.abrupt("return",new ja(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function Wa(e,t){return Ha.apply(this,arguments)}function Ha(){return Ha=_(R().mark((function e(t,n){var r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ua(t,!1).get(n),e.next=3,new ja(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Ga(e,t){var n=Ua(e,!0).delete(t);return new ja(n).toPromise()}var Ka=function(){function e(){x(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return E(e,[{key:"_openDb",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,qa();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pa()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=_(R().mark((function e(){var t=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Sa._getInstance(Pa()?self:null),this.receiver._subscribe("keyChanged",function(){var e=_(R().mark((function e(n,r){var i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=_(R().mark((function e(){var t,n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Na(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Da()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,qa();case 5:return t=e.sent,e.next=8,Ba(t,ba,"1");case 8:return e.next=10,Ga(t,ba);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=_(R().mark((function e(t,n){var r=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ba(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Wa(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=_(R().mark((function e(t){var n=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ga(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=_(R().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ua(e,!1).getAll();return new ja(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=b(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(_(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ka.type="LOCAL";var Ya=Ka;function Qa(e,t){return yn(e,"POST","/v2/accounts/mfaSignIn:start",mn(e,t))}function Ja(e){return Xa.apply(this,arguments)}function Xa(){return Xa=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}function Za(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Zt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function $a(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var eo=1e12,to=function(){function e(t){x(this,e),this.auth=t,this.counter=eo,this._widgets=new Map}return E(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new no(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||eo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||eo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||eo,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),no=function(){function e(t,n,r){var i=this;x(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;nn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return E(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ro=$a("rcb"),io=new hn(3e4,6e4),ao="https://www.google.com/recaptcha/api.js?",oo=function(){function e(){x(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ra().grecaptcha}return E(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return nn(so(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ra().grecaptcha):new Promise((function(r,i){var a=Ra().setTimeout((function(){i(Zt(e,"network-request-failed"))}),io.get());Ra()[ro]=function(){Ra().clearTimeout(a),delete Ra()[ro];var o=Ra().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Zt(e,"internal-error"))},Za("".concat(ao,"?").concat(pe({onload:ro,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Zt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Ra().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function so(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var uo=function(){function e(){x(this,e)}return E(e,[{key:"load",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new to(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),co="recaptcha",lo={theme:"light",type:"image"},ho=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},lo),r=arguments.length>2?arguments[2]:void 0;x(this,e),this.parameters=n,this.type=co,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vr(r),this.isInvisible="invisible"===this.parameters.size,nn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;nn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uo:new oo,this.validateStartingState()}return E(e,[{key:"verify",value:function(){var e=_(R().mark((function e(){var t,n,r,i=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){nn(!this.parameters.sitekey,this.auth,"argument-error"),nn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),nn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ra()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){nn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=_(R().mark((function e(){var t,n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn(cn()&&!Pa(),this.auth,"internal-error"),e.next=3,fo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ja(this.auth);case 8:nn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return nn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function fo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var po=function(){function e(t,n){x(this,e),this.verificationId=t,this.onConfirmation=n}return E(e,[{key:"confirm",value:function(e){var t=$r._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function vo(e,t,n){return mo.apply(this,arguments)}function mo(){return mo=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),e.next=3,bo(i,n,Ie(r));case 3:return a=e.sent,e.abrupt("return",new po(a,(function(e){return Ni(i,e)})));case 5:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}function yo(e,t,n){return go.apply(this,arguments)}function go(){return(go=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ie(t),e.next=3,xi(!1,i,"phone");case 3:return e.next=5,bo(i.auth,n,Ie(r));case 5:return a=e.sent,e.abrupt("return",new po(a,(function(e){return Pi(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ko(){return(ko=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ie(t),e.next=3,bo(i.auth,n,Ie(r));case 3:return a=e.sent,e.abrupt("return",new po(a,(function(e){return Oi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(e,t,n){return wo.apply(this,arguments)}function wo(){return wo=_(R().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,nn("string"===typeof a,t,"argument-error"),nn(r.type===co,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return nn("enroll"===s.type,t,"internal-error"),e.next=13,ma(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return nn("signin"===s.type,t,"internal-error"),nn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Qa(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Kr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),wo.apply(this,arguments)}function _o(){return(_o=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wi(Ie(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xo=function(){function e(t){x(this,e),this.providerId=e.PROVIDER_ID,this.auth=vr(t)}return E(e,[{key:"verifyPhoneNumber",value:function(e,t){return bo(this.auth,e,Ie(t))}}],[{key:"credential",value:function(e,t){return $r._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?$r._fromTokenResponse(n,r):null}}]),e}();function To(e,t){return t?sn(t):(nn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}xo.PROVIDER_ID="phone",xo.PHONE_SIGN_IN_METHOD="phone";var Eo=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this,"custom","custom")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return Wr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Wr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Wr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(br);function Io(e){return Si(e.auth,new Eo(e),e.bypassAuthState)}function So(e){var t=e.auth,n=e.user;return nn(n,t,"internal-error"),Ei(n,new Eo(e),e.bypassAuthState)}function Co(e){return No.apply(this,arguments)}function No(){return No=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,nn(r=t.user,n,"internal-error"),e.abrupt("return",wi(r,new Eo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}var Ro=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];x(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return E(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=_(R().mark((function t(n,r){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=_(R().mark((function e(t){var n,r,i,a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Io;case"linkViaPopup":case"linkViaRedirect":return Co;case"reauthViaPopup":case"reauthViaRedirect":return So;default:Xt(this.auth,"internal-error")}}},{key:"resolve",value:function(e){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Po=new hn(2e3,1e4);function Ao(e,t,n){return Oo.apply(this,arguments)}function Oo(){return Oo=_(R().mark((function e(t,n,r){var i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),en(t,n,ni),a=To(i,r),o=new Fo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Do(){return(Do=_(R().mark((function e(t,n,r){var i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return en((i=Ie(t)).auth,n,ni),a=To(i.auth,r),o=new Fo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mo(e,t,n){return Lo.apply(this,arguments)}function Lo(){return(Lo=_(R().mark((function e(t,n,r){var i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return en((i=Ie(t)).auth,n,ni),a=To(i.auth,r),o=new Fo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fo=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o){var s;return x(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=d(s),s}return E(n,[{key:"executeNotNull",value:function(){var e=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return nn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=_(R().mark((function e(){var t,n=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return an(1===this.filter.length,"Popup operations only handle one event"),t=Ca(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Zt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Zt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Zt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Po.get())}()}}]),n}(Ro);Fo.currentPopupAction=null;var jo=new Map,Uo=function(e){v(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return x(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return E(n,[{key:"execute",value:function(){var e=_(R().mark((function e(){var t,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=jo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Vo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,f(l(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:jo.set(this.auth._key(),t);case 21:return this.bypassAuthState||jo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=_(R().mark((function e(t){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",f(l(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",f(l(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ro);function Vo(e,t){return qo.apply(this,arguments)}function qo(){return qo=_(R().mark((function e(t,n){var r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ho(n),i=Wo(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Bo(e,t){return zo.apply(this,arguments)}function zo(){return zo=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t)._set(Ho(n),"true"));case 1:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Wo(e){return sn(e._redirectPersistence)}function Ho(e){return $n("pendingRedirect",e.config.apiKey,e.name)}function Go(e,t,n){return function(e,t,n){return Ko.apply(this,arguments)}(e,t,n)}function Ko(){return Ko=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),en(t,n,ni),a=To(i,r),e.next=5,Bo(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Yo(e,t,n){return function(e,t,n){return Qo.apply(this,arguments)}(e,t,n)}function Qo(){return(Qo=_(R().mark((function e(t,n,r){var i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return en((i=Ie(t)).auth,n,ni),a=To(i.auth,r),e.next=5,Bo(a,i.auth);case 5:return e.next=7,ns(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(e,t,n){return function(e,t,n){return Xo.apply(this,arguments)}(e,t,n)}function Xo(){return(Xo=_(R().mark((function e(t,n,r){var i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return en((i=Ie(t)).auth,n,ni),a=To(i.auth,r),e.next=5,xi(!1,i,n.providerId);case 5:return e.next=7,Bo(a,i.auth);case 7:return e.next=9,ns(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(e,t){return $o.apply(this,arguments)}function $o(){return $o=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(t)._initializationPromise;case 2:return e.abrupt("return",es(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),$o.apply(this,arguments)}function es(e,t){return ts.apply(this,arguments)}function ts(){return ts=_(R().mark((function e(t,n){var r,i,a,o,s,u=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=vr(t),a=To(i,n),o=new Uo(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(e){return rs.apply(this,arguments)}function rs(){return(rs=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ca("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var is=function(){function e(t){x(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return E(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return os(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!os(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Zt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(as(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(as(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function as(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function os(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ss(e){return us.apply(this,arguments)}function us(){return us=_(R().mark((function e(t){var n,r=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",yn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}var cs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ls=/^https?/;function hs(){return hs=_(R().mark((function e(t){var n,r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ss(t);case 4:n=e.sent,r=n.authorizedDomains,i=b(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!fs(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Xt(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),hs.apply(this,arguments)}function fs(e){var t=un(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ls.test(r))return!1;if(cs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var ds=new hn(3e4,6e4);function ps(){var e=Ra().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=S(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var vs=null;function ms(e){return vs=vs||function(e){return new Promise((function(t,n){var r,i,a;function o(){ps(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ps(),n(Zt(e,"network-request-failed"))},timeout:ds.get()})}if(null===(i=null===(r=Ra().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ra().gapi)||void 0===a?void 0:a.load)){var s=$a("iframefcb");return Ra()[s]=function(){gapi.load?o():n(Zt(e,"network-request-failed"))},Za("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw vs=null,e}))}(e),vs}var ys=new hn(5e3,15e3),gs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ks=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bs(e){var t=e.config;nn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?fn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ct},i=ks.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(pe(r).slice(1))}function ws(e){return _s.apply(this,arguments)}function _s(){return _s=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ms(t);case 2:return n=e.sent,nn(r=Ra().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:bs(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gs,dontclear:!0},(function(e){return new Promise(function(){var n=_(R().mark((function n(r,i){var a,o,s;return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Ra().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Zt(t,"network-request-failed"),o=Ra().setTimeout((function(){i(a)}),ys.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}var xs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ts="_blank",Es="http://localhost",Is=function(){function e(t){x(this,e),this.window=t,this.associatedEvent=null}return E(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ss(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},xs),{width:r.toString(),height:i.toString(),top:a,left:o}),l=K().toLowerCase();n&&(s=ir(l)?Ts:n),nr(l)&&(t=t||Es,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(lr(l)&&"_self"!==s)return Cs(t||"",s),new Is(null);var f=window.open(t||"",s,h);nn(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Is(f)}function Cs(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Ns="__/auth/handler",Rs="emulator/auth/handler";function Ps(e,t,n,r,i,a){nn(e.config.authDomain,e,"auth-domain-config-required"),nn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ct,eventId:i};if(t instanceof ni){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",le(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var l=c(u[s],2),h=l[0],f=l[1];o[h]=f}}if(t instanceof ri){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ns);return fn(t,Rs)}(e),"?").concat(pe(p).slice(1))}var As="webStorageSupport",Os=function(){function e(){x(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ea,this._completeRedirectFn=es}return E(e,[{key:"_openPopup",value:function(){var e=_(R().mark((function e(t,n,r,i){var a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return an(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ps(t,n,r,un(),i),e.abrupt("return",Ss(t,o,Ca()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=_(R().mark((function e(t,n,r,i){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ps(t,n,r,un(),i),Ra().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(an(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ws(t);case 2:return n=e.sent,r=new is(t),n.register("authEvent",(function(e){return nn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(As,{type:As},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Xt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return hs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return fr()||rr()||cr()}}]),e}(),Ds=Os,Ms=function(){function e(t){x(this,e),this.factorId=t}return E(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return rn("unexpected MultiFactorSessionType")}}}]),e}(),Ls=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this,"phone")).credential=e,r}return E(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return yn(e,"POST","/v2/accounts/mfaEnrollment:finalize",mn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return yn(e,"POST","/v2/accounts/mfaSignIn:finalize",mn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Ms),Fs=function(){function e(){x(this,e)}return E(e,null,[{key:"assertion",value:function(e){return Ls._fromCredential(e)}}]),e}();Fs.FACTOR_ID="phone";var js,Us="@firebase/auth",Vs="0.19.11",qs=function(){function e(t){x(this,e),this.auth=t,this.internalListeners=new Map}return E(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){nn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Bs(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function zs(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}js="Browser",nt(new Ae("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){nn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),nn(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:js,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dr(js)},i=new pr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(sn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),nt(new Ae("auth-internal",(function(e){return function(e){return new qs(e)}(vr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),vt(Us,Vs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(js)),vt(Us,Vs,"esm2017");var Ws,Hs=function(){return Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Hs.apply(this,arguments)},Gs=function(e){return{loading:void 0===e||null===e,value:e}},Ks=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return Hs(Hs({},e),{error:t.error,loading:!1,value:void 0});case"reset":return Gs(t.defaultValue);case"value":return Hs(Hs({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),Gs(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},s=function(e){a({type:"error",error:e})},u=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:s,setValue:u,value:i.value}}),[i.error,i.loading,o,s,u,i.value])},Ys=function(e,n){var r=Ks((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,s=r.setValue,u=r.value;(0,t.useEffect)((function(){var t=function(e,t,n,r){return Ie(e).onAuthStateChanged(t,n,r)}(e,(function(e){return Bs(void 0,void 0,void 0,(function(){var t;return zs(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return s(e),[2]}}))}))}),o);return function(){t()}}),[e]);var c=[u,a,i];return(0,t.useMemo)((function(){return c}),c)},Qs=n(184),Js=function(){return(0,Qs.jsx)("div",{id:"loader_container",className:"d-flex justify-content-center align-items-center",children:(0,Qs.jsx)("div",{className:"nb-spinner"})})};function Xs(){return Xs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xs.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Ws||(Ws={}));var Zs=function(e){return e};var $s="beforeunload",eu="popstate";function tu(e){e.preventDefault(),e.returnValue=""}function nu(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function ru(){return Math.random().toString(36).substr(2,8)}function iu(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function au(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ou(e,t){if(!e)throw new Error(t)}var su=(0,t.createContext)(null);var uu=(0,t.createContext)(null);var cu=(0,t.createContext)({outlet:null,matches:[]});function lu(e){var n=e.to,r=e.replace,i=e.state;vu()||ou(!1);var a=yu();return(0,t.useEffect)((function(){a(n,{replace:r,state:i})})),null}function hu(e){ou(!1)}function fu(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,s=e.navigationType,u=void 0===s?Ws.Pop:s,c=e.navigator,l=e.static,h=void 0!==l&&l;vu()&&ou(!1);var f=Ru(r),d=(0,t.useMemo)((function(){return{basename:f,navigator:c,static:h}}),[f,c,h]);"string"===typeof o&&(o=au(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,x=p.key,T=void 0===x?"default":x,E=(0,t.useMemo)((function(){var e=Cu(m,f);return null==e?null:{pathname:e,search:g,hash:b,state:_,key:T}}),[f,m,g,b,_,T]);return null==E?null:(0,t.createElement)(su.Provider,{value:d},(0,t.createElement)(uu.Provider,{children:a,value:{location:E,navigationType:u}}))}function du(e){var n=e.children,r=e.location;return function(e,n){vu()||ou(!1);var r=(0,t.useContext)(cu).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var s,u=mu();if(n){var c,l="string"===typeof n?au(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||ou(!1),s=l}else s=u;var h=s.pathname||"/",f="/"===o?h:h.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=Cu(("string"===typeof t?au(t):t).pathname||"/",n);if(null==r)return null;var i=bu(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Tu(i[o],r);return a}(e,{pathname:f});0;return Eu(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:Nu([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:Nu([o,e.pathnameBase])})})),r)}(ku(n),r)}function pu(e){vu()||ou(!1);var n=(0,t.useContext)(su),r=n.basename,i=n.navigator,a=gu(e),o=a.hash,s=a.pathname,u=a.search,c=s;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?au(e).pathname:e.pathname}(e),h=null!=l&&l.endsWith("/");c="/"===s?r+(h?"/":""):Nu([r,s])}return i.createHref({pathname:c,search:u,hash:o})}function vu(){return null!=(0,t.useContext)(uu)}function mu(){return vu()||ou(!1),(0,t.useContext)(uu).location}function yu(){vu()||ou(!1);var e=(0,t.useContext)(su),n=e.basename,r=e.navigator,i=(0,t.useContext)(cu).matches,a=mu().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),s=(0,t.useRef)(!1);(0,t.useEffect)((function(){s.current=!0}));var u=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=Su(e,JSON.parse(o),a);"/"!==n&&(i.pathname=Nu([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return u}function gu(e){var n=(0,t.useContext)(cu).matches,r=mu().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return Su(e,JSON.parse(i),r)}),[e,i,r])}function ku(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==hu&&ou(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=ku(e.props.children)),n.push(r)}else n.push.apply(n,ku(e.props.children))})),n}function bu(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||ou(!1),a.relativePath=a.relativePath.slice(r.length));var o=Nu([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&ou(!1),bu(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:xu(o,e.index),routesMeta:s})})),t}var wu=/^:\w+$/,_u=function(e){return"*"===e};function xu(e,t){var n=e.split("/"),r=n.length;return n.some(_u)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!_u(e)})).reduce((function(e,t){return e+(wu.test(t)?3:""===t?1:10)}),r)}function Tu(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Iu({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:Nu([i,l.pathname]),pathnameBase:Ru(Nu([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=Nu([i,l.pathnameBase]))}return a}function Eu(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(cu.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function Iu(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(rA){return e}}(l[n]||""),e}),{});return{params:h,pathname:s,pathnameBase:u,pattern:e}}function Su(e,t,n){var r,i="string"===typeof e?au(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?au(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:Pu(a),hash:Au(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function Cu(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var Nu=function(e){return e.join("/").replace(/\/\/+/g,"/")},Ru=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Pu=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Au=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function Ou(){return Ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ou.apply(this,arguments)}function Du(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Mu=["onClick","reloadDocument","replace","state","target","to"];function Lu(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,Zs({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(eu,(function(){if(a)h.call(a),a=null;else{var e=Ws.Pop,t=i(),n=t[0],r=t[1];if(h.length){if(null!=n){var o=u-n;o&&(a={action:e,location:r,retry:function(){y(-1*o)}},y(o))}}else m(e)}}));var o=Ws.Pop,s=i(),u=s[0],c=s[1],l=nu(),h=nu();function f(e){return"string"===typeof e?e:iu(e)}function d(e,t){return void 0===t&&(t=null),Zs(Xs({pathname:c.pathname,hash:"",search:""},"string"===typeof e?au(e):e,{state:t,key:ru()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},f(e)]}function v(e,t,n){return!h.length||(h.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=i();u=t[0],c=t[1],l.call({action:o,location:c})}function y(e){r.go(e)}null==u&&(u=0,r.replaceState(Xs({},r.state,{idx:u}),""));var g={get action(){return o},get location(){return c},createHref:f,push:function e(t,i){var a=Ws.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var s=p(o,u+1),c=s[0],l=s[1];try{r.pushState(c,"",l)}catch(rA){n.location.assign(l)}m(a)}},replace:function e(t,n){var i=Ws.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,u),s=o[0],c=o[1];r.replaceState(s,"",c),m(i)}},go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(e){return l.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&n.addEventListener($s,tu),function(){t(),h.length||n.removeEventListener($s,tu)}}};return g}({window:i}));var o=a.current,s=c((0,t.useState)({action:o.action,location:o.location}),2),u=s[0],l=s[1];return(0,t.useLayoutEffect)((function(){return o.listen(l)}),[o]),(0,t.createElement)(fu,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:o})}var Fu=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,c=e.to,l=Du(e,Mu),h=pu(c),f=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=yu(),u=mu(),c=gu(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||iu(u)===iu(c);s(e,{replace:n,state:o})}}),[u,s,c,a,o,i,e])}(c,{replace:o,state:s,target:u});return(0,t.createElement)("a",Ou({},l,{href:h,onClick:function(e){r&&r(e),e.defaultPrevented||i||f(e)},ref:n,target:u}))}));var ju=n(985);function Uu(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Vu(e,t){if(null==e)return{};var n,r,i=Uu(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function qu(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=qu(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Bu(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=qu(e))&&(r&&(r+=" "),r+=t);return r}var zu=n(110),Wu=n.n(zu),Hu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu="object"===("undefined"===typeof window?"undefined":Hu(window))&&"object"===("undefined"===typeof document?"undefined":Hu(document))&&9===document.nodeType;function Ku(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p(e,t)}var Yu={}.constructor;function Qu(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(Qu);if(e.constructor!==Yu)return e;var t={};for(var n in e)t[n]=Qu(e[n]);return t}function Ju(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=Qu(t),a=r.plugins.onCreateRule(e,i,n);return a||(e[0],null)}var Xu=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},Zu=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=Xu(e[r]," ");else n=Xu(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function $u(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function ec(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function tc(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,a=void 0===i?0:i,o=t.fallbacks;!1===n.format&&(a=-1/0);var s=$u(n),u=s.linebreak,c=s.space;if(e&&a++,o)if(Array.isArray(o))for(var l=0;l<o.length;l++){var h=o[l];for(var f in h){var d=h[f];null!=d&&(r&&(r+=u),r+=ec(f+":"+c+Zu(d)+";",a))}}else for(var p in o){var v=o[p];null!=v&&(r&&(r+=u),r+=ec(p+":"+c+Zu(v)+";",a))}for(var m in t){var y=t[m];null!=y&&"fallbacks"!==m&&(r&&(r+=u),r+=ec(m+":"+c+Zu(y)+";",a))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),ec(""+e+c+"{"+r,--a)+ec("}",a)):r}var nc=/([[\].#*$><+~=|^:(),"'`\s])/g,rc="undefined"!==typeof CSS&&CSS.escape,ic=function(e){return rc?rc(e):e.replace(nc,"\\$1")},ac=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==i||!1===i,o=e in this.style;if(a&&!o&&!r)return this;var s=a&&o;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var u=this.options.sheet;return u&&u.attached,this},e}(),oc=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=r.selector,o=r.scoped,s=r.sheet,u=r.generateId;return a?i.selectorText=a:!1!==o&&(i.id=u(d(d(i)),s),i.selectorText="."+ic(i.id)),i}Ku(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=Zu(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Xs({},e,{allowEmpty:!0}):e;return tc(this.selectorText,this.style,n)},E(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(ac),sc={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new oc(e,t,n)}},uc={indent:1,children:!0},cc=/@([\w-]+)/,lc=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(cc);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new Dc(Xs({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=uc);var t=$u(e).linebreak;if(null==e.indent&&(e.indent=uc.indent),null==e.children&&(e.children=uc.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),hc=/@media|@supports\s+/,fc={onCreateRule:function(e,t,n){return hc.test(e)?new lc(e,t,n):null}},dc={indent:1,children:!0},pc=/@keyframes\s+([\w-]+)/,vc=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(pc);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,a=n.sheet,o=n.generateId;for(var s in this.id=!1===i?this.name:ic(o(this,a)),this.rules=new Dc(Xs({},n,{parent:this})),t)this.rules.add(s,t[s],Xs({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=dc);var t=$u(e).linebreak;if(null==e.indent&&(e.indent=dc.indent),null==e.children&&(e.children=dc.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),mc=/@keyframes\s+/,yc=/\$([\w-]+)/g,gc=function(e,t){return"string"===typeof e?e.replace(yc,(function(e,n){return n in t?t[n]:e})):e},kc=function(e,t,n){var r=e[t],i=gc(r,n);i!==r&&(e[t]=i)},bc={onCreateRule:function(e,t,n){return"string"===typeof e&&mc.test(e)?new vc(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&kc(e,"animation-name",n.keyframes),"animation"in e&&kc(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return gc(e,r.keyframes);default:return e}}},wc=function(e){function t(){return e.apply(this,arguments)||this}return Ku(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Xs({},e,{allowEmpty:!0}):e;return tc(this.key,this.style,n)},t}(ac),_c={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new wc(e,t,n):null}},xc=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=$u(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=tc(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return tc(this.at,this.style,e)},e}(),Tc=/@font-face/,Ec={onCreateRule:function(e,t,n){return Tc.test(e)?new xc(e,t,n):null}},Ic=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return tc(this.key,this.style,e)},e}(),Sc={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new Ic(e,t,n):null}},Cc=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Nc={"@charset":!0,"@import":!0,"@namespace":!0},Rc={onCreateRule:function(e,t,n){return e in Nc?new Cc(e,t,n):null}},Pc=[sc,fc,bc,_c,Ec,Sc,Rc],Ac={process:!0},Oc={force:!0,process:!0},Dc=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,a=r.sheet,o=r.jss,s=r.Renderer,u=r.generateId,c=r.scoped,l=Xs({classes:this.classes,parent:i,sheet:a,jss:o,Renderer:s,generateId:u,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(l.selector="."+ic(this.classes[h]));var f=Ju(h,t,l);if(!f)return null;this.register(f);var d=void 0===l.index?this.index.length:l.index;return this.index.splice(d,0,f),f},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var a=n;return-1!==i&&(a=Xs({},n,{index:i})),this.add(e,t,a)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof oc?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof vc&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof oc?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof vc&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=Ac);var i=this.options,a=i.jss.plugins,o=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(a.onUpdate(n,t,o,r),r.process&&s&&s!==t.style){for(var u in a.onProcessStyle(t.style,t,o),t.style){var c=t.style[u];c!==s[u]&&t.prop(u,c,Oc)}for(var l in s){var h=t.style[l],f=s[l];null==h&&h!==f&&t.prop(l,null,Oc)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=$u(e).linebreak,a=0;a<this.index.length;a++){var o=this.index[a].toString(e);(o||r)&&(t&&(t+=i),t+=o)}return t},e}(),Mc=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Xs({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Dc(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),Lc=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),Fc=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=Uu(t,["attached"]),i=$u(r).linebreak,a="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(a&&(a+=i),a+=s.toString(r))}return a},E(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),jc=new Fc,Uc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),Vc="2f1acc6c3a606b082e5eef5e54414ffb";null==Uc[Vc]&&(Uc[Vc]=0);var qc=Uc[Vc]++,Bc=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",a="";return r&&(r.options.classNamePrefix&&(a=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(a||"c")+qc+i+t:a+n.key+"-"+qc+(i?"-"+i:"")+"-"+t}},zc=function(e){var t;return function(){return t||(t=e()),t}},Wc=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},Hc=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=Zu(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(i){return!1}return!0},Gc=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Kc=function(e,t){return e.selectorText=t,e.selectorText===t},Yc=zc((function(){return document.querySelector("head")}));function Qc(e){var t=jc.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=Yc(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var Jc=zc((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Xc=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},Zc=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},$c=function(){function e(e){this.getPropertyValue=Wc,this.setProperty=Hc,this.removeProperty=Gc,this.setSelector=Kc,this.hasInsertedRules=!1,this.cssRules=[],e&&jc.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var a=Jc();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=Qc(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,a=i.parentNode;a&&a.insertBefore(e,i.nextSibling)}else Yc().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var a=Zc(n,t);if(!1===(i=Xc(n,r.toString({children:!1}),a)))return!1;this.refCssRule(e,a,i)}return this.insertRules(r.rules,i),i}var o=e.toString();if(!o)return!1;var s=Zc(n,t),u=Xc(n,o,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof Mc&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),el=0,tl=function(){function e(e){this.id=el++,this.version="10.9.0",this.plugins=new Lc,this.options={id:{minify:!1},createGenerateId:Bc,Renderer:Gu?$c:null,plugins:[]},this.generateId=Bc({minify:!1});for(var t=0;t<Pc.length;t++)this.plugins.use(Pc[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Xs({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===jc.index?0:jc.index+1);var r=new Mc(e,Xs({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),jc.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=Xs({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=Ju(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),nl=function(e){return new tl(e)},rl="object"===typeof CSS&&null!=CSS&&"number"in CSS;function il(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var a=il(r);a&&(t||(t={}),t[n]=a)}}return t}nl();function al(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=Xs({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var ol={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},sl=ol;var ul=t.createContext(null);function cl(){return t.useContext(ul)}var ll="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",hl=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var fl=Date.now(),dl="fnValues"+fl,pl="fnStyle"+ ++fl,vl=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=Ju(e,{},n);return r[pl]=t,r},onProcessStyle:function(e,t){if(dl in t||pl in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[dl]=n,e},onUpdate:function(e,t,n,r){var i=t,a=i[pl];a&&(i.style=a(e)||{});var o=i[dl];if(o)for(var s in o)i.prop(s,o[s](e),r)}}},ml="@global",yl="@global ",gl=function(){function e(e,t,n){for(var r in this.type="global",this.at=ml,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new Dc(Xs({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),kl=function(){function e(e,t,n){this.type="global",this.at=ml,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(yl.length);this.rule=n.jss.createRule(r,t,Xs({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),bl=/\s*,\s*/g;function wl(e,t){for(var n=e.split(bl),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var _l=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===ml)return new gl(e,t,n);if("@"===e[0]&&e.substr(0,yl.length)===yl)return new kl(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[ml]:null;if(i){for(var a in i)t.addRule(a,i[a],Xs({},n,{selector:wl(a,e.selector)}));delete r[ml]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,ml.length)===ml){var a=wl(i.substr(ml.length),e.selector);t.addRule(a,r[i],Xs({},n,{selector:a})),delete r[i]}}(e,t))}}},xl=/\s*,\s*/g,Tl=/&/g,El=/\$([\w-]+)/g;var Il=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split(xl),r=e.split(xl),i="",a=0;a<n.length;a++)for(var o=n[a],s=0;s<r.length;s++){var u=r[s];i&&(i+=", "),i+=-1!==u.indexOf("&")?u.replace(Tl,o):o+" "+u}return i}function n(e,t,n){if(n)return Xs({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=Xs({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,a){if("style"!==i.type)return r;var o,s,u=i,c=u.options.parent;for(var l in r){var h=-1!==l.indexOf("&"),f="@"===l[0];if(h||f){if(o=n(u,c,o),h){var d=t(l,u.selector);s||(s=e(c,a)),d=d.replace(El,s);var p=u.key+"-"+l;"replaceRule"in c?c.replaceRule(p,r[l],Xs({},o,{selector:d})):c.addRule(p,r[l],Xs({},o,{selector:d}))}else f&&c.addRule(l,{},o).addRule(u.key,r[l],{selector:u.selector});delete r[l]}}return r}}},Sl=/[A-Z]/g,Cl=/^ms-/,Nl={};function Rl(e){return"-"+e.toLowerCase()}var Pl=function(e){if(Nl.hasOwnProperty(e))return Nl[e];var t=e.replace(Sl,Rl);return Nl[e]=Cl.test(t)?"-"+t:t};function Al(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Pl(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Al):t.fallbacks=Al(e.fallbacks)),t}var Ol=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Al(e[t]);return e}return Al(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Pl(t);return t===r?e:(n.prop(r,e),null)}}},Dl=rl&&CSS?CSS.px:"px",Ml=rl&&CSS?CSS.ms:"ms",Ll=rl&&CSS?CSS.percent:"%";function Fl(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var jl=Fl({"animation-delay":Ml,"animation-duration":Ml,"background-position":Dl,"background-position-x":Dl,"background-position-y":Dl,"background-size":Dl,border:Dl,"border-bottom":Dl,"border-bottom-left-radius":Dl,"border-bottom-right-radius":Dl,"border-bottom-width":Dl,"border-left":Dl,"border-left-width":Dl,"border-radius":Dl,"border-right":Dl,"border-right-width":Dl,"border-top":Dl,"border-top-left-radius":Dl,"border-top-right-radius":Dl,"border-top-width":Dl,"border-width":Dl,"border-block":Dl,"border-block-end":Dl,"border-block-end-width":Dl,"border-block-start":Dl,"border-block-start-width":Dl,"border-block-width":Dl,"border-inline":Dl,"border-inline-end":Dl,"border-inline-end-width":Dl,"border-inline-start":Dl,"border-inline-start-width":Dl,"border-inline-width":Dl,"border-start-start-radius":Dl,"border-start-end-radius":Dl,"border-end-start-radius":Dl,"border-end-end-radius":Dl,margin:Dl,"margin-bottom":Dl,"margin-left":Dl,"margin-right":Dl,"margin-top":Dl,"margin-block":Dl,"margin-block-end":Dl,"margin-block-start":Dl,"margin-inline":Dl,"margin-inline-end":Dl,"margin-inline-start":Dl,padding:Dl,"padding-bottom":Dl,"padding-left":Dl,"padding-right":Dl,"padding-top":Dl,"padding-block":Dl,"padding-block-end":Dl,"padding-block-start":Dl,"padding-inline":Dl,"padding-inline-end":Dl,"padding-inline-start":Dl,"mask-position-x":Dl,"mask-position-y":Dl,"mask-size":Dl,height:Dl,width:Dl,"min-height":Dl,"max-height":Dl,"min-width":Dl,"max-width":Dl,bottom:Dl,left:Dl,top:Dl,right:Dl,inset:Dl,"inset-block":Dl,"inset-block-end":Dl,"inset-block-start":Dl,"inset-inline":Dl,"inset-inline-end":Dl,"inset-inline-start":Dl,"box-shadow":Dl,"text-shadow":Dl,"column-gap":Dl,"column-rule":Dl,"column-rule-width":Dl,"column-width":Dl,"font-size":Dl,"font-size-delta":Dl,"letter-spacing":Dl,"text-decoration-thickness":Dl,"text-indent":Dl,"text-stroke":Dl,"text-stroke-width":Dl,"word-spacing":Dl,motion:Dl,"motion-offset":Dl,outline:Dl,"outline-offset":Dl,"outline-width":Dl,perspective:Dl,"perspective-origin-x":Ll,"perspective-origin-y":Ll,"transform-origin":Ll,"transform-origin-x":Ll,"transform-origin-y":Ll,"transform-origin-z":Ll,"transition-delay":Ml,"transition-duration":Ml,"vertical-align":Dl,"flex-basis":Dl,"shape-margin":Dl,size:Dl,gap:Dl,grid:Dl,"grid-gap":Dl,"row-gap":Dl,"grid-row-gap":Dl,"grid-column-gap":Dl,"grid-template-rows":Dl,"grid-template-columns":Dl,"grid-auto-rows":Dl,"grid-auto-columns":Dl,"box-shadow-x":Dl,"box-shadow-y":Dl,"box-shadow-blur":Dl,"box-shadow-spread":Dl,"font-line-height":Dl,"text-shadow-x":Dl,"text-shadow-y":Dl,"text-shadow-blur":Dl});function Ul(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Ul(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=Ul(i,t[i],n);else for(var a in t)t[a]=Ul(e+"-"+a,t[a],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||jl[e];return!o||0===t&&o===Dl?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var Vl=function(e){void 0===e&&(e={});var t=Fl(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Ul(r,e[r],t);return e},onChangeValue:function(e,n){return Ul(n,e,t)}}},ql="",Bl="",zl="",Wl="",Hl=Gu&&"ontouchstart"in document.documentElement;if(Gu){var Gl={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Kl=document.createElement("p").style;for(var Yl in Gl)if(Yl+"Transform"in Kl){ql=Yl,Bl=Gl[Yl];break}"Webkit"===ql&&"msHyphens"in Kl&&(ql="ms",Bl=Gl.ms,Wl="edge"),"Webkit"===ql&&"-apple-trailing-word"in Kl&&(zl="apple")}var Ql=ql,Jl=Bl,Xl=zl,Zl=Wl,$l=Hl;var eh={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Ql?"-webkit-"+e:Jl+e)}},th={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Ql?Jl+"print-"+e:e)}},nh=/[-\s]+(.)?/g;function rh(e,t){return t?t.toUpperCase():""}function ih(e){return e.replace(nh,rh)}function ah(e){return ih("-"+e)}var oh,sh={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Ql){var n="mask-image";if(ih(n)in t)return e;if(Ql+ah(n)in t)return Jl+e}return e}},uh={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Xl||$l?e:Jl+e)}},ch={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Jl+e)}},lh={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Jl+e)}},hh={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Ql||"ms"===Ql&&"edge"!==Zl?Jl+e:e)}},fh={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Ql||"ms"===Ql||"apple"===Xl?Jl+e:e)}},dh={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Ql?"WebkitColumn"+ah(e)in t&&Jl+"column-"+e:"Moz"===Ql&&("page"+ah(e)in t&&"page-"+e))}},ph={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Ql)return e;var n=e.replace("-inline","");return Ql+ah(n)in t&&Jl+n}},vh={supportedProperty:function(e,t){return ih(e)in t&&e}},mh={supportedProperty:function(e,t){var n=ah(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Ql+n in t?Jl+e:"Webkit"!==Ql&&"Webkit"+n in t&&"-webkit-"+e}},yh={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Ql?""+Jl+e:e)}},gh={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Ql?Jl+"scroll-chaining":e)}},kh={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},bh={supportedProperty:function(e,t){var n=kh[e];return!!n&&(Ql+ah(n)in t&&Jl+n)}},wh={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},_h=Object.keys(wh),xh=function(e){return Jl+e},Th={supportedProperty:function(e,t,n){var r=n.multiple;if(_h.indexOf(e)>-1){var i=wh[e];if(!Array.isArray(i))return Ql+ah(i)in t&&Jl+i;if(!r)return!1;for(var a=0;a<i.length;a++)if(!(Ql+ah(i[0])in t))return!1;return i.map(xh)}return!1}},Eh=[eh,th,sh,uh,ch,lh,hh,fh,dh,ph,vh,mh,yh,gh,bh,Th],Ih=Eh.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Sh=Eh.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,S(t.noPrefill)),e}),[]),Ch={};if(Gu){oh=document.createElement("p");var Nh=window.getComputedStyle(document.documentElement,"");for(var Rh in Nh)isNaN(Rh)||(Ch[Nh[Rh]]=Nh[Rh]);Sh.forEach((function(e){return delete Ch[e]}))}function Ph(e,t){if(void 0===t&&(t={}),!oh)return e;if(null!=Ch[e])return Ch[e];"transition"!==e&&"transform"!==e||(t[e]=e in oh.style);for(var n=0;n<Ih.length&&(Ch[e]=Ih[n](e,oh.style,t),!Ch[e]);n++);try{oh.style[e]=""}catch(r){return!1}return Ch[e]}var Ah,Oh={},Dh={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Mh=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Lh(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Ph(t):", "+Ph(n);return r||(t||n)}function Fh(e,t){var n=t;if(!Ah||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=Oh[r])return Oh[r];try{Ah.style[e]=n}catch(i){return Oh[r]=!1,!1}if(Dh[e])n=n.replace(Mh,Lh);else if(""===Ah.style[e]&&("-ms-flex"===(n=Jl+n)&&(Ah.style[e]="-ms-flexbox"),Ah.style[e]=n,""===Ah.style[e]))return Oh[r]=!1,!1;return Ah.style[e]="",Oh[r]=n,Oh[r]}Gu&&(Ah=document.createElement("p"));var jh=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,a=Ph(n);a&&a!==n&&(i=!0);var o=!1,s=Fh(a,Zu(r));s&&s!==r&&(o=!0),(i||o)&&(i&&delete t[n],t[a||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Ql?e:"@"+Jl+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return Fh(t,Zu(e))||e}}};var Uh=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),a=0;a<i.length;a++)r[i[a]]=t[i[a]];return r}}};var Vh=nl({plugins:[vl(),_l(),Il(),Ol(),Vl(),"undefined"===typeof window?null:jh(),Uh()]}),qh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,a=e.seed,o=void 0===a?"":a,s=""===o?"":"".concat(o,"-"),u=0,c=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==hl.indexOf(e.key))return"Mui-".concat(e.key);var a="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[ll]&&""===o?"".concat(a,"-").concat(c()):a}return"".concat(s).concat(i).concat(c())}}(),Bh={disableGeneration:!1,generateClassName:qh,jss:Vh,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},zh=t.createContext(Bh);var Wh=-1e9;function Hh(){return Wh+=1}function Gh(e){return e&&"object"===y(e)&&e.constructor===Object}function Kh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?Xs({},e):e;return Gh(e)&&Gh(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(Gh(t[i])&&i in e?r[i]=Kh(e[i],t[i],n):r[i]=t[i])})),r}function Yh(e){var t="function"===typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return i;var a=n.overrides[r],o=Xs({},i);return Object.keys(a).forEach((function(e){o[e]=Kh(o[e],a[e])})),o},options:{}}}var Qh={};function Jh(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=al({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function Xh(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,a=e.stylesCreator,o=e.name;if(!i.disableGeneration){var s=sl.get(i.sheetsManager,a,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},sl.set(i.sheetsManager,a,r,s));var u=Xs({},a.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var c=i.sheetsRegistry;if(0===s.refs){var l;i.sheetsCache&&(l=sl.get(i.sheetsCache,a,r));var h=a.create(r,o);l||((l=i.jss.createStyleSheet(h,Xs({link:!1},u))).attach(),i.sheetsCache&&sl.set(i.sheetsCache,a,r,l)),c&&c.add(l),s.staticSheet=l,s.dynamicStyles=il(h)}if(s.dynamicStyles){var f=i.jss.createStyleSheet(s.dynamicStyles,Xs({link:!0},u));f.update(t),f.attach(),n.dynamicSheet=f,n.classes=al({baseClasses:s.staticSheet.classes,newClasses:f.classes}),c&&c.add(f)}else n.classes=s.staticSheet.classes;s.refs+=1}}function Zh(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function $h(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var a=sl.get(r.sheetsManager,i,n);a.refs-=1;var o=r.sheetsRegistry;0===a.refs&&(sl.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(a.staticSheet),o&&o.remove(a.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function ef(e,n){var r,i=t.useRef([]),a=t.useMemo((function(){return{}}),n);i.current!==a&&(i.current=a,r=e()),t.useEffect((function(){return function(){r&&r()}}),[a])}function tf(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,i=n.classNamePrefix,a=n.Component,o=n.defaultTheme,s=void 0===o?Qh:o,u=Vu(n,["name","classNamePrefix","Component","defaultTheme"]),c=Yh(e),l=r||i||"makeStyles";c.options={index:Hh(),name:r,meta:l,classNamePrefix:l};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=cl()||s,i=Xs({},t.useContext(zh),u),o=t.useRef(),l=t.useRef();ef((function(){var t={name:r,state:{},stylesCreator:c,stylesOptions:i,theme:n};return Xh(t,e),l.current=!1,o.current=t,function(){$h(t)}}),[n,c]),t.useEffect((function(){l.current&&Zh(o.current,e),l.current=!0}));var h=Jh(o.current,e.classes,a);return h};return h}function nf(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,a=t.props[n];for(i in a)void 0===r[i]&&(r[i]=a[i]);return r}var rf=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var i=n.defaultTheme,a=n.withTheme,o=void 0!==a&&a,s=n.name,u=Vu(n,["defaultTheme","withTheme","name"]);var c=s,l=tf(e,Xs({defaultTheme:i,Component:r,name:s||r.displayName,classNamePrefix:c},u)),h=t.forwardRef((function(e,n){e.classes;var a,u=e.innerRef,c=Vu(e,["classes","innerRef"]),h=l(Xs({},r.defaultProps,e)),f=c;return("string"===typeof s||o)&&(a=cl()||i,s&&(f=nf({theme:a,name:s,props:c})),o&&!f.theme&&(f.theme=a)),t.createElement(r,Xs({ref:u||n,classes:h},f))}));return Wu()(h,r),h}},af=["xs","sm","md","lg","xl"];function of(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,s=Vu(e,["values","unit","step"]);function u(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function c(e,t){var r=af.indexOf(t);return r===af.length-1?u(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[af[r+1]]?n[af[r+1]]:t)-o/100).concat(i,")")}return Xs({keys:af,values:n,up:u,down:function(e){var t=af.indexOf(e)+1,r=n[af[t]];return t===af.length?u("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-o/100).concat(i,")")},between:c,only:function(e){return c(e,e)},width:function(e){return n[e]}},s)}function sf(e,t,n){var r;return Xs({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),Xs({paddingLeft:t(2),paddingRight:t(2)},n,C({},e.up("sm"),Xs({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},C(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),C(r,e.up("sm"),{minHeight:64}),r)},n)}function uf(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var cf={black:"#000",white:"#fff"},lf={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},hf={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},ff={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},df={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},pf={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},vf={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},mf={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function yf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function gf(e){if(e.type)return e;if("#"===e.charAt(0))return gf(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(uf(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function kf(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function bf(e){var t="hsl"===(e=gf(e)).type?gf(function(e){var t=(e=gf(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),kf({type:s,values:u})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function wf(e,t){return e=gf(e),t=yf(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,kf(e)}function _f(e,t){if(e=gf(e),t=yf(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return kf(e)}function xf(e,t){if(e=gf(e),t=yf(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return kf(e)}var Tf={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:cf.white,default:lf[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Ef={text:{primary:cf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:lf[800],default:"#303030"},action:{active:cf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function If(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=xf(e.main,i):"dark"===t&&(e.dark=_f(e.main,a)))}function Sf(e){var t=e.primary,n=void 0===t?{light:hf[300],main:hf[500],dark:hf[700]}:t,r=e.secondary,i=void 0===r?{light:ff.A200,main:ff.A400,dark:ff.A700}:r,a=e.error,o=void 0===a?{light:df[300],main:df[500],dark:df[700]}:a,s=e.warning,u=void 0===s?{light:pf[300],main:pf[500],dark:pf[700]}:s,c=e.info,l=void 0===c?{light:vf[300],main:vf[500],dark:vf[700]}:c,h=e.success,f=void 0===h?{light:mf[300],main:mf[500],dark:mf[700]}:h,d=e.type,p=void 0===d?"light":d,v=e.contrastThreshold,m=void 0===v?3:v,y=e.tonalOffset,g=void 0===y?.2:y,k=Vu(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function b(e){var t=function(e,t){var n=bf(e),r=bf(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Ef.text.primary)>=m?Ef.text.primary:Tf.text.primary;return t}var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Xs({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(uf(4,t));if("string"!==typeof e.main)throw new Error(uf(5,JSON.stringify(e.main)));return If(e,"light",n,g),If(e,"dark",r,g),e.contrastText||(e.contrastText=b(e.main)),e},_={dark:Ef,light:Tf};return Kh(Xs({common:cf,type:p,primary:w(n),secondary:w(i,"A400","A200","A700"),error:w(o),warning:w(u),info:w(l),success:w(f),grey:lf,contrastThreshold:m,getContrastText:b,augmentColor:w,tonalOffset:g},_[p]),k)}function Cf(e){return Math.round(1e5*e)/1e5}function Nf(e){return Cf(e)}var Rf={textTransform:"uppercase"},Pf='"Roboto", "Helvetica", "Arial", sans-serif';function Af(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?Pf:r,a=n.fontSize,o=void 0===a?14:a,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,l=void 0===c?400:c,h=n.fontWeightMedium,f=void 0===h?500:h,d=n.fontWeightBold,p=void 0===d?700:d,v=n.htmlFontSize,m=void 0===v?16:v,y=n.allVariants,g=n.pxToRem,k=Vu(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var b=o/14,w=g||function(e){return"".concat(e/m*b,"rem")},_=function(e,t,n,r,a){return Xs({fontFamily:i,fontWeight:e,fontSize:w(t),lineHeight:n},i===Pf?{letterSpacing:"".concat(Cf(r/t),"em")}:{},a,y)},x={h1:_(u,96,1.167,-1.5),h2:_(u,60,1.2,-.5),h3:_(l,48,1.167,0),h4:_(l,34,1.235,.25),h5:_(l,24,1.334,0),h6:_(f,20,1.6,.15),subtitle1:_(l,16,1.75,.15),subtitle2:_(f,14,1.57,.1),body1:_(l,16,1.5,.15),body2:_(l,14,1.43,.15),button:_(f,14,1.75,.4,Rf),caption:_(l,12,1.66,.4),overline:_(l,12,2.66,1,Rf)};return Kh(Xs({htmlFontSize:m,pxToRem:w,round:Nf,fontFamily:i,fontSize:o,fontWeightLight:u,fontWeightRegular:l,fontWeightMedium:f,fontWeightBold:p},x),k,{clone:!1})}function Of(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var Df=["none",Of(0,2,1,-1,0,1,1,0,0,1,3,0),Of(0,3,1,-2,0,2,2,0,0,1,5,0),Of(0,3,3,-2,0,3,4,0,0,1,8,0),Of(0,2,4,-1,0,4,5,0,0,1,10,0),Of(0,3,5,-1,0,5,8,0,0,1,14,0),Of(0,3,5,-1,0,6,10,0,0,1,18,0),Of(0,4,5,-2,0,7,10,1,0,2,16,1),Of(0,5,5,-3,0,8,10,1,0,3,14,2),Of(0,5,6,-3,0,9,12,1,0,3,16,2),Of(0,6,6,-3,0,10,14,1,0,4,18,3),Of(0,6,7,-4,0,11,15,1,0,4,20,3),Of(0,7,8,-4,0,12,17,2,0,5,22,4),Of(0,7,8,-4,0,13,19,2,0,5,24,4),Of(0,7,9,-4,0,14,21,2,0,5,26,4),Of(0,8,9,-5,0,15,22,2,0,6,28,5),Of(0,8,10,-5,0,16,24,2,0,6,30,5),Of(0,8,11,-5,0,17,26,2,0,6,32,5),Of(0,9,11,-5,0,18,28,2,0,7,34,6),Of(0,9,12,-6,0,19,29,2,0,7,36,6),Of(0,10,13,-6,0,20,31,3,0,8,38,7),Of(0,10,13,-6,0,21,33,3,0,8,40,7),Of(0,10,14,-6,0,22,35,3,0,8,42,7),Of(0,11,14,-7,0,23,36,3,0,9,44,8),Of(0,11,15,-7,0,24,38,3,0,9,46,8)],Mf={borderRadius:4},Lf={xs:0,sm:600,md:960,lg:1280,xl:1920},Ff={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(Lf[e],"px)")}};var jf=function(e,t){return t?Kh(e,t,{clone:!1}):e};var Uf={m:"margin",p:"padding"},Vf={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},qf={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Bf=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!qf[e])return[e];e=qf[e]}var t=c(e.split(""),2),n=t[0],r=t[1],i=Uf[n],a=Vf[r]||"";return Array.isArray(a)?a.map((function(e){return i+e})):[i+a]})),zf=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function Wf(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function Hf(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function Gf(e){var t=Wf(e.theme);return Object.keys(e).map((function(n){if(-1===zf.indexOf(n))return null;var r=Hf(Bf(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||Ff;return t.reduce((function(e,i,a){return e[r.up(r.keys[a])]=n(t[a]),e}),{})}if("object"===y(t)){var i=e.theme.breakpoints||Ff;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(jf,{})}Gf.propTypes={},Gf.filterProps=zf;function Kf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Wf({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var Yf={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Qf={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Jf(e){return"".concat(Math.round(e),"ms")}var Xf={easing:Yf,duration:Qf,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?Qf.standard:n,i=t.easing,a=void 0===i?Yf.easeInOut:i,o=t.delay,s=void 0===o?0:o;Vu(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:Jf(r)," ").concat(a," ").concat("string"===typeof s?s:Jf(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Zf={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function $f(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,a=e.palette,o=void 0===a?{}:a,s=e.spacing,u=e.typography,c=void 0===u?{}:u,l=Vu(e,["breakpoints","mixins","palette","spacing","typography"]),h=Sf(o),f=of(n),d=Kf(s),p=Kh({breakpoints:f,direction:"ltr",mixins:sf(f,d,i),overrides:{},palette:h,props:{},shadows:Df,typography:Af(h,c),spacing:d,shape:Mf,transitions:Xf,zIndex:Zf},l),v=arguments.length,m=new Array(v>1?v-1:0),y=1;y<v;y++)m[y-1]=arguments[y];return p=m.reduce((function(e,t){return Kh(e,t)}),p)}var ed=$f();var td=function(e,t){return rf(e,Xs({defaultTheme:ed},t))};function nd(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function rd(e,n){return t.useMemo((function(){return null==e&&null==n?null:function(t){nd(e,t),nd(n,t)}}),[e,n])}var id="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function ad(e){var n=t.useRef(e);return id((function(){n.current=e})),t.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}var od=!0,sd=!1,ud=null,cd={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ld(e){e.metaKey||e.altKey||e.ctrlKey||(od=!0)}function hd(){od=!1}function fd(){"hidden"===this.visibilityState&&sd&&(od=!0)}function dd(e){var t=e.target;try{return t.matches(":focus-visible")}catch(rA){}return od||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!cd[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function pd(){sd=!0,window.clearTimeout(ud),ud=window.setTimeout((function(){sd=!1}),100)}function vd(){return{isFocusVisible:dd,onBlurVisible:pd,ref:t.useCallback((function(e){var t,n=i.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",ld,!0),t.addEventListener("mousedown",hd,!0),t.addEventListener("pointerdown",hd,!0),t.addEventListener("touchstart",hd,!0),t.addEventListener("visibilitychange",fd,!0))}),[])}}var md=t.createContext(null);function yd(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function gd(e,t,n){return null!=n[t]?n[t]:e.props[t]}function kd(e,n,r){var i=yd(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,t.isValidElement)(s)){var u=o in n,c=o in i,l=n[o],h=(0,t.isValidElement)(l)&&!l.props.in;!c||u&&!h?c||!u||h?c&&u&&(0,t.isValidElement)(l)&&(a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:l.props.in,exit:gd(s,"exit",e),enter:gd(s,"enter",e)})):a[o]=(0,t.cloneElement)(s,{in:!1}):a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:gd(s,"exit",e),enter:gd(s,"enter",e)})}})),a}var bd=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},wd=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(d(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Ku(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,yd(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:gd(e,"appear",r),enter:gd(e,"enter",r),exit:gd(e,"exit",r)})}))):kd(e,a,o),firstRender:!1}},r.handleExited=function(e,t){var n=yd(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Xs({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=Uu(e,["component","childFactory"]),a=this.state.contextValue,o=bd(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(md.Provider,{value:a},o):t.createElement(md.Provider,{value:a},t.createElement(n,i,o))},n}(t.Component);wd.propTypes={},wd.defaultProps={component:"div",childFactory:function(e){return e}};var _d=wd,xd="undefined"===typeof window?t.useEffect:t.useLayoutEffect;var Td=function(e){var n=e.classes,r=e.pulsate,i=void 0!==r&&r,a=e.rippleX,o=e.rippleY,s=e.rippleSize,u=e.in,c=e.onExited,l=void 0===c?function(){}:c,h=e.timeout,f=t.useState(!1),d=f[0],p=f[1],v=Bu(n.ripple,n.rippleVisible,i&&n.ripplePulsate),m={width:s,height:s,top:-s/2+o,left:-s/2+a},y=Bu(n.child,d&&n.childLeaving,i&&n.childPulsate),g=ad(l);return xd((function(){if(!u){p(!0);var e=setTimeout(g,h);return function(){clearTimeout(e)}}}),[g,u,h]),t.createElement("span",{className:v,style:m},t.createElement("span",{className:y}))},Ed=t.forwardRef((function(e,n){var r=e.center,i=void 0!==r&&r,a=e.classes,o=e.className,s=Vu(e,["center","classes","className"]),u=t.useState([]),c=u[0],l=u[1],h=t.useRef(0),f=t.useRef(null);t.useEffect((function(){f.current&&(f.current(),f.current=null)}),[c]);var d=t.useRef(!1),p=t.useRef(null),v=t.useRef(null),m=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(p.current)}}),[]);var y=t.useCallback((function(e){var n=e.pulsate,r=e.rippleX,i=e.rippleY,o=e.rippleSize,s=e.cb;l((function(e){return[].concat(S(e),[t.createElement(Td,{key:h.current,classes:a,timeout:550,pulsate:n,rippleX:r,rippleY:i,rippleSize:o})])})),h.current+=1,f.current=s}),[a]),g=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,a=void 0!==r&&r,o=t.center,s=void 0===o?i||t.pulsate:o,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===e.type&&d.current)d.current=!1;else{"touchstart"===e.type&&(d.current=!0);var l,h,f,g=c?null:m.current,k=g?g.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(k.width/2),h=Math.round(k.height/2);else{var b=e.touches?e.touches[0]:e,w=b.clientX,_=b.clientY;l=Math.round(w-k.left),h=Math.round(_-k.top)}if(s)(f=Math.sqrt((2*Math.pow(k.width,2)+Math.pow(k.height,2))/3))%2===0&&(f+=1);else{var x=2*Math.max(Math.abs((g?g.clientWidth:0)-l),l)+2,T=2*Math.max(Math.abs((g?g.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(x,2)+Math.pow(T,2))}e.touches?null===v.current&&(v.current=function(){y({pulsate:a,rippleX:l,rippleY:h,rippleSize:f,cb:n})},p.current=setTimeout((function(){v.current&&(v.current(),v.current=null)}),80)):y({pulsate:a,rippleX:l,rippleY:h,rippleSize:f,cb:n})}}),[i,y]),k=t.useCallback((function(){g({},{pulsate:!0})}),[g]),b=t.useCallback((function(e,t){if(clearTimeout(p.current),"touchend"===e.type&&v.current)return e.persist(),v.current(),v.current=null,void(p.current=setTimeout((function(){b(e,t)})));v.current=null,l((function(e){return e.length>0?e.slice(1):e})),f.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:k,start:g,stop:b}}),[k,g,b]),t.createElement("span",Xs({className:Bu(a.root,o),ref:m},s),t.createElement(_d,{component:null,exit:!0},c))})),Id=td((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(t.memo(Ed)),Sd=t.forwardRef((function(e,n){var r=e.action,a=e.buttonRef,o=e.centerRipple,s=void 0!==o&&o,u=e.children,c=e.classes,l=e.className,h=e.component,f=void 0===h?"button":h,d=e.disabled,p=void 0!==d&&d,v=e.disableRipple,m=void 0!==v&&v,y=e.disableTouchRipple,g=void 0!==y&&y,k=e.focusRipple,b=void 0!==k&&k,w=e.focusVisibleClassName,_=e.onBlur,x=e.onClick,T=e.onFocus,E=e.onFocusVisible,I=e.onKeyDown,S=e.onKeyUp,C=e.onMouseDown,N=e.onMouseLeave,R=e.onMouseUp,P=e.onTouchEnd,A=e.onTouchMove,O=e.onTouchStart,D=e.onDragLeave,M=e.tabIndex,L=void 0===M?0:M,F=e.TouchRippleProps,j=e.type,U=void 0===j?"button":j,V=Vu(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),q=t.useRef(null);var B=t.useRef(null),z=t.useState(!1),W=z[0],H=z[1];p&&W&&H(!1);var G=vd(),K=G.isFocusVisible,Y=G.onBlurVisible,Q=G.ref;function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return ad((function(r){return t&&t(r),!n&&B.current&&B.current[e](r),!0}))}t.useImperativeHandle(r,(function(){return{focusVisible:function(){H(!0),q.current.focus()}}}),[]),t.useEffect((function(){W&&b&&!m&&B.current.pulsate()}),[m,b,W]);var X=J("start",C),Z=J("stop",D),$=J("stop",R),ee=J("stop",(function(e){W&&e.preventDefault(),N&&N(e)})),te=J("start",O),ne=J("stop",P),re=J("stop",A),ie=J("stop",(function(e){W&&(Y(e),H(!1)),_&&_(e)}),!1),ae=ad((function(e){q.current||(q.current=e.currentTarget),K(e)&&(H(!0),E&&E(e)),T&&T(e)})),oe=function(){var e=i.findDOMNode(q.current);return f&&"button"!==f&&!("A"===e.tagName&&e.href)},se=t.useRef(!1),ue=ad((function(e){b&&!se.current&&W&&B.current&&" "===e.key&&(se.current=!0,e.persist(),B.current.stop(e,(function(){B.current.start(e)}))),e.target===e.currentTarget&&oe()&&" "===e.key&&e.preventDefault(),I&&I(e),e.target===e.currentTarget&&oe()&&"Enter"===e.key&&!p&&(e.preventDefault(),x&&x(e))})),ce=ad((function(e){b&&" "===e.key&&B.current&&W&&!e.defaultPrevented&&(se.current=!1,e.persist(),B.current.stop(e,(function(){B.current.pulsate(e)}))),S&&S(e),x&&e.target===e.currentTarget&&oe()&&" "===e.key&&!e.defaultPrevented&&x(e)})),le=f;"button"===le&&V.href&&(le="a");var he={};"button"===le?(he.type=U,he.disabled=p):("a"===le&&V.href||(he.role="button"),he["aria-disabled"]=p);var fe=rd(a,n),de=rd(Q,q),pe=rd(fe,de),ve=t.useState(!1),me=ve[0],ye=ve[1];t.useEffect((function(){ye(!0)}),[]);var ge=me&&!m&&!p;return t.createElement(le,Xs({className:Bu(c.root,l,W&&[c.focusVisible,w],p&&c.disabled),onBlur:ie,onClick:x,onFocus:ae,onKeyDown:ue,onKeyUp:ce,onMouseDown:X,onMouseLeave:ee,onMouseUp:$,onDragLeave:Z,onTouchEnd:ne,onTouchMove:re,onTouchStart:te,ref:pe,tabIndex:p?-1:L},he,V),u,ge?t.createElement(Id,Xs({ref:B,center:s},F)):null)})),Cd=td({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(Sd);function Nd(e){if("string"!==typeof e)throw new Error(uf(7));return e.charAt(0).toUpperCase()+e.slice(1)}var Rd=t.forwardRef((function(e,n){var r=e.children,i=e.classes,a=e.className,o=e.color,s=void 0===o?"default":o,u=e.component,c=void 0===u?"button":u,l=e.disabled,h=void 0!==l&&l,f=e.disableElevation,d=void 0!==f&&f,p=e.disableFocusRipple,v=void 0!==p&&p,m=e.endIcon,y=e.focusVisibleClassName,g=e.fullWidth,k=void 0!==g&&g,b=e.size,w=void 0===b?"medium":b,_=e.startIcon,x=e.type,T=void 0===x?"button":x,E=e.variant,I=void 0===E?"text":E,S=Vu(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),C=_&&t.createElement("span",{className:Bu(i.startIcon,i["iconSize".concat(Nd(w))])},_),N=m&&t.createElement("span",{className:Bu(i.endIcon,i["iconSize".concat(Nd(w))])},m);return t.createElement(Cd,Xs({className:Bu(i.root,i[I],a,"inherit"===s?i.colorInherit:"default"!==s&&i["".concat(I).concat(Nd(s))],"medium"!==w&&[i["".concat(I,"Size").concat(Nd(w))],i["size".concat(Nd(w))]],d&&i.disableElevation,h&&i.disabled,k&&i.fullWidth),component:c,disabled:h,focusRipple:!v,focusVisibleClassName:Bu(i.focusVisible,y),ref:n,type:T},S),t.createElement("span",{className:i.label},C,r,N))})),Pd=td((function(e){return{root:Xs({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:wf(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:wf(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:wf(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(wf(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:wf(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(wf(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:wf(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(Rd),Ad=function(){var e=c((0,t.useState)(""),2),n=e[0],r=e[1],i=0,a="Lorem ipsum typing effect!";function o(){i<a.length&&(r(n+=a.charAt(i)),i++,setTimeout(o,100))}return(0,t.useEffect)((function(){var e=setTimeout(o,100);return function(){return clearTimeout(e)}}),[]),(0,Qs.jsxs)("header",{children:[(0,Qs.jsx)("img",{className:"header_img",src:ju,alt:""}),(0,Qs.jsxs)("div",{className:"sidebar-right",children:[(0,Qs.jsx)("h2",{"data-text":"MyTaxi..",children:"MyTaxi..."}),(0,Qs.jsx)("p",{children:n}),(0,Qs.jsx)("div",{className:"line"}),(0,Qs.jsx)("h1",{children:"Quyidagilardan birini tanlang: \ud83d\udc47"}),(0,Qs.jsxs)("div",{className:"isDriver",children:[(0,Qs.jsx)(Fu,{to:"ha",className:"btn-link",children:(0,Qs.jsx)(Pd,{variant:"outlined",style:{backgroundColor:"rgb(41, 207, 41, 0.2)"},children:"Haydovchiman"})}),(0,Qs.jsx)(Fu,{to:"ha",className:"btn-link",children:(0,Qs.jsx)(Pd,{variant:"outlined",style:{backgroundColor:"rgba(255, 0, 0, 0.623)"},children:"Yo'lovchiman"})})]})]})]})},Od=n(962),Dd=n(883);function Md(){return Md=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Md.apply(this,arguments)}function Ld(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Fd(e){return"number"===typeof e&&!isNaN(e)}function jd(e){return"boolean"===typeof e}function Ud(e){return"string"===typeof e}function Vd(e){return"function"===typeof e}function qd(e){return Ud(e)||Vd(e)?e:null}function Bd(e){return 0===e||e}var zd=!("undefined"===typeof window||!window.document||!window.document.createElement);function Wd(e){return(0,t.isValidElement)(e)||Ud(e)||Vd(e)||Fd(e)}var Hd={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Gd={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function Kd(e){var n=e.enter,r=e.exit,i=e.appendPosition,a=void 0!==i&&i,o=e.collapse,s=void 0===o||o,u=e.collapseDuration,c=void 0===u?300:u;return function(e){var i=e.children,o=e.position,u=e.preventExitTransition,l=e.done,h=e.nodeRef,f=e.isIn,d=a?n+"--"+o:n,p=a?r+"--"+o:r,v=(0,t.useRef)(),m=(0,t.useRef)(0);function y(e){if(e.target===h.current){var t=h.current;t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",y),t.removeEventListener("animationcancel",y),0===m.current&&(t.className=v.current)}}function g(){var e=h.current;e.removeEventListener("animationend",g),s?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all "+n+"ms",requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,l,c):l()}return(0,t.useLayoutEffect)((function(){!function(){var e=h.current;v.current=e.className,e.className+=" "+d,e.addEventListener("animationend",y),e.addEventListener("animationcancel",y)}()}),[]),(0,t.useEffect)((function(){f||(u?g():function(){m.current=1;var e=h.current;e.className+=" "+p,e.addEventListener("animationend",g)}())}),[f]),t.createElement(t.Fragment,null,i)}}var Yd={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.list.has(e)&&this.list.get(e).forEach((function(n){var i=setTimeout((function(){n.apply(void 0,r)}),0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(i)}))}},Qd=["delay","staleId"];function Jd(e){var n=(0,t.useReducer)((function(e){return e+1}),0),r=n[1],i=(0,t.useState)([]),a=i[0],o=i[1],s=(0,t.useRef)(null),u=(0,t.useRef)(new Map).current,c=function(e){return-1!==a.indexOf(e)},l=(0,t.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:c,getToast:function(e){return u.get(e)}}).current;function h(e){var t=e.containerId;!l.props.limit||t&&l.containerId!==t||(l.count-=l.queue.length,l.queue=[])}function f(e){o((function(t){return Bd(e)?t.filter((function(t){return t!==e})):[]}))}function d(){var e=l.queue.shift();v(e.toastContent,e.toastProps,e.staleId)}function p(e,n){var i=n.delay,a=n.staleId,o=Ld(n,Qd);if(Wd(e)&&!function(e){return!s.current||l.props.enableMultiContainer&&e.containerId!==l.props.containerId||u.has(e.toastId)&&null==e.updateId}(o)){var c=o.toastId,h=o.updateId,p=o.data,m=l.props,y=function(){return f(c)},g=null==h;g&&l.count++;var k,b,w={toastId:c,updateId:h,isLoading:o.isLoading,theme:o.theme||m.theme,icon:null!=o.icon?o.icon:m.icon,isIn:!1,key:o.key||l.toastKey++,type:o.type,closeToast:y,closeButton:o.closeButton,rtl:m.rtl,position:o.position||m.position,transition:o.transition||m.transition,className:qd(o.className||m.toastClassName),bodyClassName:qd(o.bodyClassName||m.bodyClassName),style:o.style||m.toastStyle,bodyStyle:o.bodyStyle||m.bodyStyle,onClick:o.onClick||m.onClick,pauseOnHover:jd(o.pauseOnHover)?o.pauseOnHover:m.pauseOnHover,pauseOnFocusLoss:jd(o.pauseOnFocusLoss)?o.pauseOnFocusLoss:m.pauseOnFocusLoss,draggable:jd(o.draggable)?o.draggable:m.draggable,draggablePercent:o.draggablePercent||m.draggablePercent,draggableDirection:o.draggableDirection||m.draggableDirection,closeOnClick:jd(o.closeOnClick)?o.closeOnClick:m.closeOnClick,progressClassName:qd(o.progressClassName||m.progressClassName),progressStyle:o.progressStyle||m.progressStyle,autoClose:!o.isLoading&&(k=o.autoClose,b=m.autoClose,!1===k||Fd(k)&&k>0?k:b),hideProgressBar:jd(o.hideProgressBar)?o.hideProgressBar:m.hideProgressBar,progress:o.progress,role:o.role||m.role,deleteToast:function(){u.delete(c);var e=l.queue.length;if(l.count=Bd(c)?l.count-1:l.count-l.displayedToast,l.count<0&&(l.count=0),e>0){var t=Bd(c)?1:l.props.limit;if(1===e||1===t)l.displayedToast++,d();else{var n=t>e?e:t;l.displayedToast=n;for(var i=0;i<n;i++)d()}}else r()}};Vd(o.onOpen)&&(w.onOpen=o.onOpen),Vd(o.onClose)&&(w.onClose=o.onClose),w.closeButton=m.closeButton,!1===o.closeButton||Wd(o.closeButton)?w.closeButton=o.closeButton:!0===o.closeButton&&(w.closeButton=!Wd(m.closeButton)||m.closeButton);var _=e;(0,t.isValidElement)(e)&&!Ud(e.type)?_=(0,t.cloneElement)(e,{closeToast:y,toastProps:w,data:p}):Vd(e)&&(_=e({closeToast:y,toastProps:w,data:p})),m.limit&&m.limit>0&&l.count>m.limit&&g?l.queue.push({toastContent:_,toastProps:w,staleId:a}):Fd(i)&&i>0?setTimeout((function(){v(_,w,a)}),i):v(_,w,a)}}function v(e,t,n){var r=t.toastId;n&&u.delete(n),u.set(r,{content:e,props:t}),o((function(e){return[].concat(e,[r]).filter((function(e){return e!==n}))}))}return(0,t.useEffect)((function(){return l.containerId=e.containerId,Yd.cancelEmit(3).on(0,p).on(1,(function(e){return s.current&&f(e)})).on(5,h).emit(2,l),function(){return Yd.emit(3,l)}}),[]),(0,t.useEffect)((function(){l.isToastActive=c,l.displayedToast=a.length,Yd.emit(4,a.length,e.containerId)}),[a]),(0,t.useEffect)((function(){l.props=e})),{getToastToRender:function(t){var n=new Map,r=Array.from(u.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:s,isToastActive:c}}function Xd(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Zd(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function $d(e){var n=(0,t.useState)(!1),r=n[0],i=n[1],a=(0,t.useState)(!1),o=a[0],s=a[1],u=(0,t.useRef)(null),c=(0,t.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=(0,t.useRef)(e),h=e.autoClose,f=e.pauseOnHover,d=e.closeToast,p=e.onClick,v=e.closeOnClick;function m(t){if(e.draggable){c.didMove=!1,document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),document.addEventListener("touchmove",b),document.addEventListener("touchend",w);var n=u.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=n.getBoundingClientRect(),n.style.transition="",c.x=Xd(t.nativeEvent),c.y=Zd(t.nativeEvent),"x"===e.draggableDirection?(c.start=c.x,c.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function y(){if(c.boundingRect){var t=c.boundingRect,n=t.top,r=t.bottom,i=t.left,a=t.right;e.pauseOnHover&&c.x>=i&&c.x<=a&&c.y>=n&&c.y<=r?k():g()}}function g(){i(!0)}function k(){i(!1)}function b(t){var n=u.current;c.canDrag&&n&&(c.didMove=!0,r&&k(),c.x=Xd(t),c.y=Zd(t),"x"===e.draggableDirection?c.delta=c.x-c.start:c.delta=c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),n.style.transform="translate"+e.draggableDirection+"("+c.delta+"px)",n.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance)))}function w(){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",w);var t=u.current;if(c.canDrag&&c.didMove&&t){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return s(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,t.useEffect)((function(){l.current=e})),(0,t.useEffect)((function(){return u.current&&u.current.addEventListener("d",g,{once:!0}),Vd(e.onOpen)&&e.onOpen((0,t.isValidElement)(e.children)&&e.children.props),function(){var e=l.current;Vd(e.onClose)&&e.onClose((0,t.isValidElement)(e.children)&&e.children.props)}}),[]),(0,t.useEffect)((function(){return e.pauseOnFocusLoss&&function(){document.hasFocus()||k();window.addEventListener("focus",g),window.addEventListener("blur",k)}(),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",k))}}),[e.pauseOnFocusLoss]);var _={onMouseDown:m,onTouchStart:m,onMouseUp:y,onTouchEnd:y};return h&&f&&(_.onMouseEnter=k,_.onMouseLeave=g),v&&(_.onClick=function(e){p&&p(e),c.canCloseOnClick&&d()}),{playToast:g,pauseToast:k,isRunning:r,preventExitTransition:o,toastRef:u,eventHandlers:_}}function ep(e){var n=e.closeToast,r=e.theme,i=e.ariaLabel,a=void 0===i?"close":i;return(0,t.createElement)("button",{className:"Toastify__close-button Toastify__close-button--"+r,type:"button",onClick:function(e){e.stopPropagation(),n(e)},"aria-label":a},(0,t.createElement)("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},(0,t.createElement)("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function tp(e){var n,r,i=e.delay,a=e.isRunning,o=e.closeToast,s=e.type,u=e.hide,c=e.className,l=e.style,h=e.controlledProgress,f=e.progress,d=e.rtl,p=e.isIn,v=e.theme,m=Md({},l,{animationDuration:i+"ms",animationPlayState:a?"running":"paused",opacity:u?0:1});h&&(m.transform="scaleX("+f+")");var y=Bu("Toastify__progress-bar",h?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+v,"Toastify__progress-bar--"+s,((n={})["Toastify__progress-bar--rtl"]=d,n)),g=Vd(c)?c({rtl:d,type:s,defaultClassName:y}):Bu(y,c),k=((r={})[h&&f>=1?"onTransitionEnd":"onAnimationEnd"]=h&&f<1?null:function(){p&&o()},r);return(0,t.createElement)("div",Object.assign({role:"progressbar","aria-hidden":u?"true":"false","aria-label":"notification timer",className:g,style:m},k))}tp.defaultProps={type:Gd.DEFAULT,hide:!1};var np=["theme","type"],rp=function(e){var n=e.theme,r=e.type,i=Ld(e,np);return(0,t.createElement)("svg",Object.assign({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-"+r+")"},i))};var ip={info:function(e){return(0,t.createElement)(rp,Object.assign({},e),(0,t.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return(0,t.createElement)(rp,Object.assign({},e),(0,t.createElement)("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return(0,t.createElement)(rp,Object.assign({},e),(0,t.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return(0,t.createElement)(rp,Object.assign({},e),(0,t.createElement)("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return(0,t.createElement)("div",{className:"Toastify__spinner"})}},ap=function(e){var n,r,i=$d(e),a=i.isRunning,o=i.preventExitTransition,s=i.toastRef,u=i.eventHandlers,c=e.closeButton,l=e.children,h=e.autoClose,f=e.onClick,d=e.type,p=e.hideProgressBar,v=e.closeToast,m=e.transition,y=e.position,g=e.className,k=e.style,b=e.bodyClassName,w=e.bodyStyle,_=e.progressClassName,x=e.progressStyle,T=e.updateId,E=e.role,I=e.progress,S=e.rtl,C=e.toastId,N=e.deleteToast,R=e.isIn,P=e.isLoading,A=e.icon,O=e.theme,D=Bu("Toastify__toast","Toastify__toast-theme--"+O,"Toastify__toast--"+d,((n={})["Toastify__toast--rtl"]=S,n)),M=Vd(g)?g({rtl:S,position:y,type:d,defaultClassName:D}):Bu(D,g),L=!!I,F=ip[d],j={theme:O,type:d},U=F&&F(j);return!1===A?U=void 0:Vd(A)?U=A(j):(0,t.isValidElement)(A)?U=(0,t.cloneElement)(A,j):Ud(A)?U=A:P&&(U=ip.spinner()),(0,t.createElement)(m,{isIn:R,done:N,position:y,preventExitTransition:o,nodeRef:s},(0,t.createElement)("div",Object.assign({id:C,onClick:f,className:M},u,{style:k,ref:s}),(0,t.createElement)("div",Object.assign({},R&&{role:E},{className:Vd(b)?b({type:d}):Bu("Toastify__toast-body",b),style:w}),U&&(0,t.createElement)("div",{className:Bu("Toastify__toast-icon",(r={},r["Toastify--animate-icon Toastify__zoom-enter"]=!P,r))},U),(0,t.createElement)("div",null,l)),function(e){if(e){var n={closeToast:v,type:d,theme:O};return Vd(e)?e(n):(0,t.isValidElement)(e)?(0,t.cloneElement)(e,n):void 0}}(c),(h||L)&&(0,t.createElement)(tp,Object.assign({},T&&!L?{key:"pb-"+T}:{},{rtl:S,theme:O,delay:h,isRunning:a,isIn:R,closeToast:v,hide:p,type:d,style:x,className:_,controlledProgress:L,progress:I}))))},op=Kd({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),sp=function(e){var n=Jd(e),r=n.getToastToRender,i=n.containerRef,a=n.isToastActive,o=e.className,s=e.style,u=e.rtl,c=e.containerId;function l(e){var t,n=Bu("Toastify__toast-container","Toastify__toast-container--"+e,((t={})["Toastify__toast-container--rtl"]=u,t));return Vd(o)?o({position:e,rtl:u,defaultClassName:n}):Bu(n,qd(o))}return(0,t.createElement)("div",{ref:i,className:"Toastify",id:c},r((function(e,n){var r=n.length?Md({},s):Md({},s,{pointerEvents:"none"});return(0,t.createElement)("div",{className:l(e),style:r,key:"container-"+e},n.map((function(e){var n=e.content,r=e.props;return(0,t.createElement)(ap,Object.assign({},r,{isIn:a(r.toastId),key:"toast-"+r.key,closeButton:!0===r.closeButton?ep:r.closeButton}),n)})))})))};sp.defaultProps={position:Hd.TOP_RIGHT,transition:op,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:ep,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var up,cp,lp,hp=new Map,fp=[],dp=!1;function pp(){return Math.random().toString(36).substring(2,9)}function vp(e){return e&&(Ud(e.toastId)||Fd(e.toastId))?e.toastId:pp()}function mp(e,n){return hp.size>0?Yd.emit(0,e,n):(fp.push({content:e,options:n}),dp&&zd&&(dp=!1,cp=document.createElement("div"),document.body.appendChild(cp),(0,i.render)((0,t.createElement)(sp,Object.assign({},lp)),cp))),n.toastId}function yp(e,t){return Md({},t,{type:t&&t.type||e,toastId:vp(t)})}function gp(e){return function(t,n){return mp(t,yp(e,n))}}function kp(e,t){return mp(e,yp(Gd.DEFAULT,t))}kp.loading=function(e,t){return mp(e,yp(Gd.DEFAULT,Md({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},kp.promise=function(e,t,n){var r,i=t.pending,a=t.error,o=t.success;i&&(r=Ud(i)?kp.loading(i,n):kp.loading(i.render,Md({},n,i)));var s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=function(e,t,i){if(null!=t){var a=Md({type:e},s,n,{data:i}),o=Ud(t)?{render:t}:t;return r?kp.update(r,Md({},a,o)):kp(o.render,Md({},a,o)),i}kp.dismiss(r)},c=Vd(e)?e():e;return c.then((function(e){return u("success",o,e)})).catch((function(e){return u("error",a,e)})),c},kp.success=gp(Gd.SUCCESS),kp.info=gp(Gd.INFO),kp.error=gp(Gd.ERROR),kp.warning=gp(Gd.WARNING),kp.warn=kp.warning,kp.dark=function(e,t){return mp(e,yp(Gd.DEFAULT,Md({theme:"dark"},t)))},kp.dismiss=function(e){return Yd.emit(1,e)},kp.clearWaitingQueue=function(e){return void 0===e&&(e={}),Yd.emit(5,e)},kp.isActive=function(e){var t=!1;return hp.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},kp.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=hp.get(n||up);return r?r.getToast(e):null}(e,t);if(n){var r=n.props,i=n.content,a=Md({},r,t,{toastId:t.toastId||e,updateId:pp()});a.toastId!==e&&(a.staleId=e);var o=a.render||i;delete a.render,mp(o,a)}}),0)},kp.done=function(e){kp.update(e,{progress:1})},kp.onChange=function(e){return Vd(e)&&Yd.on(4,e),function(){Vd(e)&&Yd.off(4,e)}},kp.configure=function(e){void 0===e&&(e={}),dp=!0,lp=e},kp.POSITION=Hd,kp.TYPE=Gd,Yd.on(2,(function(e){up=e.containerId||e,hp.set(up,e),fp.forEach((function(e){Yd.emit(0,e.content,e.options)})),fp=[]})).on(3,(function(e){hp.delete(e.containerId||e),0===hp.size&&Yd.off(0).off(1).off(5),zd&&cp&&document.body.removeChild(cp)}));var bp={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wp=t.createContext&&t.createContext(bp),_p=function(){return _p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_p.apply(this,arguments)},xp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Tp(e){return e&&e.map((function(e,n){return t.createElement(e.tag,_p({key:n},e.attr),Tp(e.child))}))}function Ep(e){return function(n){return t.createElement(Ip,_p({attr:_p({},e.attr)},n),Tp(e.child))}}function Ip(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,s=xp(e,["attr","size","title"]),u=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",_p({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:_p(_p({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==wp?t.createElement(wp.Consumer,null,(function(e){return n(e)})):n(bp)}function Sp(e){return Ep({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"}}]})(e)}var Cp=function(){var e=c((0,t.useState)(!1),2),n=(e[0],e[1]),r=(0,t.useContext)(aB).auth,i=c(Ys(r),1)[0],a=c((0,t.useState)(!1),2),o=a[0],s=a[1],u=function(){window.scrollY>=66?n(!0):n(!1)};(0,t.useEffect)((function(){u(),window.addEventListener("scroll",u)}));return(0,Qs.jsxs)("nav",{className:o?"navbar navbar-expand-lg fixed-top bg-dark":"navbar navbar-expand-lg fixed-top toggle",children:[(0,Qs.jsx)(sp,{}),(0,Qs.jsxs)("div",{className:"container-fluid",children:[(0,Qs.jsx)("button",{className:"navbar-toggler text-white",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation",onClick:function(){s(!o)},children:(0,Qs.jsx)(Sp,{})}),(0,Qs.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01",children:[(0,Qs.jsx)("a",{className:"navbar-brand",href:"#",children:(0,Qs.jsx)("img",{src:Od,alt:"Taxi logo",width:"40px"})}),(0,Qs.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[(0,Qs.jsx)("li",{className:"nav-item",children:(0,Qs.jsx)(Fu,{className:"nav-link",to:"",children:"Home"})}),(0,Qs.jsx)("li",{className:"nav-item",children:(0,Qs.jsx)(Fu,{className:"nav-link",to:"main",children:"Asosiy"})}),(0,Qs.jsx)("li",{className:"nav-item",children:(0,Qs.jsx)(Fu,{to:"profile",className:i?"nav-link":"nav-link disabled",href:"#",tabIndex:"-1","aria-disabled":"true",children:i?"Profile":"Disabled"})}),(0,Qs.jsx)("li",{className:i?"nav-item bg-danger rounded":"nav-item bg-success rounded",style:{position:"absolute",right:"100px",top:"15px"},children:i?(0,Qs.jsx)("a",{className:"nav-link",onClick:function(){(function(e){return Ie(e).signOut()})(r).then((function(){kp.success("Logged out successfully")})).catch((function(e){kp.error("Opps, something went wrong, please try again")}))},children:"Chiqish"}):(0,Qs.jsx)(Fu,{className:"nav-link",to:"login",children:"Kirish / Ro'yxatdan o'tish"})})]}),(0,Qs.jsxs)("div",{className:"profile",children:[(0,Qs.jsx)(Fu,{to:"profile",children:(0,Qs.jsx)("img",{src:null!==i&&void 0!==i&&i.photoURL?i.photoURL:Dd,alt:"avatar",style:{position:"absolute",right:"20px",top:"10px",width:"40px",background:"#fff",border:"2px solid #fff",borderRadius:"50%",margin:"0 10px"}})}),(0,Qs.jsx)("span",{className:"tooltiptext",children:"Account"})]})]})]})]})},Np=n(666),Rp=n.n(Np);function Pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ap(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pp(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Op,Dp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Mp={},Lp=Lp||{},Fp=Dp||self;function jp(){}function Up(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Vp(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var qp="closure_uid_"+(1e9*Math.random()>>>0),Bp=0;function zp(e,t,n){return e.call.apply(e.bind,arguments)}function Wp(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Hp(e,t,n){return(Hp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zp:Wp).apply(null,arguments)}function Gp(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Kp(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Yp(){this.s=this.s,this.o=this.o}var Qp={};Yp.prototype.s=!1,Yp.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,qp)&&e[qp]||(e[qp]=++Bp)}(this);delete Qp[e]}},Yp.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Jp=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Xp=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Zp(e){return Array.prototype.concat.apply([],arguments)}function $p(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ev(e){return/^[\s\xa0]*$/.test(e)}var tv,nv=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function rv(e,t){return-1!=e.indexOf(t)}function iv(e,t){return e<t?-1:e>t?1:0}e:{var av=Fp.navigator;if(av){var ov=av.userAgent;if(ov){tv=ov;break e}}tv=""}function sv(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function uv(e){var t={};for(var n in e)t[n]=e[n];return t}var cv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lv(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<cv.length;a++)n=cv[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function hv(e){return hv[" "](e),e}hv[" "]=jp;var fv,dv=rv(tv,"Opera"),pv=rv(tv,"Trident")||rv(tv,"MSIE"),vv=rv(tv,"Edge"),mv=vv||pv,yv=rv(tv,"Gecko")&&!(rv(tv.toLowerCase(),"webkit")&&!rv(tv,"Edge"))&&!(rv(tv,"Trident")||rv(tv,"MSIE"))&&!rv(tv,"Edge"),gv=rv(tv.toLowerCase(),"webkit")&&!rv(tv,"Edge");function kv(){var e=Fp.document;return e?e.documentMode:void 0}e:{var bv="",wv=function(){var e=tv;return yv?/rv:([^\);]+)(\)|;)/.exec(e):vv?/Edge\/([\d\.]+)/.exec(e):pv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):gv?/WebKit\/(\S+)/.exec(e):dv?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(wv&&(bv=wv?wv[1]:""),pv){var _v=kv();if(null!=_v&&_v>parseFloat(bv)){fv=String(_v);break e}}fv=bv}var xv,Tv={};function Ev(){return function(e){var t=Tv;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=nv(String(fv)).split("."),n=nv("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=iv(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||iv(0==a[2].length,0==o[2].length)||iv(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Fp.document&&pv){var Iv=kv();xv=Iv||(parseInt(fv,10)||void 0)}else xv=void 0;var Sv=xv,Cv=function(){if(!Fp.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Fp.addEventListener("test",jp,t),Fp.removeEventListener("test",jp,t)}catch(n){}return e}();function Nv(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Rv(e,t){if(Nv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(yv){e:{try{hv(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Pv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Rv.Z.h.call(this)}}Nv.prototype.h=function(){this.defaultPrevented=!0},Kp(Rv,Nv);var Pv={2:"touch",3:"pen",4:"mouse"};Rv.prototype.h=function(){Rv.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Av="closure_listenable_"+(1e6*Math.random()|0),Ov=0;function Dv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ov,this.ca=this.fa=!1}function Mv(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Lv(e){this.src=e,this.g={},this.h=0}function Fv(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Jp(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Mv(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function jv(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Lv.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=jv(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Dv(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Uv="closure_lm_"+(1e6*Math.random()|0),Vv={};function qv(e,t,n,r,i){if(r&&r.once)return zv(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)qv(e,t[a],n,r,i);return null}return n=Jv(n),e&&e[Av]?e.N(t,n,Vp(r)?!!r.capture:!!r,i):Bv(e,t,n,!1,r,i)}function Bv(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Vp(i)?!!i.capture:!!i,s=Yv(e);if(s||(e[Uv]=s=new Lv(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Kv;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Cv||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Gv(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function zv(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)zv(e,t[a],n,r,i);return null}return n=Jv(n),e&&e[Av]?e.O(t,n,Vp(r)?!!r.capture:!!r,i):Bv(e,t,n,!0,r,i)}function Wv(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Wv(e,t[a],n,r,i);else r=Vp(r)?!!r.capture:!!r,n=Jv(n),e&&e[Av]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=jv(a=e.g[t],n,r,i))&&(Mv(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Yv(e))&&(t=e.g[t.toString()],e=-1,t&&(e=jv(t,n,r,i)),(n=-1<e?t[e]:null)&&Hv(n))}function Hv(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Av])Fv(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Gv(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Yv(t))?(Fv(n,e),0==n.h&&(n.src=null,t[Uv]=null)):Mv(e)}}}function Gv(e){return e in Vv?Vv[e]:Vv[e]="on"+e}function Kv(e,t){if(e.ca)e=!0;else{t=new Rv(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Hv(e),e=n.call(r,t)}return e}function Yv(e){return(e=e[Uv])instanceof Lv?e:null}var Qv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jv(e){return"function"===typeof e?e:(e[Qv]||(e[Qv]=function(t){return e.handleEvent(t)}),e[Qv])}function Xv(){Yp.call(this),this.i=new Lv(this),this.P=this,this.I=null}function Zv(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Nv(t,e);else if(t instanceof Nv)t.target=t.target||e;else{var i=t;lv(t=new Nv(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=$v(o,r,!0,t)&&i}if(i=$v(o=t.g=e,r,!0,t)&&i,i=$v(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=$v(o=t.g=n[a],r,!1,t)&&i}function $v(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&Fv(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Kp(Xv,Yp),Xv.prototype[Av]=!0,Xv.prototype.removeEventListener=function(e,t,n,r){Wv(this,e,t,n,r)},Xv.prototype.M=function(){if(Xv.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mv(n[r]);delete t.g[e],t.h--}}this.I=null},Xv.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Xv.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var em=Fp.JSON.stringify;function tm(){var e=cm,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var nm,rm=function(){function e(){x(this,e),this.h=this.g=null}return E(e,[{key:"add",value:function(e,t){var n=im.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),im=new(function(){function e(t,n){x(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return E(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new am}),(function(e){return e.reset()})),am=function(){function e(){x(this,e),this.next=this.g=this.h=null}return E(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function om(e){Fp.setTimeout((function(){throw e}),0)}function sm(e,t){nm||function(){var e=Fp.Promise.resolve(void 0);nm=function(){e.then(lm)}}(),um||(nm(),um=!0),cm.add(e,t)}var um=!1,cm=new rm;function lm(){for(var e;e=tm();){try{e.h.call(e.g)}catch(n){om(n)}var t=im;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}um=!1}function hm(e,t){Xv.call(this),this.h=e||1,this.g=t||Fp,this.j=Hp(this.kb,this),this.l=Date.now()}function fm(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function dm(e,t,n){if("function"===typeof e)n&&(e=Hp(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Hp(e.handleEvent,e)}return 2147483647<Number(t)?-1:Fp.setTimeout(e,t||0)}function pm(e){e.g=dm((function(){e.g=null,e.i&&(e.i=!1,pm(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Kp(hm,Xv),(Op=hm.prototype).da=!1,Op.S=null,Op.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zv(this,"tick"),this.da&&(fm(this),this.start()))}},Op.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Op.M=function(){hm.Z.M.call(this),fm(this),delete this.g};var vm=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return E(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:pm(this)}},{key:"M",value:function(){f(l(n.prototype),"M",this).call(this),this.g&&(Fp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Yp);function mm(e){Yp.call(this),this.h=e,this.g={}}Kp(mm,Yp);var ym=[];function gm(e,t,n,r){Array.isArray(n)||(n&&(ym[0]=n.toString()),n=ym);for(var i=0;i<n.length;i++){var a=qv(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function km(e){sv(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Hv(e)}),e),e.g={}}function bm(){this.g=!0}function wm(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return em(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}mm.prototype.M=function(){mm.Z.M.call(this),km(this)},mm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bm.prototype.Aa=function(){this.g=!1},bm.prototype.info=function(){};var _m={},xm=null;function Tm(){return xm=xm||new Xv}function Em(e){Nv.call(this,_m.Ma,e)}function Im(e){var t=Tm();Zv(t,new Em(t,e))}function Sm(e,t){Nv.call(this,_m.STAT_EVENT,e),this.stat=t}function Cm(e){var t=Tm();Zv(t,new Sm(t,e))}function Nm(e,t){Nv.call(this,_m.Na,e),this.size=t}function Rm(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Fp.setTimeout((function(){e()}),t)}_m.Ma="serverreachability",Kp(Em,Nv),_m.STAT_EVENT="statevent",Kp(Sm,Nv),_m.Na="timingevent",Kp(Nm,Nv);var Pm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Am={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Om(){}function Dm(e){return e.h||(e.h=e.i())}function Mm(){}Om.prototype.h=null;var Lm,Fm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function jm(){Nv.call(this,"d")}function Um(){Nv.call(this,"c")}function Vm(){}function qm(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new mm(this),this.P=zm,e=mv?125:void 0,this.W=new hm(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Bm}function Bm(){this.i=null,this.g="",this.h=!1}Kp(jm,Nv),Kp(Um,Nv),Kp(Vm,Om),Vm.prototype.g=function(){return new XMLHttpRequest},Vm.prototype.i=function(){return{}},Lm=new Vm;var zm=45e3,Wm={},Hm={};function Gm(e,t,n){e.K=1,e.v=vy(cy(t)),e.s=n,e.U=!0,Km(e,null)}function Km(e,t){e.F=Date.now(),Xm(e),e.A=cy(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Cy(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Bm,e.g=Rg(e.l,n?t:null,!e.s),0<e.O&&(e.L=new vm(Hp(e.Ia,e,e.g),e.O)),gm(e.V,e.g,"readystatechange",e.gb),t=e.H?uv(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Im(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Ym(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Qm(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Jm(e,n))==Hm){4==t&&(e.o=4,Cm(14),i=!1),wm(e.j,e.m,null,"[Incomplete Response]");break}if(r==Wm){e.o=4,Cm(15),wm(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}wm(e.j,e.m,r,null),ny(e,r)}Ym(e)&&r!=Hm&&r!=Wm&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Cm(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),_g(t),t.L=!0,Cm(11))):(wm(e.j,e.m,n,"[Invalid Chunked Response]"),ty(e),ey(e))}function Jm(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Hm:(n=Number(t.substring(n,r)),isNaN(n)?Wm:(r+=1)+n>t.length?Hm:(t=t.substr(r,n),e.C=r+n,t))}function Xm(e){e.Y=Date.now()+e.P,Zm(e,e.P)}function Zm(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Rm(Hp(e.eb,e),t)}function $m(e){e.B&&(Fp.clearTimeout(e.B),e.B=null)}function ey(e){0==e.l.G||e.I||Eg(e.l,e)}function ty(e){$m(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,fm(e.W),km(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ny(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ly(n.i,e)))if(n.I=e.N,!e.J&&Ly(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Tg(n),dg(n)}wg(n),Cm(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Rm(Hp(n.ab,n),6e3));if(1>=My(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Sg(n,11)}else if((e.J||n.g==e)&&Tg(n),!ev(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(rv(l,"spdy")||rv(l,"quic")||rv(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Fy(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,py(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ng(r,r.H?r.la:null,r.W),d.J){jy(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&($m(p),Xm(p)),r.g=d}else bg(r);0<n.l.length&&mg(n)}else"stop"!=a[0]&&"close"!=a[0]||Sg(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Sg(n,7):fg(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Im(4)}catch(a){}}function ry(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Up(e)||"string"===typeof e)Xp(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Up(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Up(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function iy(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof iy)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ay(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];oy(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)oy(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function oy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Op=qm.prototype).setTimeout=function(e){this.P=e},Op.gb=function(e){e=e.target;var t=this.L;t&&3==sg(e)?t.l():this.Ia(e)},Op.Ia=function(e){try{if(e==this.g)e:{var t=sg(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||mv||this.g&&(this.h.h||this.g.ga()||ug(this.g)))){this.I||4!=t||7==n||Im(8==n||0>=r?3:2),$m(this);var i=this.g.ba();this.N=i;t:if(Ym(this)){var a=ug(this.g);e="";var o=a.length,s=4==sg(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ty(this),ey(this);var u="";break t}this.h.i=new Fp.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ev(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Cm(12),ty(this),ey(this);break e}wm(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ny(this,i)}this.U?(Qm(this,t,u),mv&&this.i&&3==t&&(gm(this.V,this.W,"tick",this.fb),this.W.start())):(wm(this.j,this.m,u,null),ny(this,u)),4==t&&ty(this),this.i&&!this.I&&(4==t?Eg(this.l,this):(this.i=!1,Xm(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Cm(12)):(this.o=0,Cm(13)),ty(this),ey(this)}}}catch(t){}},Op.fb=function(){if(this.g){var e=sg(this.g),t=this.g.ga();this.C<t.length&&($m(this),Qm(this,e,t),this.i&&4!=e&&Xm(this))}},Op.cancel=function(){this.I=!0,ty(this)},Op.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Im(3),Cm(17)),ty(this),this.o=2,ey(this)):Zm(this,this.Y-e)},(Op=iy.prototype).R=function(){ay(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Op.T=function(){return ay(this),this.g.concat()},Op.get=function(e,t){return oy(this.h,e)?this.h[e]:t},Op.set=function(e,t){oy(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Op.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var sy=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function uy(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof uy){this.g=void 0!==t?t:e.g,ly(this,e.j),this.s=e.s,hy(this,e.i),fy(this,e.m),this.l=e.l,t=e.h;var n=new Ty;n.i=t.i,t.g&&(n.g=new iy(t.g),n.h=t.h),dy(this,n),this.o=e.o}else e&&(n=String(e).match(sy))?(this.g=!!t,ly(this,n[1]||"",!0),this.s=my(n[2]||""),hy(this,n[3]||"",!0),fy(this,n[4]),this.l=my(n[5]||"",!0),dy(this,n[6]||"",!0),this.o=my(n[7]||"")):(this.g=!!t,this.h=new Ty(null,this.g))}function cy(e){return new uy(e)}function ly(e,t,n){e.j=n?my(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function hy(e,t,n){e.i=n?my(t,!0):t}function fy(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function dy(e,t,n){t instanceof Ty?(e.h=t,function(e,t){t&&!e.j&&(Ey(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Iy(this,t),Cy(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=yy(t,_y)),e.h=new Ty(t,e.g))}function py(e,t,n){e.h.set(t,n)}function vy(e){return py(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function my(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function yy(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,gy),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gy(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}uy.prototype.toString=function(){var e=[],t=this.j;t&&e.push(yy(t,ky,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(yy(t,ky,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(yy(n,"/"==n.charAt(0)?wy:by,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",yy(n,xy)),e.join("")};var ky=/[#\/\?@]/g,by=/[#\?:]/g,wy=/[#\?]/g,_y=/[#\?@]/g,xy=/#/g;function Ty(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ey(e){e.g||(e.g=new iy,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Iy(e,t){Ey(e),t=Ny(e,t),oy(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,oy((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ay(e)))}function Sy(e,t){return Ey(e),t=Ny(e,t),oy(e.g.h,t)}function Cy(e,t,n){Iy(e,t),0<n.length&&(e.i=null,e.g.set(Ny(e,t),$p(n)),e.h+=n.length)}function Ny(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Op=Ty.prototype).add=function(e,t){Ey(this),this.i=null,e=Ny(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Op.forEach=function(e,t){Ey(this),this.g.forEach((function(n,r){Xp(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Op.T=function(){Ey(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Op.R=function(e){Ey(this);var t=[];if("string"===typeof e)Sy(this,e)&&(t=Zp(t,this.g.get(Ny(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Zp(t,e[n])}return t},Op.set=function(e,t){return Ey(this),this.i=null,Sy(this,e=Ny(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Op.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Op.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Ry=E((function e(t,n){x(this,e),this.h=t,this.g=n}));function Py(e){this.l=e||Oy,Fp.PerformanceNavigationTiming?e=0<(e=Fp.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Fp.g&&Fp.g.Ea&&Fp.g.Ea()&&Fp.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ay,Oy=10;function Dy(e){return!!e.h||!!e.g&&e.g.size>=e.j}function My(e){return e.h?1:e.g?e.g.size:0}function Ly(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Fy(e,t){e.g?e.g.add(t):e.h=t}function jy(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Uy(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=b(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return $p(e.i)}function Vy(){}function qy(){this.g=new Vy}function By(e,t,n){var r=n||"";try{ry(e,(function(e,n){var i=e;Vp(e)&&(i=em(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function zy(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Wy(e){this.l=e.$b||null,this.j=e.ib||!1}function Hy(e,t){Xv.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Gy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Py.prototype.cancel=function(){if(this.i=Uy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=b(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Vy.prototype.stringify=function(e){return Fp.JSON.stringify(e,void 0)},Vy.prototype.parse=function(e){return Fp.JSON.parse(e,void 0)},Kp(Wy,Om),Wy.prototype.g=function(){return new Hy(this.l,this.j)},Wy.prototype.i=(Ay={},function(){return Ay}),Kp(Hy,Xv);var Gy=0;function Ky(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Yy(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Qy(e)}function Qy(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Op=Hy.prototype).open=function(e,t){if(this.readyState!=Gy)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Qy(this)},Op.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Fp).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Op.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yy(this)),this.readyState=Gy},Op.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Qy(this)),this.g&&(this.readyState=3,Qy(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Fp.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ky(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Op.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Yy(this):Qy(this),3==this.readyState&&Ky(this)}},Op.Ua=function(e){this.g&&(this.response=this.responseText=e,Yy(this))},Op.Ta=function(e){this.g&&(this.response=e,Yy(this))},Op.ha=function(){this.g&&Yy(this)},Op.setRequestHeader=function(e,t){this.v.append(e,t)},Op.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Op.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Hy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Jy=Fp.JSON.parse;function Xy(e){Xv.call(this),this.headers=new iy,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zy,this.K=this.L=!1}Kp(Xy,Xv);var Zy="",$y=/^https?$/i,eg=["POST","PUT"];function tg(e){return"content-type"==e.toLowerCase()}function ng(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,rg(e),ag(e)}function rg(e){e.D||(e.D=!0,Zv(e,"complete"),Zv(e,"error"))}function ig(e){if(e.h&&"undefined"!=typeof Lp&&(!e.C[1]||4!=sg(e)||2!=e.ba()))if(e.v&&4==sg(e))dm(e.Fa,0,e);else if(Zv(e,"readystatechange"),4==sg(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(sy)[1]||null;if(!a&&Fp.self&&Fp.self.location){var o=Fp.self.location.protocol;a=o.substr(0,o.length-1)}i=!$y.test(a?a.toLowerCase():"")}t=i}if(t)Zv(e,"complete"),Zv(e,"success");else{e.m=6;try{var s=2<sg(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",rg(e)}}finally{ag(e)}}}function ag(e,t){if(e.g){og(e);var n=e.g,r=e.C[0]?jp:null;e.g=null,e.C=null,t||Zv(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function og(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Fp.clearTimeout(e.A),e.A=null)}function sg(e){return e.g?e.g.readyState:0}function ug(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Zy:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function cg(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return sv(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):py(e,t,n))}function lg(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function hg(e){this.za=0,this.l=[],this.h=new bm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=lg("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=lg("baseRetryDelayMs",5e3,e),this.$a=lg("retryDelaySeedMs",1e4,e),this.Ya=lg("forwardChannelMaxRetries",2,e),this.ra=lg("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Py(e&&e.concurrentRequestLimit),this.Ca=new qy,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function fg(e){if(pg(e),3==e.G){var t=e.V++,n=cy(e.F);py(n,"SID",e.J),py(n,"RID",t),py(n,"TYPE","terminate"),gg(e,n),(t=new qm(e,e.h,t,void 0)).K=2,t.v=vy(cy(n)),n=!1,Fp.navigator&&Fp.navigator.sendBeacon&&(n=Fp.navigator.sendBeacon(t.v.toString(),"")),!n&&Fp.Image&&((new Image).src=t.v,n=!0),n||(t.g=Rg(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Xm(t)}Cg(e)}function dg(e){e.g&&(_g(e),e.g.cancel(),e.g=null)}function pg(e){dg(e),e.u&&(Fp.clearTimeout(e.u),e.u=null),Tg(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Fp.clearTimeout(e.m),e.m=null)}function vg(e,t){e.l.push(new Ry(e.Za++,t)),3==e.G&&mg(e)}function mg(e){Dy(e.i)||e.m||(e.m=!0,sm(e.Ha,e),e.C=0)}function yg(e,t){var n;n=t?t.m:e.V++;var r=cy(e.F);py(r,"SID",e.J),py(r,"RID",n),py(r,"AID",e.U),gg(e,r),e.o&&e.s&&cg(r,e.o,e.s),n=new qm(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=kg(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Fy(e.i,n),Gm(n,r,t)}function gg(e,t){e.j&&ry({},(function(e,n){py(t,n,e)}))}function kg(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Hp(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{By(l,o,"req"+c+"_")}catch(rk){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function bg(e){e.g||e.u||(e.Y=1,sm(e.Ga,e),e.A=0)}function wg(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Rm(Hp(e.Ga,e),Ig(e,e.A)),e.A++,!0)}function _g(e){null!=e.B&&(Fp.clearTimeout(e.B),e.B=null)}function xg(e){e.g=new qm(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=cy(e.oa);py(t,"RID","rpc"),py(t,"SID",e.J),py(t,"CI",e.N?"0":"1"),py(t,"AID",e.U),gg(e,t),py(t,"TYPE","xmlhttp"),e.o&&e.s&&cg(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=vy(cy(t)),n.s=null,n.U=!0,Km(n,e)}function Tg(e){null!=e.v&&(Fp.clearTimeout(e.v),e.v=null)}function Eg(e,t){var n=null;if(e.g==t){Tg(e),_g(e),e.g=null;var r=2}else{if(!Ly(e.i,t))return;n=t.D,jy(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Zv(r=Tm(),new Nm(r,n,t,i)),mg(e)}else bg(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(My(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Rm(Hp(e.Ha,e,t),Ig(e,e.C)),e.C++,!0))}(e,t)||2==r&&wg(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Sg(e,5);break;case 4:Sg(e,10);break;case 3:Sg(e,6);break;default:Sg(e,2)}}function Ig(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Sg(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Hp(e.jb,e);n||(n=new uy("//www.google.com/images/cleardot.gif"),Fp.location&&"http"==Fp.location.protocol||ly(n,"https"),vy(n)),function(e,t){var n=new bm;if(Fp.Image){var r=new Image;r.onload=Gp(zy,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Gp(zy,n,r,"TestLoadImage: error",!1,t),r.onabort=Gp(zy,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Gp(zy,n,r,"TestLoadImage: timeout",!1,t),Fp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Cm(2);e.G=0,e.j&&e.j.va(t),Cg(e),pg(e)}function Cg(e){e.G=0,e.I=-1,e.j&&(0==Uy(e.i).length&&0==e.l.length||(e.i.i.length=0,$p(e.l),e.l.length=0),e.j.ua())}function Ng(e,t,n){var r=function(e){return e instanceof uy?cy(e):new uy(e,void 0)}(n);if(""!=r.i)t&&hy(r,t+"."+r.i),fy(r,r.m);else{var i=Fp.location;r=function(e,t,n,r){var i=new uy(null,void 0);return e&&ly(i,e),t&&hy(i,t),n&&fy(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&sv(e.aa,(function(e,t){py(r,t,e)})),t=e.D,n=e.sa,t&&n&&py(r,t,n),py(r,"VER",e.ma),gg(e,r),r}function Rg(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Xy(new Wy({ib:!0})):new Xy(e.qa)).L=e.H,t}function Pg(){}function Ag(){if(pv&&!(10<=Number(Sv)))throw Error("Environmental error: no available transport.")}function Og(e,t){Xv.call(this),this.g=new hg(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ev(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ev(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Lg(this)}function Dg(e){jm.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Mg(){Um.call(this),this.status=1}function Lg(e){this.g=e}(Op=Xy.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Lm.g(),this.C=this.u?Dm(this.u):Dm(Lm),this.g.onreadystatechange=Hp(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ng(this,a)}e=n||"";var i=new iy(this.headers);r&&ry(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=tg,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Fp.FormData&&e instanceof Fp.FormData,!(0<=Jp(eg,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{og(this),0<this.B&&((this.K=function(e){return pv&&Ev()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hp(this.pa,this)):this.A=dm(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ng(this,a)}},Op.pa=function(){"undefined"!=typeof Lp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zv(this,"timeout"),this.abort(8))},Op.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Zv(this,"complete"),Zv(this,"abort"),ag(this))},Op.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ag(this,!0)),Xy.Z.M.call(this)},Op.Fa=function(){this.s||(this.F||this.v||this.l?ig(this):this.cb())},Op.cb=function(){ig(this)},Op.ba=function(){try{return 2<sg(this)?this.g.status:-1}catch(Ay){return-1}},Op.ga=function(){try{return this.g?this.g.responseText:""}catch(Ay){return""}},Op.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Jy(t)}},Op.Da=function(){return this.m},Op.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Op=hg.prototype).ma=8,Op.G=1,Op.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Op.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new qm(this,this.h,e,void 0),n=this.s;if(this.P&&(n?lv(n=uv(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=kg(this,t,r),py(i=cy(this.F),"RID",e),py(i,"CVER",22),this.D&&py(i,"X-HTTP-Session-Id",this.D),gg(this,i),this.o&&n&&cg(i,this.o,n),Fy(this.i,t),this.Ra&&py(i,"TYPE","init"),this.ja?(py(i,"$req",r),py(i,"SID","null"),t.$=!0,Gm(t,i,null)):Gm(t,i,r),this.G=2}}else 3==this.G&&(e?yg(this,e):0==this.l.length||Dy(this.i)||yg(this))},Op.Ga=function(){if(this.u=null,xg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Rm(Hp(this.bb,this),e)}},Op.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Cm(10),dg(this),xg(this))},Op.ab=function(){null!=this.v&&(this.v=null,dg(this),wg(this),Cm(19))},Op.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Cm(2)):(this.h.info("Failed to ping google.com"),Cm(1))},(Op=Pg.prototype).xa=function(){},Op.wa=function(){},Op.va=function(){},Op.ua=function(){},Op.Oa=function(){},Ag.prototype.g=function(e,t){return new Og(e,t)},Kp(Og,Xv),Og.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),sm(Hp(e.hb,e,t))),Cm(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ng(e,null,e.W),mg(e)},Og.prototype.close=function(){fg(this.g)},Og.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,vg(this.g,t)}else this.v?((t={}).__data__=em(e),vg(this.g,t)):vg(this.g,e)},Og.prototype.M=function(){this.g.j=null,delete this.j,fg(this.g),delete this.g,Og.Z.M.call(this)},Kp(Dg,jm),Kp(Mg,Um),Kp(Lg,Pg),Lg.prototype.xa=function(){Zv(this.g,"a")},Lg.prototype.wa=function(e){Zv(this.g,new Dg(e))},Lg.prototype.va=function(e){Zv(this.g,new Mg(e))},Lg.prototype.ua=function(){Zv(this.g,"b")},Ag.prototype.createWebChannel=Ag.prototype.g,Og.prototype.send=Og.prototype.u,Og.prototype.open=Og.prototype.m,Og.prototype.close=Og.prototype.close,Pm.NO_ERROR=0,Pm.TIMEOUT=8,Pm.HTTP_ERROR=6,Am.COMPLETE="complete",Mm.EventType=Fm,Fm.OPEN="a",Fm.CLOSE="b",Fm.ERROR="c",Fm.MESSAGE="d",Xv.prototype.listen=Xv.prototype.N,Xy.prototype.listenOnce=Xy.prototype.O,Xy.prototype.getLastError=Xy.prototype.La,Xy.prototype.getLastErrorCode=Xy.prototype.Da,Xy.prototype.getStatus=Xy.prototype.ba,Xy.prototype.getResponseJson=Xy.prototype.Qa,Xy.prototype.getResponseText=Xy.prototype.ga,Xy.prototype.send=Xy.prototype.ea;var Fg=Mp.createWebChannelTransport=function(){return new Ag},jg=Mp.getStatEventTarget=function(){return Tm()},Ug=Mp.ErrorCode=Pm,Vg=Mp.EventType=Am,qg=Mp.Event=_m,Bg=Mp.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},zg=Mp.FetchXmlHttpFactory=Wy,Wg=Mp.WebChannel=Mm,Hg=Mp.XhrIo=Xy,Gg="@firebase/firestore",Kg=function(){function e(t){x(this,e),this.uid=t}return E(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Kg.UNAUTHENTICATED=new Kg(null),Kg.GOOGLE_CREDENTIALS=new Kg("google-credentials-uid"),Kg.FIRST_PARTY=new Kg("first-party-uid"),Kg.MOCK_USER=new Kg("mock-user");var Yg="9.6.10",Qg=new He("@firebase/firestore");function Jg(){return Qg.logLevel}function Xg(e){if(Qg.logLevel<=Le.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ek);Qg.debug.apply(Qg,["Firestore (".concat(Yg,"): ").concat(e)].concat(S(i)))}}function Zg(e){if(Qg.logLevel<=Le.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ek);Qg.error.apply(Qg,["Firestore (".concat(Yg,"): ").concat(e)].concat(S(i)))}}function $g(e){if(Qg.logLevel<=Le.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ek);Qg.warn.apply(Qg,["Firestore (".concat(Yg,"): ").concat(e)].concat(S(i)))}}function ek(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function tk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Yg,") INTERNAL ASSERTION FAILED: ")+e;throw Zg(t),new Error(t)}function nk(e,t){e||tk()}function rk(e,t){return e}var ik={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ak=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return E(n)}(te),ok=E((function e(){var t=this;x(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),sk=E((function e(t,n){x(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),uk=function(){function e(){x(this,e)}return E(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Kg.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ck=function(){function e(t){x(this,e),this.token=t,this.changeListener=null}return E(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),lk=function(){function e(t){x(this,e),this.t=t,this.currentUser=Kg.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ok;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ok,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Xg("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Xg("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ok)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Xg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(nk("string"==typeof n.accessToken),new sk(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return nk(null===e||"string"==typeof e),new Kg(e)}}]),e}(),hk=E((function e(t,n,r){x(this,e),this.type="FirstParty",this.user=Kg.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),fk=function(){function e(t,n,r){x(this,e),this.h=t,this.l=n,this.m=r}return E(e,[{key:"getToken",value:function(){return Promise.resolve(new hk(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Kg.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),dk=E((function e(t){x(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),pk=function(){function e(t){x(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Xg("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Xg("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Xg("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Xg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(nk("string"==typeof t.token),e.p=t.token,new dk(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),vk=function(){function e(t,n){var r=this;x(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return E(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function mk(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}vk.A=-1;var yk=function(){function e(){x(this,e)}return E(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=mk(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function gk(e,t){return e<t?-1:e>t?1:0}function kk(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function bk(e){return e+"\0"}var wk=function(){function e(t,n){if(x(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ak(ik.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ak(ik.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ak(ik.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ak(ik.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return E(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?gk(this.nanoseconds,e.nanoseconds):gk(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),_k=function(){function e(t){x(this,e),this.timestamp=t}return E(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new wk(0,0))}},{key:"max",value:function(){return new e(new wk(253402300799,999999999))}}]),e}();function xk(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Tk(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ek(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ik=function(){function e(t,n,r){x(this,e),void 0===n?n=0:n>t.length&&tk(),void 0===r?r=t.length-n:r>t.length-n&&tk(),this.segments=t,this.offset=n,this.len=r}return E(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Sk=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new ak(ik.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,S(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ik),Ck=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nk=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ck.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ak(ik.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new ak(ik.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ak(ik.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new ak(ik.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ik),Rk=function(){function e(t){x(this,e),this.fields=t,t.sort(Nk.comparator)}return E(e,[{key:"covers",value:function(e){var t,n=b(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return kk(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Pk=function(e){function t(e){x(this,t),this.binaryString=e}return E(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return gk(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Pk.EMPTY_BYTE_STRING=new Pk("");var Ak=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ok(e){if(nk(!!e),"string"==typeof e){var t=0,n=Ak.exec(e);if(nk(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Dk(e.seconds),nanos:Dk(e.nanos)}}function Dk(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Mk(e){return"string"==typeof e?Pk.fromBase64String(e):Pk.fromUint8Array(e)}function Lk(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fk(e){var t=e.mapValue.fields.__previous_value__;return Lk(t)?Fk(t):t}function jk(e){var t=Ok(e.mapValue.fields.__local_write_time__.timestampValue);return new wk(t.seconds,t.nanos)}var Uk=E((function e(t,n,r,i,a,o,s,u){x(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Vk=function(){function e(t,n){x(this,e),this.projectId=t,this.database=n||"(default)"}return E(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function qk(e){return null==e}function Bk(e){return 0===e&&1/e==-1/0}function zk(e){return"number"==typeof e&&Number.isInteger(e)&&!Bk(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Wk=function(){function e(t){x(this,e),this.path=t}return E(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Sk.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Sk.fromString(t))}},{key:"fromName",value:function(t){return new e(Sk.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Sk.emptyPath())}},{key:"comparator",value:function(e,t){return Sk.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Sk(t.slice()))}}]),e}(),Hk={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gk={nullValue:"NULL_VALUE"};function Kk(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Lk(e)?4:sb(e)?9:10:tk()}function Yk(e,t){if(e===t)return!0;var n=Kk(e);if(n!==Kk(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jk(e).isEqual(jk(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ok(e.timestampValue),r=Ok(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Mk(e.bytesValue).isEqual(Mk(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dk(e.geoPointValue.latitude)===Dk(t.geoPointValue.latitude)&&Dk(e.geoPointValue.longitude)===Dk(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dk(e.integerValue)===Dk(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Dk(e.doubleValue),r=Dk(t.doubleValue);return n===r?Bk(n)===Bk(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return kk(e.arrayValue.values||[],t.arrayValue.values||[],Yk);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xk(n)!==xk(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yk(n[i],r[i])))return!1;return!0}(e,t);default:return tk()}}function Qk(e,t){return void 0!==(e.values||[]).find((function(e){return Yk(e,t)}))}function Jk(e,t){if(e===t)return 0;var n=Kk(e),r=Kk(t);if(n!==r)return gk(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return gk(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Dk(e.integerValue||e.doubleValue),r=Dk(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xk(e.timestampValue,t.timestampValue);case 4:return Xk(jk(e),jk(t));case 5:return gk(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Mk(e),r=Mk(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=gk(n[i],r[i]);if(0!==a)return a}return gk(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=gk(Dk(e.latitude),Dk(t.latitude));return 0!==n?n:gk(Dk(e.longitude),Dk(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Jk(n[i],r[i]);if(a)return a}return gk(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=gk(r[o],a[o]);if(0!==s)return s;var u=Jk(n[r[o]],i[a[o]]);if(0!==u)return u}return gk(r.length,a.length)}(e.mapValue,t.mapValue);default:throw tk()}}function Xk(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return gk(e,t);var n=Ok(e),r=Ok(t),i=gk(n.seconds,r.seconds);return 0!==i?i:gk(n.nanos,r.nanos)}function Zk(e){return $k(e)}function $k(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ok(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Mk(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Wk.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=b(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=$k(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=b(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat($k(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):tk();var t,n}function eb(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function tb(e){return!!e&&"integerValue"in e}function nb(e){return!!e&&"arrayValue"in e}function rb(e){return!!e&&"nullValue"in e}function ib(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ab(e){return!!e&&"mapValue"in e}function ob(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Tk(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ob(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ob(e.arrayValue.values[r]);return n}return Object.assign({},e)}function sb(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ub(e,t){return void 0===e?t:void 0===t||Jk(e,t)>0?e:t}function cb(e,t){return void 0===e?t:void 0===t||Jk(e,t)<0?e:t}var lb=function(){function e(t){x(this,e),this.value=t}return E(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ab(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ob(t)}},{key:"setAll",value:function(e){var t=this,n=Nk.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ob(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ab(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Yk(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ab(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Tk(t,(function(t,n){return e[t]=n}));var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ob(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function hb(e){var t=[];return Tk(e.fields,(function(e,n){var r=new Nk([e]);if(ab(n)){var i=hb(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=b(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Rk(t)}var fb=function(){function e(t,n,r,i,a,o){x(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return E(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=lb.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=lb.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,_k.min(),_k.min(),lb.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,_k.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,_k.min(),lb.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,_k.min(),lb.empty(),2)}}]),e}(),db=E((function e(t,n,r,i){x(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function pb(e){return e.fields.find((function(e){return 2===e.kind}))}function vb(e){return e.fields.filter((function(e){return 2!==e.kind}))}db.UNKNOWN_ID=-1;var mb=E((function e(t,n){x(this,e),this.fieldPath=t,this.kind=n})),yb=function(){function e(t,n){x(this,e),this.sequenceNumber=t,this.offset=n}return E(e,null,[{key:"empty",value:function(){return new e(0,bb.min())}}]),e}();function gb(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=_k.fromTimestamp(1e9===r?new wk(n+1,0):new wk(n,r));return new bb(i,Wk.empty(),t)}function kb(e){return new bb(e.readTime,e.key,-1)}var bb=function(){function e(t,n,r){x(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return E(e,null,[{key:"min",value:function(){return new e(_k.min(),Wk.empty(),-1)}},{key:"max",value:function(){return new e(_k.max(),Wk.empty(),-1)}}]),e}();function wb(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Wk.comparator(e.documentKey,t.documentKey))?n:gk(e.largestBatchId,t.largestBatchId)}var _b=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;x(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function xb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new _b(e,t,n,r,i,a,o)}function Tb(e){var t=rk(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Zk(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),qk(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Zk(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Zk(e)})).join(",")),t.P=n}return t.P}function Eb(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ub(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Yk(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qb(e.startAt,t.startAt)&&qb(e.endAt,t.endAt)}function Ib(e){return Wk.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Sb(e,t){return e.filters.filter((function(e){return e instanceof Cb&&e.field.isEqual(t)}))}var Cb=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Jk(t,this.value)):null!==t&&Kk(this.value)===Kk(t)&&this.v(Jk(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tk()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Nb(e,t,r):"array-contains"===t?new Ob(e,r):"in"===t?new Db(e,r):"not-in"===t?new Mb(e,r):"array-contains-any"===t?new Lb(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Rb(e,n):new Pb(e,n)}}]),n}(function(){return E((function e(){x(this,e)}))}()),Nb=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,e,r,i)).key=Wk.fromName(i.referenceValue),a}return E(n,[{key:"matches",value:function(e){var t=Wk.comparator(e.key,this.key);return this.v(t)}}]),n}(Cb),Rb=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,"in",r)).keys=Ab("in",r),i}return E(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Cb),Pb=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,"not-in",r)).keys=Ab("not-in",r),i}return E(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Cb);function Ab(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Wk.fromName(e.referenceValue)}))}var Ob=function(e){v(n,e);var t=k(n);function n(e,r){return x(this,n),t.call(this,e,"array-contains",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return nb(t)&&Qk(t.arrayValue,this.value)}}]),n}(Cb),Db=function(e){v(n,e);var t=k(n);function n(e,r){return x(this,n),t.call(this,e,"in",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Qk(this.value.arrayValue,t)}}]),n}(Cb),Mb=function(e){v(n,e);var t=k(n);function n(e,r){return x(this,n),t.call(this,e,"not-in",r)}return E(n,[{key:"matches",value:function(e){if(Qk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Qk(this.value.arrayValue,t)}}]),n}(Cb),Lb=function(e){v(n,e);var t=k(n);function n(e,r){return x(this,n),t.call(this,e,"array-contains-any",r)}return E(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!nb(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Qk(t.value.arrayValue,e)}))}}]),n}(Cb),Fb=E((function e(t,n){x(this,e),this.position=t,this.inclusive=n})),jb=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";x(this,e),this.field=t,this.dir=n}));function Ub(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Vb(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Wk.comparator(Wk.fromName(o.referenceValue),n.key):Jk(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function qb(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Yk(e.position[n],t.position[n]))return!1;return!0}var Bb=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;x(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function zb(e,t,n,r,i,a,o,s){return new Bb(e,t,n,r,i,a,o,s)}function Wb(e){return new Bb(e)}function Hb(e){return!qk(e.limit)&&"F"===e.limitType}function Gb(e){return!qk(e.limit)&&"L"===e.limitType}function Kb(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Yb(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Qb(e){return null!==e.collectionGroup}function Jb(e){var t=rk(e);if(null===t.D){t.D=[];var n=Yb(t),r=Kb(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new jb(n)),t.D.push(new jb(Nk.keyField(),"asc"));else{var i,a=!1,o=b(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new jb(Nk.keyField(),u))}}}return t.D}function Xb(e){var t=rk(e);if(!t.C)if("F"===t.limitType)t.C=xb(t.path,t.collectionGroup,Jb(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=b(Jb(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new jb(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Fb(t.endAt.position,!t.endAt.inclusive):null,u=t.startAt?new Fb(t.startAt.position,!t.startAt.inclusive):null;t.C=xb(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function Zb(e,t,n){return new Bb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $b(e,t){return Eb(Xb(e),Xb(t))&&e.limitType===t.limitType}function ew(e){return"".concat(Tb(Xb(e)),"|lt:").concat(e.limitType)}function tw(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Zk(t.value));var t})).join(", "),"]")),qk(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Zk(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Zk(e)})).join(",")),"Target(".concat(t,")")}(Xb(e)),"; limitType=").concat(e.limitType,")")}function nw(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wk.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=b(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Vb(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Jb(e),t))&&!(e.endAt&&!function(e,t,n){var r=Vb(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Jb(e),t))}(e,t)}function rw(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function iw(e){return function(t,n){var r,i=!1,a=b(Jb(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=aw(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function aw(e,t,n){var r=e.field.isKeyField()?Wk.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Jk(r,i):tk()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tk()}}function ow(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bk(t)?"-0":t}}function sw(e){return{integerValue:""+e}}function uw(e,t){return zk(t)?sw(t):ow(e,t)}var cw=E((function e(){x(this,e),this._=void 0}));function lw(e,t,n){return e instanceof dw?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof pw?vw(e,t):e instanceof mw?yw(e,t):function(e,t){var n=fw(e,t),r=kw(n)+kw(e.k);return tb(n)&&tb(e.k)?sw(r):ow(e.M,r)}(e,t)}function hw(e,t,n){return e instanceof pw?vw(e,t):e instanceof mw?yw(e,t):n}function fw(e,t){return e instanceof gw?tb(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var dw=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n)}(cw),pw=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this)).elements=e,r}return E(n)}(cw);function vw(e,t){var n,r=bw(t),i=b(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Yk(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var mw=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this)).elements=e,r}return E(n)}(cw);function yw(e,t){var n,r=bw(t),i=b(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Yk(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var gw=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).M=e,i.k=r,i}return E(n)}(cw);function kw(e){return Dk(e.integerValue||e.doubleValue)}function bw(e){return nb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ww=E((function e(t,n){x(this,e),this.field=t,this.transform=n}));var _w=E((function e(t,n){x(this,e),this.version=t,this.transformResults=n})),xw=function(){function e(t,n){x(this,e),this.updateTime=t,this.exists=n}return E(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Tw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ew=E((function e(){x(this,e)}));function Iw(e,t,n){e instanceof Pw?function(e,t,n){var r=e.value.clone(),i=Dw(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Aw?function(e,t,n){if(Tw(e.precondition,t)){var r=Dw(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ow(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Sw(e,t,n){e instanceof Pw?function(e,t,n){if(Tw(e.precondition,t)){var r=e.value.clone(),i=Mw(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Rw(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Aw?function(e,t,n){if(Tw(e.precondition,t)){var r=Mw(e.fieldTransforms,n,t),i=t.data;i.setAll(Ow(e)),i.setAll(r),t.convertToFoundDocument(Rw(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Tw(e.precondition,t)&&t.convertToNoDocument(_k.min())}(e,t)}function Cw(e,t){var n,r=null,i=b(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=fw(a.transform,o||null);null!=s&&(null==r&&(r=lb.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Nw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&kk(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof pw&&t instanceof pw||e instanceof mw&&t instanceof mw?kk(e.elements,t.elements,Yk):e instanceof gw&&t instanceof gw?Yk(e.k,t.k):e instanceof dw&&t instanceof dw}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Rw(e){return e.isFoundDocument()?e.version:_k.min()}var Pw=function(e){v(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return x(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return E(n)}(Ew),Aw=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return x(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return E(n)}(Ew);function Ow(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Dw(e,t,n){var r=new Map;nk(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,hw(o,s,n[i]))}return r}function Mw(e,t,n){var r,i=new Map,a=b(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,lw(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Lw,Fw,jw=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return E(n)}(Ew),Uw=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return E(n)}(Ew),Vw=E((function e(t){x(this,e),this.count=t}));function qw(e){switch(e){default:return tk();case ik.CANCELLED:case ik.UNKNOWN:case ik.DEADLINE_EXCEEDED:case ik.RESOURCE_EXHAUSTED:case ik.INTERNAL:case ik.UNAVAILABLE:case ik.UNAUTHENTICATED:return!1;case ik.INVALID_ARGUMENT:case ik.NOT_FOUND:case ik.ALREADY_EXISTS:case ik.PERMISSION_DENIED:case ik.FAILED_PRECONDITION:case ik.ABORTED:case ik.OUT_OF_RANGE:case ik.UNIMPLEMENTED:case ik.DATA_LOSS:return!0}}function Bw(e){if(void 0===e)return Zg("GRPC error has no .code"),ik.UNKNOWN;switch(e){case Lw.OK:return ik.OK;case Lw.CANCELLED:return ik.CANCELLED;case Lw.UNKNOWN:return ik.UNKNOWN;case Lw.DEADLINE_EXCEEDED:return ik.DEADLINE_EXCEEDED;case Lw.RESOURCE_EXHAUSTED:return ik.RESOURCE_EXHAUSTED;case Lw.INTERNAL:return ik.INTERNAL;case Lw.UNAVAILABLE:return ik.UNAVAILABLE;case Lw.UNAUTHENTICATED:return ik.UNAUTHENTICATED;case Lw.INVALID_ARGUMENT:return ik.INVALID_ARGUMENT;case Lw.NOT_FOUND:return ik.NOT_FOUND;case Lw.ALREADY_EXISTS:return ik.ALREADY_EXISTS;case Lw.PERMISSION_DENIED:return ik.PERMISSION_DENIED;case Lw.FAILED_PRECONDITION:return ik.FAILED_PRECONDITION;case Lw.ABORTED:return ik.ABORTED;case Lw.OUT_OF_RANGE:return ik.OUT_OF_RANGE;case Lw.UNIMPLEMENTED:return ik.UNIMPLEMENTED;case Lw.DATA_LOSS:return ik.DATA_LOSS;default:return tk()}}(Fw=Lw||(Lw={}))[Fw.OK=0]="OK",Fw[Fw.CANCELLED=1]="CANCELLED",Fw[Fw.UNKNOWN=2]="UNKNOWN",Fw[Fw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fw[Fw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fw[Fw.NOT_FOUND=5]="NOT_FOUND",Fw[Fw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fw[Fw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fw[Fw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fw[Fw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fw[Fw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fw[Fw.ABORTED=10]="ABORTED",Fw[Fw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fw[Fw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fw[Fw.INTERNAL=13]="INTERNAL",Fw[Fw.UNAVAILABLE=14]="UNAVAILABLE",Fw[Fw.DATA_LOSS=15]="DATA_LOSS";var zw=function(){function e(t,n){x(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return E(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Tk(this.inner,(function(t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ek(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Ww=function(){function e(t,n){x(this,e),this.comparator=t,this.root=n||Gw.EMPTY}return E(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gw.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gw.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Hw(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Hw(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Hw(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Hw(this.root,e,this.comparator,!0)}}]),e}(),Hw=function(){function e(t,n,r,i){x(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return E(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Gw=function(){function e(t,n,r,i,a){x(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return E(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw tk();if(this.right.isRed())throw tk();var e=this.left.check();if(e!==this.right.check())throw tk();return e+(this.isRed()?0:1)}}]),e}();Gw.EMPTY=null,Gw.RED=!0,Gw.BLACK=!1,Gw.EMPTY=new(function(){function e(){x(this,e),this.size=0}return E(e,[{key:"key",get:function(){throw tk()}},{key:"value",get:function(){throw tk()}},{key:"color",get:function(){throw tk()}},{key:"left",get:function(){throw tk()}},{key:"right",get:function(){throw tk()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Gw(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Kw=function(){function e(t){x(this,e),this.comparator=t,this.data=new Ww(this.comparator)}return E(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Yw(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Yw(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Yw=function(){function e(t){x(this,e),this.iter=t}return E(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Qw(e){return e.hasNext()?e.getNext():void 0}var Jw=new Ww(Wk.comparator);function Xw(){return Jw}var Zw=new Ww(Wk.comparator);function $w(){return Zw}function e_(){return new zw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var t_=new Ww(Wk.comparator),n_=new Kw(Wk.comparator);function r_(){for(var e=n_,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var i_=new Kw(gk);function a_(){return i_}var o_=function(){function e(t,n,r,i,a){x(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return E(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,s_.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(_k.min(),r,a_(),Xw(),r_())}}]),e}(),s_=function(){function e(t,n,r,i,a){x(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return E(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Pk.EMPTY_BYTE_STRING,n,r_(),r_(),r_())}}]),e}(),u_=E((function e(t,n,r,i){x(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),c_=E((function e(t,n){x(this,e),this.targetId=t,this.$=n})),l_=E((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pk.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;x(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),h_=function(){function e(){x(this,e),this.B=0,this.L=p_(),this.U=Pk.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return E(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=r_(),t=r_(),n=r_();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:tk()}})),new s_(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=p_()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),f_=function(){function e(t){x(this,e),this.nt=t,this.st=new Map,this.it=Xw(),this.rt=d_(),this.ot=new Kw(gk)}return E(e,[{key:"ut",value:function(e){var t,n=b(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=b(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:tk()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Ib(i))if(0===n){var a=new Wk(i.path);this.ct(t,a,fb.newNoDocument(a,_k.min()))}else nk(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Ib(a.target)){var o=new Wk(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,fb.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=r_();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new o_(e,n,this.ot,this.it,r);return this.it=Xw(),this.rt=d_(),this.ot=new Kw(gk),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new h_,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Kw(gk),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Xg("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new h_),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function d_(){return new Ww(Wk.comparator)}function p_(){return new Ww(Wk.comparator)}var v_={asc:"ASCENDING",desc:"DESCENDING"},m_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y_=E((function e(t,n){x(this,e),this.databaseId=t,this.N=n}));function g_(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function k_(e,t){return e.N?t.toBase64():t.toUint8Array()}function b_(e,t){return g_(e,t.toTimestamp())}function w_(e){return nk(!!e),_k.fromTimestamp(function(e){var t=Ok(e);return new wk(t.seconds,t.nanos)}(e))}function __(e,t){return function(e){return new Sk(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function x_(e){var t=Sk.fromString(e);return nk(G_(t)),t}function T_(e,t){return __(e.databaseId,t.path)}function E_(e,t){var n=x_(t);if(n.get(1)!==e.databaseId.projectId)throw new ak(ik.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ak(ik.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wk(N_(n))}function I_(e,t){return __(e.databaseId,t)}function S_(e){var t=x_(e);return 4===t.length?Sk.emptyPath():N_(t)}function C_(e){return new Sk(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function N_(e){return nk(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function R_(e,t,n){return{name:T_(e,t),fields:n.value.mapValue.fields}}function P_(e,t,n){var r=E_(e,t.name),i=w_(t.updateTime),a=new lb({mapValue:{fields:t.fields}}),o=fb.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function A_(e,t){return"found"in t?function(e,t){nk(!!t.found),t.found.name,t.found.updateTime;var n=E_(e,t.found.name),r=w_(t.found.updateTime),i=new lb({mapValue:{fields:t.found.fields}});return fb.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){nk(!!t.missing),nk(!!t.readTime);var n=E_(e,t.missing),r=w_(t.readTime);return fb.newNoDocument(n,r)}(e,t):tk()}function O_(e,t){var n;if(t instanceof Pw)n={update:R_(e,t.key,t.value)};else if(t instanceof jw)n={delete:T_(e,t.key)};else if(t instanceof Aw)n={update:R_(e,t.key,t.data),updateMask:H_(t.fieldMask)};else{if(!(t instanceof Uw))return tk();n={verify:T_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof dw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof mw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gw)return{fieldPath:t.field.canonicalString(),increment:n.k};throw tk()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:b_(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:tk()}(e,t.precondition)),n}function D_(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?xw.updateTime(w_(e.updateTime)):void 0!==e.exists?xw.exists(e.exists):xw.none()}(t.currentDocument):xw.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)nk("REQUEST_TIME"===t.setToServerValue),n=new dw;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new pw(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new mw(i)}else"increment"in t?n=new gw(e,t.increment):tk();var a=Nk.fromServerFormat(t.fieldPath);return new ww(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=E_(e,t.update.name),a=new lb({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Rk(t.map((function(e){return Nk.fromServerFormat(e)})))}(t.updateMask);return new Aw(i,a,o,n,r)}return new Pw(i,a,n,r)}if(t.delete){var s=E_(e,t.delete);return new jw(s,n)}if(t.verify){var u=E_(e,t.verify);return new Uw(u,n)}return tk()}function M_(e,t){return{documents:[I_(e,t.path)]}}function L_(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=I_(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=I_(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ib(e.value))return{unaryFilter:{field:q_(e.field),op:"IS_NAN"}};if(rb(e.value))return{unaryFilter:{field:q_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ib(e.value))return{unaryFilter:{field:q_(e.field),op:"IS_NOT_NAN"}};if(rb(e.value))return{unaryFilter:{field:q_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:q_(e.field),op:V_(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:q_(e.field),direction:U_(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||qk(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function F_(e){var t=S_(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){nk(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=j_(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new jb(B_(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return qk(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Fb(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Fb(n,t)}(n.endAt)),zb(t,i,s,o,u,"F",c,l)}function j_(e){return e?void 0!==e.unaryFilter?[W_(e)]:void 0!==e.fieldFilter?[z_(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return j_(e)})).reduce((function(e,t){return e.concat(t)})):tk():[]}function U_(e){return v_[e]}function V_(e){return m_[e]}function q_(e){return{fieldPath:e.canonicalString()}}function B_(e){return Nk.fromServerFormat(e.fieldPath)}function z_(e){return Cb.create(B_(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tk()}}(e.fieldFilter.op),e.fieldFilter.value)}function W_(e){switch(e.unaryFilter.op){case"IS_NAN":var t=B_(e.unaryFilter.field);return Cb.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=B_(e.unaryFilter.field);return Cb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=B_(e.unaryFilter.field);return Cb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=B_(e.unaryFilter.field);return Cb.create(i,"!=",{nullValue:"NULL_VALUE"});default:return tk()}}function H_(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function G_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function K_(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Q_(t)),t=Y_(e.get(n),t);return Q_(t)}function Y_(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Q_(e){return e+"\x01\x01"}function J_(e){var t=e.length;if(nk(t>=2),2===t)return nk("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Sk.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&tk(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:tk()}a=o+2}return new Sk(r)}var X_=["userId","batchId"];function Z_(e,t){return[e,K_(t)]}function $_(e,t,n){return[e,K_(t),n]}var ex={},tx=["prefixPath","collectionGroup","readTime","documentId"],nx=["prefixPath","collectionGroup","documentId"],rx=["collectionGroup","readTime","prefixPath","documentId"],ix=["canonicalId","targetId"],ax=["targetId","path"],ox=["path","targetId"],sx=["collectionId","parent"],ux=["indexId","uid"],cx=["uid","sequenceNumber"],lx=["indexId","uid","arrayValue","directionalValue","documentKey"],hx=["indexId","uid","documentKey"],fx=["userId","collectionPath","documentId"],dx=["userId","collectionPath","largestBatchId"],px=["userId","collectionGroup","largestBatchId"],vx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),mx=[].concat(S(vx),["documentOverlays"]),yx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gx=[].concat(yx,["indexConfiguration","indexState","indexEntries"]),kx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bx=function(){function e(){x(this,e),this.onCommittedListeners=[]}return E(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),wx=function(){function e(t){var n=this;x(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return E(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&tk(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=b(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),_x=function(){function e(t,n){var r=this;x(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new ok,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Ex(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Rx(e.target.error);r.At.reject(new Ex(t,n))}}return E(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Xg("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Sx(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ex(n,t)}}}]),e}(),xx=function(){function e(t,n,r){x(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(K())&&Zg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return E(e,[{key:"Nt",value:function(){var e=_(R().mark((function e(t){var n=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Xg("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ex(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ak(ik.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new ak(ik.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ex(t,n))},i.onupgradeneeded=function(e){Xg("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Xg("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=_(R().mark((function e(t,n,r,i){var a,o,s,u,c=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(R().mark((function e(){var n,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=_x.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),wx.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,Xg("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Xg("SimpleDb","Removing database:",e),Cx(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!ee())return!1;if(e.St())return!0;var t=K(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Tx=function(){function e(t){x(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return E(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Cx(this.Ft.delete())}}]),e}(),Ex=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,ik.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return E(n)}(ak);function Ix(e){return"IndexedDbTransactionError"===e.name}var Sx=function(){function e(t){x(this,e),this.store=t}return E(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Xg("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Xg("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Cx(n)}},{key:"add",value:function(e){return Xg("SimpleDb","ADD",this.store.name,e,e),Cx(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Cx(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Xg("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Xg("SimpleDb","DELETE",this.store.name,e),Cx(this.store.delete(e))}},{key:"count",value:function(){return Xg("SimpleDb","COUNT",this.store.name),Cx(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Gt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new wx((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Kt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new wx((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Xg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Gt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Gt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new wx((function(n,r){t.onerror=function(e){var t=Rx(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Gt",value:function(e,t){var n=[];return new wx((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Tx(i),o=t(i.primaryKey,i.value,a);if(o instanceof wx){var s=o.catch((function(e){return a.done(),wx.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return wx.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Cx(e){return new wx((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Rx(e.target.error);n(t)}}))}var Nx=!1;function Rx(e){var t=xx.Vt(K());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ak("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Nx||(Nx=!0,setTimeout((function(){throw r}),0)),r}}return e}var Px=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return E(n)}(bx);function Ax(e,t){var n=rk(e);return xx.xt(n.Ht,t)}var Ox=function(){function e(t,n,r,i){x(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return E(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Iw(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=b(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Sw(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=b(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Sw(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(_k.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),r_())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&kk(this.mutations,e.mutations,(function(e,t){return Nw(e,t)}))&&kk(this.baseMutations,e.baseMutations,(function(e,t){return Nw(e,t)}))}}]),e}(),Dx=function(){function e(t,n,r,i){x(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return E(e,null,[{key:"from",value:function(t,n,r){nk(t.mutations.length===r.length);for(var i=t_,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Mx=function(){function e(t,n){x(this,e),this.largestBatchId=t,this.mutation=n}return E(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Lx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_k.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_k.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Pk.EMPTY_BYTE_STRING;x(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return E(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Fx=E((function e(t){x(this,e),this.Jt=t}));function jx(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ux(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:T_(e,t.key),fields:t.data.value.mapValue.fields,updateTime:g_(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Vx(t.version)};else{if(!t.isUnknownDocument())return tk();r.unknownDocument={path:n.path.toArray(),version:Vx(t.version)}}return r}function Ux(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Vx(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qx(e){var t=new wk(e.seconds,e.nanoseconds);return _k.fromTimestamp(t)}function Bx(e,t){for(var n=(t.baseMutations||[]).map((function(t){return D_(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return D_(e.Jt,t)})),s=wk.fromMillis(t.localWriteTimeMs);return new Ox(t.batchId,s,n,o)}function zx(e){var t,n,r=qx(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?qx(e.lastLimboFreeSnapshotVersion):_k.min();return void 0!==e.query.documents?(nk(1===(n=e.query).documents.length),t=Xb(Wb(S_(n.documents[0])))):t=function(e){return Xb(F_(e))}(e.query),new Lx(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Pk.fromBase64String(e.resumeToken))}function Wx(e,t){var n,r=Vx(t.snapshotVersion),i=Vx(t.lastLimboFreeSnapshotVersion);n=Ib(t.target)?M_(e.Jt,t.target):L_(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Tb(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Hx(e){var t=F_({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Zb(t,t.limit,"L"):t}function Gx(e,t){return new Mx(t.largestBatchId,D_(e.Jt,t.overlayMutation))}function Kx(e,t){var n=t.path.lastSegment();return[e,K_(t.path.popLast()),n]}var Yx=function(){function e(){x(this,e)}return E(e,[{key:"getBundleMetadata",value:function(e,t){return Qx(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:qx(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Qx(e).put({bundleId:(n=t).id,createTime:Vx(w_(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Jx(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Hx(t.bundledQuery),readTime:qx(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Jx(e).put(function(e){return{name:e.name,readTime:Vx(w_(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Qx(e){return Ax(e,"bundles")}function Jx(e){return Ax(e,"namedQueries")}var Xx=function(){function e(t,n){x(this,e),this.M=t,this.userId=n}return E(e,[{key:"getOverlay",value:function(e,t){var n=this;return Zx(e).get(Kx(this.userId,t)).next((function(e){return e?Gx(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Mx(t,a);i.push(r.Xt(e,o))})),wx.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(K_(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Zx(e).Qt("collectionPathOverlayIndex",i))})),wx.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=e_(),a=K_(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Zx(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Gx(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=e_(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zx(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=Gx(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return Zx(e).put(function(e,t,n){var r=c(Kx(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:O_(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Zx(e){return Ax(e,"documentOverlays")}var $x=function(){function e(){x(this,e)}return E(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Dk(e.integerValue));else if("doubleValue"in e){var n=Dk(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Bk(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Mk(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?sb(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tk()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Wk.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function eT(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function tT(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=eT(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}$x.fe=new $x;var nT=function(){function e(){x(this,e),this.buffer=new Uint8Array(1024),this.position=0}return E(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=tT(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=tT(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),rT=function(){function e(t){x(this,e),this.De=t}return E(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),iT=function(){function e(t){x(this,e),this.De=t}return E(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),aT=function(){function e(){x(this,e),this.De=new nT,this.Ce=new rT(this.De),this.xe=new iT(this.De)}return E(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),oT=function(){function e(t,n,r,i){x(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return E(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function sT(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=uT(e.arrayValue,t.arrayValue))?n:0!==(n=uT(e.directionalValue,t.directionalValue))?n:Wk.comparator(e.documentKey,t.documentKey)}function uT(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var cT=function(){function e(t){x(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=b(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return E(e,[{key:"$e",value:function(e){var t=pb(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=vb(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=b(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),lT=function(){function e(){x(this,e),this.qe=new hT}return E(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),wx.resolve()}},{key:"getCollectionParents",value:function(e,t){return wx.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return wx.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return wx.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return wx.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return wx.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return wx.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return wx.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return wx.resolve()}},{key:"updateIndexEntries",value:function(e,t){return wx.resolve()}}]),e}(),hT=function(){function e(){x(this,e),this.index={}}return E(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Kw(Sk.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Kw(Sk.comparator)).toArray()}}]),e}(),fT=new Uint8Array(0),dT=function(){function e(t){x(this,e),this.user=t,this.Ge=new hT,this.Ke=new zw((function(e){return Tb(e)}),(function(e,t){return Eb(e,t)})),this.uid=t.uid||""}return E(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ge.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ge.add(t)}));var a={collectionId:r,parent:K_(i)};return pT(e).put(a)}return wx.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[bk(t),""],!1,!0);return pT(e).qt(r).next((function(e){var r,i=b(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(J_(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=mT(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=mT(e),r=yT(e),i=vT(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=vT(e),i=!0,a=new Map;return wx.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=r_();return wx.forEach(a,(function(i,a){var o;Xg("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Tb(t)));var s=function(e,t){var n=pb(t);if(void 0===n)return null;var r,i=b(Sb(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),u=function(e,t){var n,r=new Map,i=b(vb(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=b(Sb(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=b(vb(t));try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c=void 0,l=!0,h=b(Sb(e,u.fieldPath));try{for(h.s();!(s=h.n()).done;){var f=s.value,d=void 0,p=!0;switch(f.op){case"<":case"<=":d="nullValue"in(r=f.value)?Gk:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?eb(Vk.empty(),Wk.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:tk();break;case"==":case"in":case">=":d=f.value;break;case">":d=f.value,p=!1;break;case"!=":case"not-in":d=Gk}ub(c,d)===d&&(c=d,l=p)}}catch(y){h.e(y)}finally{h.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(u.fieldPath)){var m=e.startAt.position[v];ub(c,m)===m&&(c=m,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(y){o.e(y)}finally{o.f()}return new Fb(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=b(vb(t));try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c=void 0,l=!0,h=b(Sb(e,u.fieldPath));try{for(h.s();!(s=h.n()).done;){var f=s.value,d=void 0,p=!0;switch(f.op){case">=":case">":d="nullValue"in(r=f.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?eb(Vk.empty(),Wk.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Hk:tk(),p=!1;break;case"==":case"in":case"<=":d=f.value;break;case"<":d=f.value,p=!1;break;case"!=":case"not-in":d=Hk}cb(c,d)===d&&(c=d,l=p)}}catch(y){h.e(y)}finally{h.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(u.fieldPath)){var m=e.endAt.position[v];cb(c,m)===m&&(c=m,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(y){o.e(y)}finally{o.f()}return new Fb(i,a)}(a,i),h=n.je(i,a,c),f=n.je(i,a,l),d=n.We(i,a,u),p=n.ze(i.indexId,s,h,!!c&&c.inclusive,f,!!l&&l.inclusive,d);return wx.forEach(p,(function(n){return r.Kt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new Wk(J_(t.documentKey)))}))}))}))})).next((function(){return e}))}return wx.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=u/(null!=t?t.length:1),l=[],h=function(u){var h=t?s.He(t[u/c]):fT,f=n?s.Je(e,h,n[u%c],r):s.Ye(e),d=i?s.Xe(e,h,i[u%c],a):s.Ye(e+1);l.push.apply(l,S(s.createRange(f,d,o.map((function(t){return s.Je(e,h,t,!0)})))))},f=0;f<u;++f)h(f);return l}},{key:"Je",value:function(e,t,n,r){var i=new oT(e,Wk.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new oT(e,Wk.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new oT(e,Wk.empty(),fT,fT)}},{key:"getFieldIndex",value:function(e,t){var n=new cT(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new aT,i=b(vb(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);$x.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new aT;return $x.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new aT);var i,a=0,o=b(vb(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=b(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.tn(t,u.fieldPath)&&nb(c))r=this.en(r,u,c);else{var f=h.Ne(u.kind);$x.fe.Zt(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=S(e),a=[],o=b(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=b(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new aT;h.seed(l.Se()),$x.fe.Zt(u,h.Ne(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Cb&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=mT(e),i=yT(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return wx.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new yb(t.sequenceNumber,new bb(qx(t.readTime),new Wk(J_(t.documentKey)),t.largestBatchId)):yb.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new mb(Nk.fromServerFormat(n),r)}));return new db(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:gk(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=mT(e),a=yT(e);return this.sn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return wx.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Vx(r.readTime),documentKey:K_(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return wx.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?wx.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),wx.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?wx.resolve():n.un(e,i,t,a)}))}))}))}))}},{key:"an",value:function(e,t,n){return vT(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:K_(t.key.path)})}},{key:"cn",value:function(e,t,n){return vT(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,K_(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=vT(e),i=new Kw(sT);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,K_(t.path)])},(function(e,r){i=i.add(new oT(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new Kw(sT),r=this.Ze(t,e);if(null==r)return n;var i=pb(t);if(null!=i){var a=e.data.field(i.fieldPath);if(nb(a)){var o,s=b(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new oT(t.indexId,e.key,this.He(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new oT(t.indexId,e.key,fT,r));return n}},{key:"un",value:function(e,t,n,r){var i=this;Xg("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=Qw(a),u=Qw(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=Qw(o)):l?(i(s),s=Qw(a)):(s=Qw(a),u=Qw(o))}}(n,r,sT,(function(n){a.push(i.an(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),wx.waitFor(a)}},{key:"sn",value:function(e){var t=1;return yT(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return sT(e,t)})).filter((function(e,t,n){return!t||0!==sT(e,n[t-1])}));var r=[];r.push(e);var i,a=b(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=sT(o,e),u=sT(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function pT(e){return Ax(e,"collectionParents")}function vT(e){return Ax(e,"indexEntries")}function mT(e){return Ax(e,"indexConfiguration")}function yT(e){return Ax(e,"indexState")}var gT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kT=function(){function e(t,n,r){x(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return E(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function bT(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){nk(1===s)})));var c,l=[],h=b(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=$_(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return wx.waitFor(a).next((function(){return l}))}function wT(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw tk();t=e.noDocument}return JSON.stringify(t).length}kT.DEFAULT_COLLECTION_PERCENTILE=10,kT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kT.DEFAULT=new kT(41943040,kT.DEFAULT_COLLECTION_PERCENTILE,kT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kT.DISABLED=new kT(-1,0,0);var _T=function(){function e(t,n,r,i){x(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return E(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return TT(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ET(e),o=TT(e);return o.add({}).next((function(s){nk("number"==typeof s);var u,c=new Ox(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return O_(e.Jt,t)})),i=n.mutations.map((function(t){return O_(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),h=[],f=new Kw((function(e,t){return gk(e.canonicalString(),t.canonicalString())})),d=b(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=$_(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,ex))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[s]=c.keys()})),wx.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return TT(e).get(t).next((function(e){return e?(nk(e.userId===n.userId),Bx(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?wx.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return TT(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(nk(t.batchId>=r),a=Bx(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return TT(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return TT(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Bx(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Z_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ET(e).Wt({range:i},(function(r,i,o){var s=c(r,3),u=s[0],l=s[1],h=s[2],f=J_(l);if(u===n.userId&&t.path.isEqual(f))return TT(e).get(h).next((function(e){if(!e)throw tk();nk(e.userId===n.userId),a.push(Bx(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kw(gk),i=[];return t.forEach((function(t){var a=Z_(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=ET(e).Wt({range:o},(function(e,i,a){var o=c(e,3),s=o[0],u=o[1],l=o[2],h=J_(u);s===n.userId&&t.path.isEqual(h)?r=r.add(l):a.done()}));i.push(s)})),wx.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Z_(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new Kw(gk);return ET(e).Wt({range:o},(function(e,t,a){var o=c(e,3),u=o[0],l=o[1],h=o[2],f=J_(l);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(h)):a.done()})).next((function(){return n.fn(e,s)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(TT(e).get(t).next((function(e){if(null===e)throw tk();nk(e.userId===n.userId),r.push(Bx(n.M,e))})))})),wx.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return bT(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),wx.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return wx.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return ET(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=J_(e[1]);i.push(a)}else r.done()})).next((function(){nk(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return xT(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return IT(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return nk(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function xT(e,t,n){var r=Z_(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return ET(e).Wt({range:a,jt:!0},(function(e,n,r){var a=c(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function TT(e){return Ax(e,"mutations")}function ET(e){return Ax(e,"documentMutations")}function IT(e){return Ax(e,"mutationQueues")}var ST=function(){function e(t){x(this,e),this.wn=t}return E(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),CT=function(){function e(t,n){x(this,e),this.referenceDelegate=t,this.M=n}return E(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new ST(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return _k.fromTimestamp(new wk(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return NT(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return nk(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return NT(e).Wt((function(o,s){var u=zx(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return wx.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return NT(e).Wt((function(e,n){var r=zx(n);t(r)}))}},{key:"yn",value:function(e){return RT(e).get("targetGlobalKey").next((function(e){return nk(null!==e),e}))}},{key:"pn",value:function(e,t){return RT(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return NT(e).put(Wx(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Tb(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return NT(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=zx(n);Eb(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=PT(e);return t.forEach((function(t){var o=K_(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),wx.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=PT(e);return wx.forEach(t,(function(t){var a=K_(t.path);return wx.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=PT(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=PT(e),i=r_();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=J_(e[1]),a=new Wk(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=K_(t.path),r=IDBKeyRange.bound([n],[bk(n)],!1,!0),i=0;return PT(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return NT(e).get(t).next((function(e){return e?zx(e):null}))}}]),e}();function NT(e){return Ax(e,"targets")}function RT(e){return Ax(e,"targetGlobal")}function PT(e){return Ax(e,"targetDocuments")}function AT(e){return OT.apply(this,arguments)}function OT(){return OT=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ik.FAILED_PRECONDITION&&t.message===kx){e.next=2;break}throw t;case 2:Xg("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),OT.apply(this,arguments)}function DT(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],s=a[1],u=gk(r,o);return 0===u?gk(i,s):u}var MT=function(){function e(t){x(this,e),this.En=t,this.buffer=new Kw(DT),this.An=0}return E(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();DT(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),LT=function(){function e(t,n){x(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return E(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;Xg("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,_(R().mark((function n(){return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Ix(n.t0)){n.next=12;break}Xg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,AT(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),FT=function(){function e(t,n){x(this,e),this.Sn=t,this.params=n}return E(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return wx.resolve(vk.A);var r=new MT(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Xg("LruGarbageCollector","Garbage collection skipped; disabled"),wx.resolve(gT)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Xg("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),gT):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Xg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Jg()<=Le.DEBUG&&Xg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),wx.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),jT=function(){function e(t,n){x(this,e),this.db=t,this.garbageCollector=function(e,t){return new FT(e,t)}(this,n)}return E(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return UT(e,n)}},{key:"removeReference",value:function(e,t,n){return UT(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return UT(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return IT(e).zt((function(r){return xT(e,r,t).next((function(e){return e&&(n=!0),wx.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,s){if(s<=t){var u=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,_k.min()),PT(e).delete([0,K_(o.path)])}))}));i.push(u)}})).next((function(){return wx.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return UT(e,t)}},{key:"kn",value:function(e,t){var n,r=PT(e),i=vk.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==vk.A&&t(new Wk(J_(n)),i),i=u,n=s):i=vk.A})).next((function(){i!==vk.A&&t(new Wk(J_(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function UT(e,t){return PT(e).put(function(e,t){return{targetId:0,path:K_(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var VT=function(){function e(){x(this,e),this.changes=new zw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return E(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,fb.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?wx.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),qT=function(){function e(t){x(this,e),this.M=t}return E(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return WT(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return WT(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ux(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=fb.newInvalidDocument(t);return WT(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(HT(t))},(function(e,i){r=n.Fn(t,i)})).next((function(){return r}))}},{key:"$n",value:function(e,t){var n=this,r={size:0,document:fb.newInvalidDocument(t)};return WT(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(HT(t))},(function(e,i){r={document:n.Fn(t,i),size:wT(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Xw();return this.Bn(e,t,(function(e,t){var i=n.Fn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=Xw(),i=new Ww(Wk.comparator);return this.Bn(e,t,(function(e,t){var a=n.Fn(e,t);r=r.insert(e,a),i=i.insert(e,wT(t))})).next((function(){return{documents:r,Un:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return wx.resolve();var r=new Kw(KT);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(HT(r.first()),HT(r.last())),a=r.getIterator(),o=a.getNext();return WT(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Wk.fromSegments([].concat(S(t.prefixPath),[t.collectionGroup,t.documentId]));o&&KT(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(HT(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Ux(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return WT(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Xw(),i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Fn(Wk.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Xw(),o=GT(t,n),s=GT(t,bb.max());return WT(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.Fn(Wk.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new BT(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return zT(e).get("remoteDocumentGlobalKey").next((function(e){return nk(!!e),e}))}},{key:"On",value:function(e,t){return zT(e).put("remoteDocumentGlobalKey",t)}},{key:"Fn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=P_(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Wk.fromSegments(t.noDocument.path),i=qx(t.noDocument.readTime);n=fb.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return tk();var a=Wk.fromSegments(t.unknownDocument.path),o=qx(t.unknownDocument.version);n=fb.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new wk(e[0],e[1]);return _k.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(_k.min()))return n}return fb.newInvalidDocument(e)}}]),e}(),BT=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).qn=e,i.trackRemovals=r,i.Gn=new zw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return E(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Kw((function(e,t){return gk(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Gn.get(a);if(n.push(t.qn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=jx(t.qn.M,o);i=i.add(a.path.popLast());var c=wT(u);r+=c-s.size,n.push(t.qn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=jx(t.qn.M,o.convertToNoDocument(_k.min()));n.push(t.qn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.qn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.qn.updateMetadata(e,r)),wx.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.qn.$n(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.qn.Ln(e,t).next((function(e){var t=e.documents;return e.Un.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(VT);function zT(e){return Ax(e,"remoteDocumentGlobal")}function WT(e){return Ax(e,"remoteDocumentsV14")}function HT(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function GT(e,t){var n=t.documentKey.path.toArray();return[e,Ux(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function KT(e,t){var n=e.path.length-t.path.length;return 0!==n?n:Wk.comparator(e,t)}var YT=function(){function e(t){x(this,e),this.M=t}return E(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new _x("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X_,{unique:!0}),e.createObjectStore("documentMutations")}(e),QT(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=wx.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),QT(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_k.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X_,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return wx.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Kn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:fx});t.createIndex("collectionPathOverlayIndex",dx,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",px,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:tx});t.createIndex("documentKeyIndex",nx),t.createIndex("collectionGroupIndex",rx)}(e)})).next((function(){return i.Hn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ux}).createIndex("sequenceNumberIndex",cx,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:lx}).createIndex("documentKeyIndex",hx,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=wT(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Kn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return wx.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return wx.forEach(r,(function(r){nk(r.userId===n.userId);var i=Bx(t.M,r);return bT(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Sk(n),o=function(e){return[0,K_(e)]}(a);r.push(t.get(o).next((function(n){return n?wx.resolve():function(n){return t.put({targetId:0,path:K_(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return wx.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:sx});var n=t.store("collectionParents"),r=new hT,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:K_(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Sk(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],J_(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=zx(r),a=Wx(t.M,i);return n.put(a)}))}},{key:"Hn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Wk(Sk.fromString(i.document.name).popFirst(5)):i.noDocument?Wk.fromSegments(i.noDocument.path):i.unknownDocument?Wk.fromSegments(i.unknownDocument.path):tk()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return wx.waitFor(r)}))}}]),e}();function QT(e){e.createObjectStore("targetDocuments",{keyPath:ax}).createIndex("documentTargetsIndex",ox,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ix,{unique:!0}),e.createObjectStore("targetGlobal")}var JT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",XT=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(x(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Jn=a,this.window=o,this.document=s,this.Yn=c,this.Xn=l,this.Zn=h,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=function(e){return Promise.resolve()},!e.vt())throw new ak(ik.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jT(this,i),this.cs=n+"main",this.M=new Fx(u),this.hs=new xx(this.cs,this.Zn,new YT(this.M)),this.ls=new CT(this.referenceDelegate,this.M),this.fs=function(e){return new qT(e)}(this.M),this.ds=new Yx,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===l&&Zg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return E(e,[{key:"start",value:function(){var e=this;return this.ws().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ak(ik.FAILED_PRECONDITION,JT);return e.gs(),e.ys(),e.ps(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ls.getHighestSequenceNumber(t)}))})).then((function(t){e.ts=new vk(t,e.Yn)})).then((function(){e.es=!0})).catch((function(t){return e.hs&&e.hs.close(),Promise.reject(t)}))}},{key:"Is",value:function(e){var t=this;return this.us=function(){var n=_(R().mark((function n(r){return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.hs.Ot(function(){var t=_(R().mark((function t(n){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget(_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ws();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ws",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return $T(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ts(t).next((function(t){t||(e.isPrimary=!1,e.Jn.enqueueRetryable((function(){return e.us(!1)})))}))})).next((function(){return e.Es(t)})).next((function(n){return e.isPrimary&&!n?e.As(t).next((function(){return!1})):!!n&&e.Rs(t).next((function(){return!0}))}))})).catch((function(t){if(Ix(t))return Xg("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Xg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Jn.enqueueRetryable((function(){return e.us(t)})),e.isPrimary=t}))}},{key:"Ts",value:function(e){var t=this;return ZT(e).get("owner").next((function(e){return wx.resolve(t.bs(e))}))}},{key:"Ps",value:function(e){return $T(e).delete(this.clientId)}},{key:"Vs",value:function(){var e=_(R().mark((function e(){var t,n,r,i,a=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vs(this.os,18e5)){e.next=6;break}return this.os=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ax(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ss(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return wx.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._s){n=b(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._s.removeItem(this.Ds(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ps",value:function(){var e=this;this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ws().then((function(){return e.Vs()})).then((function(){return e.ps()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Es",value:function(e){var t=this;return this.Xn?wx.resolve(!0):ZT(e).get("owner").next((function(n){if(null!==n&&t.vs(n.leaseTimestampMs,5e3)&&!t.Cs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new ak(ik.FAILED_PRECONDITION,JT);return!1}}return!(!t.networkEnabled||!t.inForeground)||$T(e).qt().next((function(e){return void 0===t.Ss(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Xg("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=_(R().mark((function e(){var t=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),e.next=7,this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Px(e,vk.A);return t.As(n).next((function(){return t.Ps(n)}))}));case 7:this.hs.close(),this.Ms();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ss",value:function(e,t){var n=this;return e.filter((function(e){return n.vs(e.updateTimeMs,t)&&!n.Cs(e.clientId)}))}},{key:"Os",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return $T(t).qt().next((function(t){return e.Ss(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.es}},{key:"getMutationQueue",value:function(e,t){return _T.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getIndexManager",value:function(e){return new dT(e)}},{key:"getDocumentOverlayCache",value:function(e){return Xx.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Xg("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=14===(i=this.Zn)?gx:13===i?yx:12===i?mx:11===i?vx:void tk();return this.hs.runTransaction(e,o,s,(function(i){return a=new Px(i,r.ts?r.ts.next():vk.A),"readwrite-primary"===t?r.Ts(a).next((function(e){return!!e||r.Es(a)})).next((function(t){if(!t)throw Zg("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Jn.enqueueRetryable((function(){return r.us(!1)})),new ak(ik.FAILED_PRECONDITION,kx);return n(a)})).next((function(e){return r.Rs(a).next((function(){return e}))})):r.Fs(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e){var t=this;return ZT(e).get("owner").next((function(e){if(null!==e&&t.vs(e.leaseTimestampMs,5e3)&&!t.Cs(e.ownerId)&&!t.bs(e)&&!(t.Xn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ak(ik.FAILED_PRECONDITION,JT)}))}},{key:"Rs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ZT(e).put("owner",t)}},{key:"As",value:function(e){var t=this,n=ZT(e);return n.get("owner").next((function(e){return t.bs(e)?(Xg("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):wx.resolve()}))}},{key:"vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Zg("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gs",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=function(){e.Jn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ws()}))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ns",value:function(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}},{key:"ys",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=function(){t.xs(),!Q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Jn.enterRestrictedMode(!0),t.Jn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ns))}},{key:"ks",value:function(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}},{key:"Cs",value:function(e){var t;try{var n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Xg("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Zg("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xs",value:function(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(Kp){Zg("Failed to set zombie client id.",Kp)}}},{key:"Ms",value:function(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(Kp){}}},{key:"Ds",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return xx.vt()}}]),e}();function ZT(e){return Ax(e,"owner")}function $T(e){return Ax(e,"clientMetadata")}function eE(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var tE=function(){function e(t,n,r){x(this,e),this.fs=t,this.$s=n,this.indexManager=r}return E(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=b(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,i=b(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return Wk.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):Qb(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new Wk(t)).next((function(e){var t=$w();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=$w();return this.indexManager.getCollectionParents(e,i).next((function(o){return wx.forEach(o,(function(o){var s=function(e,t){return new Bb(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=b(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=fb.newInvalidDocument(u),r=r.insert(u,c)),Sw(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){nw(t,n)||(r=r.remove(e))})),r}))}}]),e}(),nE=function(){function e(t,n,r,i){x(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return E(e,null,[{key:"Js",value:function(t,n){var r,i=r_(),a=r_(),o=b(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),rE=function(){function e(){x(this,e)}return E(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(_k.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(a){var o=i.ti(t,a);return(Hb(t)||Gb(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(Jg()<=Le.DEBUG&&Xg("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),tw(t)),i.Xs.Ks(e,t,gb(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new Kw(iw(e));return t.forEach((function(t,r){nw(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return Jg()<=Le.DEBUG&&Xg("QueryEngine","Using full collection scan to execute query:",tw(t)),this.Xs.Ks(e,t,bb.min())}}]),e}(),iE=function(){function e(t,n,r,i){x(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new Ww(gk),this.ii=new zw((function(e){return Tb(e)}),Eb),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return E(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new tE(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function aE(e,t,n,r){return new iE(e,t,n,r)}function oE(e,t){return sE.apply(this,arguments)}function sE(){return sE=_(R().mark((function e(t,n){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rk(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(i){return t=i,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=r_(),u=b(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=b(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=b(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=b(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ai.qs(e,s).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),sE.apply(this,arguments)}function uE(e,t){var n=rk(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=wx.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);nk(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function cE(e){var t=rk(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function lE(e,t){var n=rk(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.ls.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.ls.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Pk.EMPTY_BYTE_STRING,_k.min()).withLastLimboFreeSnapshotVersion(_k.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.ls.updateTargetData(e,c))}}));var s=Xw();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(hE(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(_k.min())){var u=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return wx.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ai.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.si=i,e}))}function hE(e,t,n){var r=r_();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Xw();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(_k.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Xg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function fE(e,t){var n=rk(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function dE(e,t){var n=rk(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(i){return i?(r=i,wx.resolve(r)):n.ls.allocateTargetId(e).next((function(i){return r=new Lx(t,i,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function pE(e,t,n){return vE.apply(this,arguments)}function vE(){return vE=_(R().mark((function e(t,n,r){var i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=rk(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ix(e.t1)){e.next=12;break}throw e.t1;case 12:Xg("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),vE.apply(this,arguments)}function mE(e,t,n){var r=rk(e),i=_k.min(),a=r_();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=rk(e),i=r.ii.get(n);return void 0!==i?wx.resolve(r.si.get(i)):r.ls.getTargetData(t,n)}(r,e,Xb(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Ks(e,t,n?i:_k.min(),n?a:r_())})).next((function(e){return kE(r,rw(t),e),{documents:e,hi:a}}))}))}function yE(e,t){var n=rk(e),r=rk(n.ls),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function gE(e,t){var n=rk(e),r=n.ri.get(t)||_k.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.oi.getAllFromCollectionGroup(e,t,gb(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return kE(n,t,e),e}))}function kE(e,t,n){var r=_k.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}function bE(e,t,n,r){return wE.apply(this,arguments)}function wE(){return wE=_(R().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=rk(t),o=r_(),s=Xw(),u=b(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.li(l.metadata.name),l.document&&(o=o.add(h)),(f=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,dE(a,function(e){return Xb(Wb(Sk.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return hE(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.ls.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.ls.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ai.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),wE.apply(this,arguments)}function _E(e,t){return xE.apply(this,arguments)}function xE(){return xE=_(R().mark((function e(t,n){var r,i,a,o=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:r_(),e.next=3,dE(t,Xb(Hx(n.bundledQuery)));case 3:return i=e.sent,a=rk(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=w_(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.ds.saveNamedQuery(e,n);var o=i.withResumeToken(Pk.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.ls.updateTargetData(e,o).next((function(){return a.ls.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ls.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),xE.apply(this,arguments)}var TE=function(){function e(t){x(this,e),this.M=t,this._i=new Map,this.wi=new Map}return E(e,[{key:"getBundleMetadata",value:function(e,t){return wx.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:w_(n.createTime)}),wx.resolve()}},{key:"getNamedQuery",value:function(e,t){return wx.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:Hx(e.bundledQuery),readTime:w_(e.readTime)}}(t)),wx.resolve()}}]),e}(),EE=function(){function e(){x(this,e),this.overlays=new Ww(Wk.comparator),this.mi=new Map}return E(e,[{key:"getOverlay",value:function(e,t){return wx.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),wx.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),wx.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=e_(),i=t.length+1,a=new Wk(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return wx.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Ww((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=e_(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=e_(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return wx.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Mx(t,n));var a=this.mi.get(t);void 0===a&&(a=r_(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),IE=function(){function e(){x(this,e),this.gi=new Kw(SE.yi),this.pi=new Kw(SE.Ii)}return E(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new SE(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new SE(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new Wk(new Sk([])),r=new SE(n,e),i=new SE(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new Wk(new Sk([])),n=new SE(t,e),r=new SE(t,e+1),i=r_();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new SE(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),SE=function(){function e(t,n){x(this,e),this.key=t,this.Vi=n}return E(e,null,[{key:"yi",value:function(e,t){return Wk.comparator(e.key,t.key)||gk(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return gk(e.Vi,t.Vi)||Wk.comparator(e.key,t.key)}}]),e}(),CE=function(){function e(t,n){x(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new Kw(SE.yi)}return E(e,[{key:"checkEmpty",value:function(e){return wx.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var a=new Ox(i,t,n,r);this.$s.push(a);var o,s=b(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Si=this.Si.add(new SE(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return wx.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return wx.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return wx.resolve(this.$s.length>i?this.$s[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return wx.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return wx.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new SE(t,0),i=new SE(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),wx.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kw(gk);return t.forEach((function(e){var t=new SE(e,0),i=new SE(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),wx.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Wk.isDocumentKey(i)||(i=i.child(""));var a=new SE(new Wk(i),0),o=new Kw(gk);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),wx.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;nk(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return wx.forEach(t.mutations,(function(i){var a=new SE(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new SE(t,0),r=this.Si.firstAfterOrEqual(n);return wx.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,wx.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),NE=function(){function e(t){x(this,e),this.ki=t,this.docs=new Ww(Wk.comparator),this.size=0}return E(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return wx.resolve(n?n.document.mutableCopy():fb.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Xw();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():fb.newInvalidDocument(e))})),wx.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Xw(),i=new Wk(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||wb(kb(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return wx.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){tk()}},{key:"Mi",value:function(e,t){return wx.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new RE(this)}},{key:"getSize",value:function(e){return wx.resolve(this.size)}}]),e}(),RE=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this)).qn=e,r}return E(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.qn.addEntry(e,i)):t.qn.removeEntry(r)})),wx.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}(VT),PE=function(){function e(t){x(this,e),this.persistence=t,this.Oi=new zw((function(e){return Tb(e)}),Eb),this.lastRemoteSnapshotVersion=_k.min(),this.highestTargetId=0,this.Fi=0,this.$i=new IE,this.targetCount=0,this.Bi=ST.mn()}return E(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),wx.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return wx.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return wx.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),wx.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),wx.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new ST(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,wx.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),wx.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,wx.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),wx.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return wx.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return wx.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),wx.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),wx.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),wx.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return wx.resolve(n)}},{key:"containsKey",value:function(e,t){return wx.resolve(this.$i.containsKey(t))}}]),e}(),AE=function(){function e(t,n){var r=this;x(this,e),this.Li={},this.overlays={},this.ts=new vk(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new PE(this),this.indexManager=new lT,this.fs=new NE((function(e){return r.referenceDelegate.Ui(e)})),this.M=new Fx(n),this.ds=new TE(this.M)}return E(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new EE,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new CE(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Xg("MemoryPersistence","Starting transaction:",e);var i=new OE(this.ts.next());return this.referenceDelegate.qi(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return wx.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),OE=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return E(n)}(bx),DE=function(){function e(t){x(this,e),this.persistence=t,this.Qi=new IE,this.ji=null}return E(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw tk()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),wx.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),wx.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),wx.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wx.forEach(this.zi,(function(r){var i=Wk.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,_k.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return wx.or([function(){return wx.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function ME(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function LE(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function FE(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var jE=function(){function e(t,n,r,i){x(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return E(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new ak(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Zg("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),UE=function(){function e(t,n,r){x(this,e),this.targetId=t,this.state=n,this.error=r}return E(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ak(i.error.code,i.error.message))),a?new e(t,i.state,r):(Zg("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),VE=function(){function e(t,n){x(this,e),this.clientId=t,this.activeTargetIds=n}return E(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=a_(),o=0;i&&o<r.activeTargetIds.length;++o)i=zk(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Zg("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),qE=function(){function e(t,n){x(this,e),this.clientId=t,this.onlineState=n}return E(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Zg("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),BE=function(){function e(){x(this,e),this.activeTargetIds=a_()}return E(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),zE=function(){function e(t,n,r,i,a){x(this,e),this.window=t,this.Jn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Ww(gk),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=ME(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new BE),this.ar=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return E(e,[{key:"start",value:function(){var e=_(R().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Os();case 2:t=e.sent,n=b(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(ME(this.persistenceKey,i)))&&(o=VE.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(s=this.storage.getItem(this.lr))&&(u=this.wr(s))&&this.mr(u),c=b(this.ir);try{for(c.s();!(l=c.n()).done;)h=l.value,this.nr(h)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(FE(this.persistenceKey,e));if(n){var r=UE.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(FE(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Xg("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Xg("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Xg("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Xg("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Zg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable(_(R().mark((function e(){var r,i,a,o,s,u,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.ar.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(s));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}u=function(e){var t=vk.A;if(null!=e)try{var n=JSON.parse(e);nk("number"==typeof n),t=n}catch(e){Zg("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==vk.A&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new jE(this.currentUser,e,t,n),i=LE(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=LE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=FE(this.persistenceKey,e),i=new UE(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.ar.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return VE.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return jE.Ji(new Kg(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return UE.Ji(r,t)}},{key:"wr",value:function(e){return qE.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"vr",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:Xg("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Or(o,s).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=a_();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),WE=function(){function e(){x(this,e),this.Fr=new BE,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return E(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new BE,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),HE=function(){function e(){x(this,e)}return E(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),GE=function(){function e(){var t=this;x(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return E(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Xg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=b(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Xg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=b(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),KE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},YE=function(){function e(t){x(this,e),this.jr=t.jr,this.Wr=t.Wr}return E(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),QE=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return E(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Hg;o.listenOnce(Vg.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ug.NO_ERROR:var t=o.getResponseJson();Xg("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ug.TIMEOUT:Xg("Connection",'RPC "'+e+'" timed out'),a(new ak(ik.DEADLINE_EXCEEDED,"Request time out"));break;case Ug.HTTP_ERROR:var n=o.getStatus();if(Xg("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ik).indexOf(t)>=0?t:ik.UNKNOWN}(r.status);a(new ak(s,r.message))}else a(new ak(ik.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ak(ik.UNAVAILABLE,"Connection failed."));break;default:tk()}}finally{Xg("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Fg(),a=jg(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new zg({})),this.uo(o.initMessageHeaders,t,n),Y()||X()||K().indexOf("Electron/")>=0||Z()||K().indexOf("MSAppHost/")>=0||J()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Xg("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new YE({jr:function(e){l?Xg("Connection","Not sending because WebChannel is closed:",e):(c||(Xg("Connection","Opening WebChannel transport."),u.open(),c=!0),Xg("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,Wg.EventType.OPEN,(function(){l||Xg("Connection","WebChannel transport opened.")})),f(u,Wg.EventType.CLOSE,(function(){l||(l=!0,Xg("Connection","WebChannel transport closed"),h.eo())})),f(u,Wg.EventType.ERROR,(function(e){l||(l=!0,$g("Connection","WebChannel transport errored:",e),h.eo(new ak(ik.UNAVAILABLE,"The operation could not be completed")))})),f(u,Wg.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];nk(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Xg("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Lw[e];if(void 0!==t)return Bw(t)}(a),s=i.message;void 0===o&&(o=ik.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.eo(new ak(o,s)),u.close()}else Xg("Connection","WebChannel received:",n),h.no(n)}})),f(a,qg.STAT_EVENT,(function(e){e.stat===Bg.PROXY?Xg("Connection","Detected buffering proxy"):e.stat===Bg.NOPROXY&&Xg("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){x(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return E(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Xg("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.ao(e,a,o,n).then((function(e){return Xg("RestConnection","Received: ",e),e}),(function(t){throw $g("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=KE[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function JE(){return"undefined"!=typeof window?window:null}function XE(){return"undefined"!=typeof document?document:null}function ZE(e){return new y_(e,!0)}var $E=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;x(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return E(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Xg("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),eI=function(){function e(t,n,r,i,a,o,s,u){x(this,e),this.Jn=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new $E(t,n)}return E(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===ik.RESOURCE_EXHAUSTED?(Zg(n.toString()),Zg("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===ik.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new ak(ik.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(_(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Xg("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():(Xg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),tI=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return x(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return E(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:tk()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(nk(void 0===t||"string"==typeof t),Pk.fromBase64String(t||"")):(nk(void 0===t||t instanceof Uint8Array),Pk.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?ik.UNKNOWN:Bw(e.code);return new ak(t,e.message||"")}(o);n=new l_(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=E_(e,u.document.name),l=w_(u.document.updateTime),h=new lb({mapValue:{fields:u.document.fields}}),f=fb.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new u_(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=E_(e,v.document),y=v.readTime?w_(v.readTime):_k.min(),g=fb.newNoDocument(m,y),k=v.removedTargetIds||[];n=new u_([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=E_(e,b.document),_=b.removedTargetIds||[];n=new u_([],_,w,null)}else{if(!("filter"in t))return tk();t.filter;var x=t.filter;x.targetId;var T=x.count||0,E=new Vw(T),I=x.targetId;n=new c_(I,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return _k.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?_k.min():t.readTime?w_(t.readTime):_k.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=C_(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Ib(r)?{documents:M_(e,r)}:{query:L_(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=k_(e,t.resumeToken):t.snapshotVersion.compareTo(_k.min())>0&&(n.readTime=g_(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tk()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=C_(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(eI),nI=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return x(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Wo=!1,u}return E(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,f(l(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(nk(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(nk(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?w_(e.updateTime):w_(t);return n.isEqual(_k.min())&&(n=w_(t)),new _w(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=w_(e.commitTime);return this.listener.Jo(n,t)}return nk(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=C_(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return O_(t.M,e)}))};this.Oo(n)}}]),n}(eI),rI=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o;return x(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.Zo=!1,o}return E(n,[{key:"tu",value:function(){if(this.Zo)throw new ak(ik.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],s=a[1];return r.bo.ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ik.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ak(ik.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],s=a[1];return r.bo.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ik.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ak(ik.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return E((function e(){x(this,e)}))}()),iI=function(){function e(t,n){x(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return E(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Zg(t),this.su=!1):Xg("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),aI=E((function e(t,n,r,i,a){var o=this;x(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=mI(o),!e.t0){e.next=5;break}return Xg("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=rk(t)).lu.add(4),e.next=4,uI(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,oI(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new iI(r,i)}));function oI(e){return sI.apply(this,arguments)}function sI(){return sI=_(R().mark((function e(t){var n,r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mI(t)){e.next=18;break}n=b(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),sI.apply(this,arguments)}function uI(e){return cI.apply(this,arguments)}function cI(){return cI=_(R().mark((function e(t){var n,r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),cI.apply(this,arguments)}function lI(e,t){var n=rk(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),vI(n)?pI(n):HI(n).Co()&&fI(n,t))}function hI(e,t){var n=rk(e),r=HI(n);n.hu.delete(t),r.Co()&&dI(n,t),0===n.hu.size&&(r.Co()?r.ko():mI(n)&&n._u.set("Unknown"))}function fI(e,t){e.wu.Z(t.targetId),HI(e).Qo(t)}function dI(e,t){e.wu.Z(t),HI(e).jo(t)}function pI(e){e.wu=new f_({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),HI(e).start(),e._u.iu()}function vI(e){return mI(e)&&!HI(e).Do()&&e.hu.size>0}function mI(e){return 0===rk(e).lu.size}function yI(e){e.wu=void 0}function gI(e){return kI.apply(this,arguments)}function kI(){return kI=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){fI(t,e)}));case 1:case"end":return e.stop()}}),e)}))),kI.apply(this,arguments)}function bI(e,t){return wI.apply(this,arguments)}function wI(){return wI=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yI(t),vI(t)?(t._u.uu(n),pI(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),wI.apply(this,arguments)}function _I(e,t,n){return xI.apply(this,arguments)}function xI(){return xI=_(R().mark((function e(t,n,r){var i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof l_&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=_(R().mark((function e(t,n){var r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=b(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Xg("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,TI(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof u_?t.wu.ut(n):n instanceof c_?t.wu._t(n):t.wu.ht(n),r.isEqual(_k.min())){e.next=29;break}return e.prev=14,e.next=17,cE(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Pk.EMPTY_BYTE_STRING,n.snapshotVersion)),dI(e,t);var r=new Lx(n.target,t,1,n.sequenceNumber);fI(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Xg("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,TI(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),xI.apply(this,arguments)}function TI(e,t,n){return EI.apply(this,arguments)}function EI(){return EI=_(R().mark((function e(t,n,r){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ix(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,uI(t);case 5:t._u.set("Offline"),r||(r=function(){return cE(t.localStore)}),t.asyncQueue.enqueueRetryable(_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xg("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,oI(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),EI.apply(this,arguments)}function II(e,t){return t().catch((function(n){return TI(e,n,t)}))}function SI(e){return CI.apply(this,arguments)}function CI(){return CI=_(R().mark((function e(t){var n,r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=rk(t),r=GI(n),i=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!NI(n)){e.next=19;break}return e.prev=3,e.next=6,fE(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,RI(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,TI(n,e.t0);case 17:e.next=2;break;case 19:PI(n)&&AI(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),CI.apply(this,arguments)}function NI(e){return mI(e)&&e.cu.length<10}function RI(e,t){e.cu.push(t);var n=GI(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function PI(e){return mI(e)&&!GI(e).Do()&&e.cu.length>0}function AI(e){GI(e).start()}function OI(e){return DI.apply(this,arguments)}function DI(){return DI=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:GI(t).Xo();case 1:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}function MI(e){return LI.apply(this,arguments)}function LI(){return LI=_(R().mark((function e(t){var n,r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=GI(t),r=b(t.cu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),LI.apply(this,arguments)}function FI(e,t,n){return jI.apply(this,arguments)}function jI(){return jI=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cu.shift(),a=Dx.from(i,n,r),e.next=3,II(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,SI(t);case 5:case"end":return e.stop()}}),e)}))),jI.apply(this,arguments)}function UI(e,t){return VI.apply(this,arguments)}function VI(){return VI=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&GI(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=_(R().mark((function e(t,n){var r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qw(i=n.code)||i===ik.ABORTED){e.next=7;break}return r=t.cu.shift(),GI(t).No(),e.next=5,II(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,SI(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:PI(t)&&AI(t);case 5:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function qI(e,t){return BI.apply(this,arguments)}function BI(){return BI=_(R().mark((function e(t,n){var r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=rk(t)).asyncQueue.verifyOperationInProgress(),Xg("RemoteStore","RemoteStore received new credentials"),i=mI(r),r.lu.add(3),e.next=6,uI(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,oI(r);case 12:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}function zI(e,t){return WI.apply(this,arguments)}function WI(){return WI=_(R().mark((function e(t,n){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rk(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,oI(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,uI(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),WI.apply(this,arguments)}function HI(e){return e.mu||(e.mu=function(e,t,n){var r=rk(e);return r.tu(),new tI(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:gI.bind(null,e),Jr:bI.bind(null,e),Ko:_I.bind(null,e)}),e.fu.push(function(){var t=_(R().mark((function t(n){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),vI(e)?pI(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:yI(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function GI(e){return e.gu||(e.gu=function(e,t,n){var r=rk(e);return r.tu(),new nI(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:OI.bind(null,e),Jr:UI.bind(null,e),Yo:MI.bind(null,e),Jo:FI.bind(null,e)}),e.fu.push(function(){var t=_(R().mark((function t(n){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,SI(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&(Xg("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var KI=function(){function e(t,n,r,i,a){x(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ok,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return E(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ak(ik.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function YI(e,t){if(Zg("AsyncQueue","".concat(t,": ").concat(e)),Ix(e))return new ak(ik.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var QI=function(){function e(t){x(this,e),this.comparator=t?function(e,n){return t(e,n)||Wk.comparator(e.key,n.key)}:function(e,t){return Wk.comparator(e.key,t.key)},this.keyedMap=$w(),this.sortedSet=new Ww(this.comparator)}return E(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),JI=function(){function e(){x(this,e),this.yu=new Ww(Wk.comparator)}return E(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):tk():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),XI=function(){function e(t,n,r,i,a,o,s,u){x(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return E(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$b(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,QI.emptySet(n),a,r,i,!0,!1)}}]),e}(),ZI=E((function e(){x(this,e),this.Iu=void 0,this.listeners=[]})),$I=E((function e(){x(this,e),this.queries=new zw((function(e){return ew(e)}),$b),this.onlineState="Unknown",this.Tu=new Set}));function eS(e,t){return tS.apply(this,arguments)}function tS(){return tS=_(R().mark((function e(t,n){var r,i,a,o,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rk(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ZI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=YI(e.t0,"Initialization of query '".concat(tw(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&oS(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),tS.apply(this,arguments)}function nS(e,t){return rS.apply(this,arguments)}function rS(){return rS=_(R().mark((function e(t,n){var r,i,a,o,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rk(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),rS.apply(this,arguments)}function iS(e,t){var n,r=rk(e),i=!1,a=b(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=b(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&oS(r)}function aS(e,t,n){var r=rk(e),i=r.queries.get(t);if(i){var a,o=b(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function oS(e){e.Tu.forEach((function(e){e.next()}))}var sS=function(){function e(t,n,r){x(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return E(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=b(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new XI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),a=!0):this.vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=XI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),uS=function(){function e(t,n){x(this,e),this.payload=t,this.byteLength=n}return E(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),cS=function(){function e(t){x(this,e),this.M=t}return E(e,[{key:"li",value:function(e){return E_(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?P_(this.M,e.document,!1):fb.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return w_(e)}}]),e}(),lS=function(){function e(t,n,r){x(this,e),this.xu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hS(t)}return E(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Sk.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new cS(this.M),i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.li(a.metadata.name),u=b(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||r_()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=_(R().mark((function e(){var t,n,r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bE(this.localStore,new cS(this.M),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=b(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,_E(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function hS(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var fS=E((function e(t){x(this,e),this.key=t})),dS=E((function e(t){x(this,e),this.key=t})),pS=function(){function e(t,n){x(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=r_(),this.mutatedKeys=r_(),this.Lu=iw(t),this.Uu=new QI(this.Lu)}return E(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new JI,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=Hb(this.query)&&i.size===this.query.limit?i.last():null,c=Gb(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=nw(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||c&&n.Lu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Hb(this.query)||Gb(this.query))for(;o.size>this.query.limit;){var l=Hb(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Ku:r,ei:s,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Ku.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tk()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==a.length||u?{snapshot:new XI(this.query,e.Uu,i,a,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new JI,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=r_(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new dS(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new fS(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=r_();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return XI.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),vS=E((function e(t,n,r){x(this,e),this.query=t,this.targetId=n,this.view=r})),mS=E((function e(t){x(this,e),this.key=t,this.Xu=!1})),yS=function(){function e(t,n,r,i,a,o){x(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.ta=new zw((function(e){return ew(e)}),$b),this.ea=new Map,this.na=new Set,this.sa=new Ww(Wk.comparator),this.ia=new Map,this.ra=new IE,this.oa={},this.ua=new Map,this.aa=ST.gn(),this.onlineState="Unknown",this.ca=void 0}return E(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function gS(e,t){return kS.apply(this,arguments)}function kS(){return kS=_(R().mark((function e(t,n){var r,i,a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hC(t),!(o=r.ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,dE(r.localStore,Xb(n));case 8:return s=e.sent,r.isPrimaryClient&&lI(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,bS(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),kS.apply(this,arguments)}function bS(e,t,n,r){return wS.apply(this,arguments)}function wS(){return wS=_(R().mark((function e(t,n,r,i){var a,o,s,u,c,l;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=_(R().mark((function e(t,n,r,i){var a,o,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,mE(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(qS(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,mE(t.localStore,n,!0);case 3:return a=e.sent,o=new pS(n,a.hi),s=o.Gu(a.documents),u=s_.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),qS(t,r,c.zu),l=new vS(n,r,o),e.abrupt("return",(t.ta.set(n,l),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),wS.apply(this,arguments)}function _S(e,t){return xS.apply(this,arguments)}function xS(){return xS=_(R().mark((function e(t,n){var r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rk(t),i=r.ta.get(n),!((a=r.ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(i.targetId,a.filter((function(e){return!$b(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,pE(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),hI(r.remoteStore,i.targetId),US(r,i.targetId)})).catch(AT);case 9:e.next=14;break;case 11:return US(r,i.targetId),e.next=14,pE(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),xS.apply(this,arguments)}function TS(e,t,n){return ES.apply(this,arguments)}function ES(){return ES=_(R().mark((function e(t,n,r){var i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fC(t),e.prev=1,e.next=4,function(e,t){var n,r=rk(e),i=wk.now(),a=t.reduce((function(e,t){return e.add(t.key)}),r_());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,a).next((function(a){n=a;var o,s=[],u=b(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Cw(c,n.get(c.key));null!=l&&s.push(new Aw(c.key,l,hb(l.value.mapValue),xw.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return r.$s.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new Ww(gk)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,WS(i,a.changes);case 9:return e.next=11,SI(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=YI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),ES.apply(this,arguments)}function IS(e,t){return SS.apply(this,arguments)}function SS(){return SS=_(R().mark((function e(t,n){var r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rk(t),e.prev=1,e.next=4,lE(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(nk(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?nk(n.Xu):e.removedDocuments.size>0&&(nk(n.Xu),n.Xu=!1))})),e.next=8,WS(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,AT(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),SS.apply(this,arguments)}function CS(e,t,n){var r=rk(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=rk(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=b(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&oS(n)}(r.eventManager,t),i.length&&r.Zu.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function NS(e,t,n){return RS.apply(this,arguments)}function RS(){return RS=_(R().mark((function e(t,n,r){var i,a,o,s,u,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=rk(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ia.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Ww(Wk.comparator)).insert(o,fb.newNoDocument(o,_k.min())),u=r_().add(o),c=new o_(_k.min(),new Map,new Kw(gk),s,u),e.next=9,IS(i,c);case 9:i.sa=i.sa.remove(o),i.ia.delete(n),zS(i),e.next=16;break;case 14:return e.next=16,pE(i.localStore,n,!1).then((function(){return US(i,n,r)})).catch(AT);case 16:case"end":return e.stop()}}),e)}))),RS.apply(this,arguments)}function PS(e,t){return AS.apply(this,arguments)}function AS(){return AS=_(R().mark((function e(t,n){var r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rk(t),i=n.batch.batchId,e.prev=1,e.next=4,uE(r.localStore,n);case 4:return a=e.sent,jS(r,i,null),FS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,WS(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,AT(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),AS.apply(this,arguments)}function OS(e,t,n){return DS.apply(this,arguments)}function DS(){return DS=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rk(t),e.prev=1,e.next=4,function(e,t){var n=rk(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return nk(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,jS(i,n,r),FS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,WS(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,AT(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),DS.apply(this,arguments)}function MS(e,t){return LS.apply(this,arguments)}function LS(){return LS=_(R().mark((function e(t,n){var r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mI((r=rk(t)).remoteStore)||Xg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=rk(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.$s.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ua.get(i)||[]).push(n),r.ua.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=YI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),LS.apply(this,arguments)}function FS(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function jS(e,t,n){var r=rk(e),i=r.oa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oa[r.currentUser.toKey()]=i}}function US(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=b(e.ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ta.delete(a),n&&e.Zu.la(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||VS(e,t)}))}function VS(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(hI(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),zS(e))}function qS(e,t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof fS?(e.ra.addReference(a.key,t),BS(e,a)):a instanceof dS?(Xg("SyncEngine","Document no longer in limbo: "+a.key),e.ra.removeReference(a.key,t),e.ra.containsKey(a.key)||VS(e,a.key)):tk()}}catch(o){i.e(o)}finally{i.f()}}function BS(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||(Xg("SyncEngine","New document in limbo: "+n),e.na.add(r),zS(e))}function zS(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new Wk(Sk.fromString(t)),r=e.aa.next();e.ia.set(r,new mS(n)),e.sa=e.sa.insert(n,r),lI(e.remoteStore,new Lx(Xb(Wb(n.path)),r,2,vk.A))}}function WS(e,t,n){return HS.apply(this,arguments)}function HS(){return HS=_(R().mark((function e(t,n,r){var i,a,o,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=rk(t),a=[],o=[],s=[],e.t0=i.ta.isEmpty(),e.t0){e.next=9;break}return i.ta.forEach((function(e,t){s.push(i.ha(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=nE.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Zu.Ko(a),e.next=9,function(){var e=_(R().mark((function e(t,n){var r,i,a,o,s,u,c,l;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rk(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return wx.forEach(n,(function(t){return wx.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return wx.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ix(e.t0)){e.next=10;break}throw e.t0;case 10:Xg("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=b(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.si.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),HS.apply(this,arguments)}function GS(e,t){return KS.apply(this,arguments)}function KS(){return KS=_(R().mark((function e(t,n){var r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=rk(t)).currentUser.isEqual(n)){e.next=11;break}return Xg("SyncEngine","User change. New user:",n.toKey()),e.next=5,oE(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new ak(ik.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,WS(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),KS.apply(this,arguments)}function YS(e,t){var n=rk(e),r=n.ia.get(t);if(r&&r.Xu)return r_().add(r.key);var i=r_(),a=n.ea.get(t);if(!a)return i;var o,s=b(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ta.get(u);i=i.unionWith(c.view.qu)}}catch(l){s.e(l)}finally{s.f()}return i}function QS(e,t){return JS.apply(this,arguments)}function JS(){return JS=_(R().mark((function e(t,n){var r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rk(t),e.next=3,mE(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&qS(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),JS.apply(this,arguments)}function XS(e,t){return ZS.apply(this,arguments)}function ZS(){return ZS=_(R().mark((function e(t,n){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rk(t),e.abrupt("return",gE(r.localStore,n).then((function(e){return WS(r,e)})));case 2:case"end":return e.stop()}}),e)}))),ZS.apply(this,arguments)}function $S(e,t,n,r){return eC.apply(this,arguments)}function eC(){return eC=_(R().mark((function e(t,n,r,i){var a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=rk(t),e.next=3,function(e,t){var n=rk(e),r=rk(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ai.qs(e,t):wx.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,SI(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(jS(a,n,i||null),FS(a,n),function(e,t){rk(rk(e).$s).dn(t)}(a.localStore,n)):tk();case 11:return e.next=13,WS(a,o);case 13:e.next=16;break;case 15:Xg("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),eC.apply(this,arguments)}function tC(e,t){return nC.apply(this,arguments)}function nC(){return nC=_(R().mark((function e(t,n){var r,i,a,o,s,u,c,l;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hC(r=rk(t)),fC(r),!0!==n||!0===r.ca){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,rC(r,i.toArray());case 5:return a=e.sent,r.ca=!0,e.next=9,zI(r.remoteStore,!0);case 9:o=b(a);try{for(o.s();!(s=o.n()).done;)u=s.value,lI(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ca){e.next=25;break}return c=[],l=Promise.resolve(),r.ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return US(r,t),pE(r.localStore,t,!0)})),hI(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,rC(r,c);case 21:return function(e){var t=rk(e);t.ia.forEach((function(e,n){hI(t.remoteStore,n)})),t.ra.bi(),t.ia=new Map,t.sa=new Ww(Wk.comparator)}(r),r.ca=!1,e.next=25,zI(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),nC.apply(this,arguments)}function rC(e,t,n){return iC.apply(this,arguments)}function iC(){return iC=_(R().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,m,y;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=rk(t),a=[],o=[],s=b(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ea.get(c))||0===h.length){e.next=34;break}return e.next=11,dE(i.localStore,Xb(h[0]));case 11:l=e.sent,f=b(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.ta.get(p),e.next=20,QS(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,yE(i.localStore,c);case 36:return y=e.sent,e.next=39,dE(i.localStore,y);case 39:return l=e.sent,e.next=42,bS(i,aC(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),iC.apply(this,arguments)}function aC(e){return zb(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function oC(e){var t=rk(e);return rk(rk(t.localStore).persistence).Os()}function sC(e,t,n,r){return uC.apply(this,arguments)}function uC(){return uC=_(R().mark((function e(t,n,r,i){var a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=rk(t)).ca){e.next=3;break}return e.abrupt("return",void Xg("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,gE(a.localStore,rw(o[0]));case 10:return s=e.sent,u=o_.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,WS(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,pE(a.localStore,n,!0);case 17:return US(a,n,i),e.abrupt("break",20);case 19:tk();case 20:case"end":return e.stop()}}),e)}))),uC.apply(this,arguments)}function cC(e,t,n){return lC.apply(this,arguments)}function lC(){return lC=_(R().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=hC(t)).ca){e.next=45;break}a=b(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ea.has(s)){e.next=10;break}return Xg("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,yE(i.localStore,s);case 12:return u=e.sent,e.next=15,dE(i.localStore,u);case 15:return c=e.sent,e.next=18,bS(i,aC(u),c.targetId,!1);case 18:lI(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=b(r),e.prev=30,f=R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ea.has(t),!e.t0){e.next=5;break}return e.next=5,pE(i.localStore,t,!1).then((function(){hI(i.remoteStore,t),US(i,t)})).catch(AT);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),lC.apply(this,arguments)}function hC(e){var t=rk(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=IS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NS.bind(null,t),t.Zu.Ko=iS.bind(null,t.eventManager),t.Zu.la=aS.bind(null,t.eventManager),t}function fC(e){var t=rk(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=PS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=OS.bind(null,t),t}function dC(e,t,n){var r=rk(e);(function(){var e=_(R().mark((function e(t,n,r){var i,a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=rk(e),r=w_(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(hS(i)),a=new lS(i,t.localStore,n.M),e.next=15,n.fa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.fa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,WS(t,u.Ou,void 0);case 31:return e.next=33,function(e,t){var n=rk(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",($g("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var pC=function(){function e(){x(this,e),this.synchronizeTabs=!1}return E(e,[{key:"initialize",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=ZE(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return aE(this.persistence,new rE,e.initialUser,this.M)}},{key:"_a",value:function(e){return new AE(DE.Wi,this.M)}},{key:"da",value:function(e){return new WE}},{key:"terminate",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),vC=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this)).ga=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return E(n,[{key:"initialize",value:function(){var e=_(R().mark((function e(t){var r=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(l(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ga.initialize(this,t);case 4:return e.next=6,fC(this.ga.syncEngine);case 6:return e.next=8,SI(this.ga.remoteStore);case 8:return e.next=10,this.persistence.Is((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return aE(this.persistence,new rE,e.initialUser,this.M)}},{key:"wa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new LT(t,e.asyncQueue)}},{key:"_a",value:function(e){var t=eE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?kT.withCacheSize(this.cacheSizeBytes):kT.DEFAULT;return new XT(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,JE(),XE(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"da",value:function(e){return new WE}}]),n}(pC),mC=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,r,!1)).ga=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return E(n,[{key:"initialize",value:function(){var e=_(R().mark((function e(t){var r,i=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(l(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ga.syncEngine,e.t0=this.sharedClientState instanceof zE,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:$S.bind(null,r),Mr:sC.bind(null,r),Or:cC.bind(null,r),Os:oC.bind(null,r),Nr:XS.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Is(function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tC(i.ga.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"da",value:function(e){var t=JE();if(!zE.vt(t))throw new ak(ik.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=eE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zE(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(vC),yC=function(){function e(){x(this,e)}return E(e,[{key:"initialize",value:function(){var e=_(R().mark((function e(t,n){var r=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return CS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=GS.bind(null,this.syncEngine),e.next=12,zI(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new $I}},{key:"createDatastore",value:function(e){var t,n=ZE(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new QE(t));return function(e,t,n,r){return new rI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return CS(o.syncEngine,e,0)},a=GE.vt()?new GE:new HE,new aI(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new yS(e,t,n,r,i,a);return o&&(s.ca=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rk(t),Xg("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,uI(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function gC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return _(R().mark((function r(){var i;return R().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return _(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var kC=function(){function e(t){x(this,e),this.observer=t,this.muted=!1}return E(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),bC=function(){function e(t,n){var r=this;x(this,e),this.Ia=t,this.M=n,this.metadata=new ok,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return E(e,[{key:"close",value:function(){return this.Ia.cancel()}},{key:"getMetadata",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fa",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ea());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ea",value:function(){var e=_(R().mark((function e(){var t,n,r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Aa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ta.decode(t),r=Number(n),isNaN(r)&&this.Ra("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new uS(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Aa",value:function(){var e=_(R().mark((function e(){var t,n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Pa()<0)){e.next=7;break}return e.next=3,this.Va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Pa())<0&&this.Ra("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ra("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ra",value:function(e){throw this.Ia.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Va",value:function(){var e=_(R().mark((function e(){var t,n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ia.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wC=function(){function e(t){x(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return E(e,[{key:"lookup",value:function(){var e=_(R().mark((function e(t){var n,r=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new ak(ik.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=_(R().mark((function e(t,n){var r,i,a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rk(t),i=C_(r.M)+"/documents",a={documents:n.map((function(e){return T_(r.M,e)}))},e.next=5,r.co("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=A_(r.M,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());nk(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new jw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=_(R().mark((function e(){var t,n=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Wk.fromPath(t);n.mutations.push(new Uw(r,n.precondition(r)))})),e.next=7,function(){var e=_(R().mark((function e(t,n){var r,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rk(t),i=C_(r.M)+"/documents",a={writes:n.map((function(e){return O_(r.M,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tk();t=_k.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ak(ik.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?xw.updateTime(t):xw.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_k.min()))throw new ak(ik.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xw.updateTime(t)}return xw.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),_C=function(){function e(t,n,r,i){x(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new $E(this.asyncQueue,"transaction_retry")}return E(e,[{key:"run",value:function(){this.va-=1,this.Sa()}},{key:"Sa",value:function(){var e=this;this.So.Io(_(R().mark((function t(){var n,r;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new wC(e.datastore),(r=e.Da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ca(t)}))}))})).catch((function(t){e.Ca(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Da",value:function(e){try{var t=this.updateFunction(e);return!qk(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ca",value:function(e){var t=this;this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!qw(t)}return!1}}]),e}(),xC=function(){function e(t,n,r,i){var a=this;x(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Kg.UNAUTHENTICATED,this.clientId=yk.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xg("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Xg("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return E(e,[{key:"getConfiguration",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ak(ik.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ok;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(R().mark((function n(){var r;return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=YI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function TC(e,t){return EC.apply(this,arguments)}function EC(){return EC=_(R().mark((function e(t,n){var r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Xg("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,oE(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),EC.apply(this,arguments)}function IC(e,t){return SC.apply(this,arguments)}function SC(){return SC=_(R().mark((function e(t,n){var r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,CC(t);case 3:return r=e.sent,Xg("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return qI(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return qI(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),SC.apply(this,arguments)}function CC(e){return NC.apply(this,arguments)}function NC(){return NC=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Xg("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,TC(t,new pC);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),NC.apply(this,arguments)}function RC(e){return PC.apply(this,arguments)}function PC(){return PC=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Xg("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,IC(t,new yC);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),PC.apply(this,arguments)}function AC(e){return CC(e).then((function(e){return e.persistence}))}function OC(e){return CC(e).then((function(e){return e.localStore}))}function DC(e){return RC(e).then((function(e){return e.remoteStore}))}function MC(e){return RC(e).then((function(e){return e.syncEngine}))}function LC(e){return FC.apply(this,arguments)}function FC(){return FC=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RC(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=gS.bind(null,n.syncEngine),r.onUnlisten=_S.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),FC.apply(this,arguments)}function jC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ok;return e.asyncQueue.enqueueAndForget(_(R().mark((function i(){return R().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kC({next:function(a){t.enqueueAndForget((function(){return nS(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new ak(ik.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new ak(ik.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new sS(Wb(n.path),a,{includeMetadataChanges:!0,Du:!0});return eS(e,o)},i.next=3,LC(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function UC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ok;return e.asyncQueue.enqueueAndForget(_(R().mark((function i(){return R().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kC({next:function(n){t.enqueueAndForget((function(){return nS(e,o)})),n.fromCache&&"server"===r.source?i.reject(new ak(ik.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new sS(n,a,{includeMetadataChanges:!0,Du:!0});return eS(e,o)},i.next=3,LC(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var VC=new Map;function qC(e,t,n){if(!n)throw new ak(ik.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function BC(e,t,n,r){if(!0===t&&!0===r)throw new ak(ik.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function zC(e){if(!Wk.isDocumentKey(e))throw new ak(ik.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function WC(e){if(Wk.isDocumentKey(e))throw new ak(ik.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function HC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":tk()}function GC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ak(ik.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=HC(e);throw new ak(ik.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function KC(e,t){if(t<=0)throw new ak(ik.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var YC=function(){function e(t){var n;if(x(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ak(ik.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ak(ik.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,BC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return E(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),QC=function(){function e(t,n,r){x(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YC({}),this._settingsFrozen=!1,t instanceof Vk?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ak(ik.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vk(e.options.projectId)}(t))}return E(e,[{key:"app",get:function(){if(!this._app)throw new ak(ik.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ak(ik.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YC(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new uk;switch(e.type){case"gapi":var t=e.client;return nk(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new fk(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new ak(ik.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=VC.get(e);t&&(Xg("ComponentProvider","Removing Datastore"),VC.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function JC(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=GC(e,QC))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&$g("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Kg.MOCK_USER;else{o=G(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new ak(ik.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Kg(u)}e._authCredentials=new ck(new sk(o,s))}}var XC=function(){function e(t,n,r){x(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return E(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new $C(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ZC=function(){function e(t,n,r){x(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return E(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),$C=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,e,r,Wb(i)))._path=i,a.type="collection",a}return E(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new XC(this.firestore,null,new Wk(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ZC);function eN(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ie(e),qC("collection","path",t),e instanceof QC){var a=Sk.fromString.apply(Sk,[t].concat(r));return WC(a),new $C(e,null,a)}if(!(e instanceof XC||e instanceof $C))throw new ak(ik.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Sk.fromString.apply(Sk,[t].concat(r)));return WC(o),new $C(e.firestore,null,o)}function tN(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ie(e),1===arguments.length&&(t=yk.R()),qC("doc","path",t),e instanceof QC){var a=Sk.fromString.apply(Sk,[t].concat(r));return zC(a),new XC(e,null,new Wk(a))}if(!(e instanceof XC||e instanceof $C))throw new ak(ik.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Sk.fromString.apply(Sk,[t].concat(r)));return zC(o),new XC(e.firestore,e instanceof $C?e.converter:null,new Wk(o))}function nN(e,t){return e=Ie(e),t=Ie(t),(e instanceof XC||e instanceof $C)&&(t instanceof XC||t instanceof $C)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function rN(e,t){return e=Ie(e),t=Ie(t),e instanceof ZC&&t instanceof ZC&&e.firestore===t.firestore&&$b(e._query,t._query)&&e.converter===t.converter}var iN=function(){function e(){var t=this;x(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new $E(this,"async_queue_retry"),this.Ua=function(){var e=XE();e&&Xg("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=XE();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return E(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=XE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new ok;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=_(R().mark((function e(){var t=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ix(e.t0)){e.next=12;break}throw e.t0;case 12:Xg("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Zg("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var i=KI.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(i),i}},{key:"qa",value:function(){this.Fa&&tk()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=b(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=b(t.Oa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();function aN(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=b(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var oN=function(){function e(){x(this,e),this._progressObserver={},this._taskCompletionResolver=new ok,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return E(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),sN=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new iN,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return E(n,[{key:"_terminate",value:function(){return this._firestoreClient||cN(this),this._firestoreClient.terminate()}}]),n}(QC);function uN(e){return e._firestoreClient||cN(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cN(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Uk(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new xC(e._authCredentials,e._appCheckCredentials,e._queue,r)}function lN(e,t,n){var r=new ok;return e.asyncQueue.enqueue(_(R().mark((function i(){return R().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,TC(e,n);case 3:return i.next=5,IC(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===ik.FAILED_PRECONDITION||e.code===ik.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function hN(e){return function(e){return e.asyncQueue.enqueue(_(R().mark((function t(){var n,r;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,AC(e);case 2:return n=t.sent,t.next=5,DC(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=rk(e);return t.lu.delete(0),oI(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(uN(e=GC(e,sN)))}function fN(e){return function(e){return e.asyncQueue.enqueue(_(R().mark((function t(){var n,r;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,AC(e);case 2:return n=t.sent,t.next=5,DC(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=rk(t)).lu.add(0),e.next=4,uI(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(uN(e=GC(e,sN)))}function dN(e,t){var n=uN(e=GC(e,sN)),r=new oN;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new bC(e,t)}(function(e,t){if(e instanceof Uint8Array)return gC(e,t);if(e instanceof ArrayBuffer)return gC(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,ZE(t));e.asyncQueue.enqueueAndForget(_(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dC,t.next=3,MC(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function pN(e,t){return function(e,t){return e.asyncQueue.enqueue(_(R().mark((function n(){return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=rk(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.ds.getNamedQuery(e,t)}))},n.next=3,OC(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(uN(e=GC(e,sN)),t).then((function(t){return t?new ZC(e,null,t.query):null}))}function vN(e){if(e._initialized||e._terminated)throw new ak(ik.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mN=function(){function e(){x(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ak(ik.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nk(n)}return E(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var yN=function(){function e(t){x(this,e),this._byteString=t}return E(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Pk.fromBase64String(t))}catch(t){throw new ak(ik.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Pk.fromUint8Array(t))}}]),e}(),gN=E((function e(t){x(this,e),this._methodName=t})),kN=function(){function e(t,n){if(x(this,e),!isFinite(t)||t<-90||t>90)throw new ak(ik.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ak(ik.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return E(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return gk(this._lat,e._lat)||gk(this._long,e._long)}}]),e}(),bN=/^__.*__$/,wN=function(){function e(t,n,r){x(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Aw(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pw(e,this.data,t,this.fieldTransforms)}}]),e}(),_N=function(){function e(t,n,r){x(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return new Aw(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function xN(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tk()}}var TN=function(){function e(t,n,r,i,a,o){x(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return E(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return WN(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(xN(this.Ya)&&bN.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),EN=function(){function e(t,n,r){x(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||ZE(t)}return E(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new TN({Ya:e,methodName:t,oc:n,path:Nk.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function IN(e){var t=e._freezeSettings(),n=ZE(e._databaseId);return new EN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function SN(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(a.merge||a.mergeFields?2:0,t,n,i);VN("Data must be an object, but it was:",o,r);var s,u,c=jN(r,o);if(a.merge)s=new Rk(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=b(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=qN(t,d,n);if(!o.contains(p))throw new ak(ik.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));HN(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new Rk(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new wN(new lb(c),s,u)}var CN=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Ya)throw 1===e.Ya?e.ic("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ic("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gN);function NN(e,t,n){return new TN({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var RN=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){return new ww(e.path,new dw)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gN),PN=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e)).ac=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=NN(this,e,!0),n=this.ac.map((function(e){return FN(e,t)})),r=new pw(n);return new ww(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gN),AN=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e)).ac=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=NN(this,e,!0),n=this.ac.map((function(e){return FN(e,t)})),r=new mw(n);return new ww(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gN),ON=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e)).cc=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=new gw(e.M,uw(e.M,this.cc));return new ww(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gN);function DN(e,t,n,r){var i=e.uc(1,t,n);VN("Data must be an object, but it was:",i,r);var a=[],o=lb.empty();Tk(r,(function(e,r){var s=zN(t,e,n);r=Ie(r);var u=i.nc(s);if(r instanceof CN)a.push(s);else{var c=FN(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Rk(a);return new _N(o,s,i.fieldTransforms)}function MN(e,t,n,r,i,a){var o=e.uc(1,t,n),s=[qN(t,r,n)],u=[i];if(a.length%2!=0)throw new ak(ik.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(qN(t,a[c])),u.push(a[c+1]);for(var l=[],h=lb.empty(),f=s.length-1;f>=0;--f)if(!HN(l,s[f])){var d=s[f],p=u[f];p=Ie(p);var v=o.nc(d);if(p instanceof CN)l.push(d);else{var m=FN(p,v);null!=m&&(l.push(d),h.set(d,m))}}var y=new Rk(l);return new _N(h,y,o.fieldTransforms)}function LN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return FN(n,e.uc(r?4:3,t))}function FN(e,t){if(UN(e=Ie(e)))return VN("Unsupported field value:",t,e),jN(e,t);if(e instanceof gN)return function(e,t){if(!xN(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=b(e);try{for(a.s();!(n=a.n()).done;){var o=FN(n.value,t.sc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ie(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return uw(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=wk.fromDate(e);return{timestampValue:g_(t.M,n)}}if(e instanceof wk){var r=new wk(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:g_(t.M,r)}}if(e instanceof kN)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof yN)return{bytesValue:k_(t.M,e._byteString)};if(e instanceof XC){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ic("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:__(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(HC(e)))}(e,t)}function jN(e,t){var n={};return Ek(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tk(e,(function(e,r){var i=FN(r,t.Za(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function UN(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof wk||e instanceof kN||e instanceof yN||e instanceof XC||e instanceof gN)}function VN(e,t,n){if(!UN(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=HC(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function qN(e,t,n){if((t=Ie(t))instanceof mN)return t._internalPath;if("string"==typeof t)return zN(e,t);throw WN("Field path arguments must be of type string or ",e,!1,void 0,n)}var BN=new RegExp("[~\\*/\\[\\]]");function zN(e,t,n){if(t.search(BN)>=0)throw WN("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return P(mN,S(t.split(".")))._internalPath}catch(r){throw WN("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function WN(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new ak(ik.INVALID_ARGUMENT,s+e+u)}function HN(e,t){return e.some((function(e){return e.isEqual(t)}))}var GN=function(){function e(t,n,r,i,a){x(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return E(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new XC(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new KN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(YN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),KN=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){return f(l(n.prototype),"data",this).call(this)}}]),n}(GN);function YN(e,t){return"string"==typeof t?zN(e,t):t instanceof mN?t._internalPath:t._delegate._internalPath}var QN=function(){function e(t,n){x(this,e),this.hasPendingWrites=t,this.fromCache=n}return E(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),JN=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return x(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return E(n,[{key:"exists",value:function(){return f(l(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new XN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(YN("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(GN),XN=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(l(n.prototype),"data",this).call(this,e)}}]),n}(JN),ZN=function(){function e(t,n,r,i){x(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new QN(i.hasPendingWrites,i.fromCache),this.query=r}return E(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new XN(n._firestore,n._userDataWriter,r.key,r,new QN(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ak(ik.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new XN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new QN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new XN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new QN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:$N(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function $N(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tk()}}function eR(e,t){return e instanceof JN&&t instanceof JN?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ZN&&t instanceof ZN&&e._firestore===t._firestore&&rN(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function tR(e){if(Gb(e)&&0===e.explicitOrderBy.length)throw new ak(ik.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nR=E((function e(){x(this,e)}));function rR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var iR=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this)).hc=e,a.lc=r,a.fc=i,a.type="where",a}return E(n,[{key:"_apply",value:function(e){var t=IN(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ak(ik.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){vR(o,a);var u,c=[],l=b(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(pR(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=pR(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||vR(o,a),s=LN(n,"where",o,"in"===a||"not-in"===a);var f=Cb.create(i,a,s);return function(e,t){if(t.S()){var n=Yb(e);if(null!==n&&!n.isEqual(t.field))throw new ak(ik.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Kb(e);null!==r&&mR(e,t.field,r)}var i=function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new ak(ik.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ak(ik.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new ZC(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Bb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(nR);var aR=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).hc=e,i.dc=r,i.type="orderBy",i}return E(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new ak(ik.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ak(ik.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new jb(t,n);return function(e,t){if(null===Kb(e)){var n=Yb(e);null!==n&&mR(e,n,t.field)}}(e,r),r}(e._query,this.hc,this.dc);return new ZC(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Bb(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(nR);var oR=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this)).type=e,a._c=r,a.wc=i,a}return E(n,[{key:"_apply",value:function(e){return new ZC(e.firestore,e.converter,Zb(e._query,this._c,this.wc))}}]),n}(nR);var sR=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return E(n,[{key:"_apply",value:function(e){var t=dR(e,this.type,this.mc,this.gc);return new ZC(e.firestore,e.converter,function(e,t){return new Bb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(nR);function uR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sR("startAt",t,!0)}function cR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sR("startAfter",t,!1)}var lR=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return E(n,[{key:"_apply",value:function(e){var t=dR(e,this.type,this.mc,this.gc);return new ZC(e.firestore,e.converter,function(e,t){return new Bb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(nR);function hR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lR("endBefore",t,!1)}function fR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lR("endAt",t,!0)}function dR(e,t,n,r){if(n[0]=Ie(n[0]),n[0]instanceof GN)return function(e,t,n,r,i){if(!r)throw new ak(ik.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=b(Jb(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(eb(t,r.key));else{var c=r.data.field(u.field);if(Lk(c))throw new ak(ik.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new ak(ik.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new Fb(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=IN(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new ak(ik.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new ak(ik.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Qb(e)&&-1!==c.indexOf("/"))throw new ak(ik.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Sk.fromString(c));if(!Wk.isDocumentKey(l))throw new ak(ik.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Wk(l);s.push(eb(t,h))}else{var f=LN(n,r,c);s.push(f)}}return new Fb(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function pR(e,t,n){if("string"==typeof(n=Ie(n))){if(""===n)throw new ak(ik.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qb(t)&&-1!==n.indexOf("/"))throw new ak(ik.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Sk.fromString(n));if(!Wk.isDocumentKey(r))throw new ak(ik.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return eb(e,new Wk(r))}if(n instanceof XC)return eb(e,n._key);throw new ak(ik.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(HC(n),"."))}function vR(e,t){if(!Array.isArray(e)||0===e.length)throw new ak(ik.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new ak(ik.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function mR(e,t,n){if(!n.isEqual(t))throw new ak(ik.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var yR=function(){function e(){x(this,e)}return E(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Kk(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dk(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mk(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tk()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Tk(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new kN(Dk(e.latitude),Dk(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Fk(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(jk(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ok(e);return new wk(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Sk.fromString(e);nk(G_(n));var r=new Vk(n.get(1),n.get(3)),i=new Wk(n.popFirst(5));return r.isEqual(t)||Zg("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function gR(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var kR=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new yN(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new XC(this.firestore,null,t)}}]),n}(yR),bR=function(){function e(t,n){x(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=IN(t)}return E(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=wR(e,this._firestore),i=gR(r.converter,t,n),a=SN(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,xw.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=wR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Ie(t))||t instanceof mN?MN(this._dataReader,"WriteBatch.update",i._key,t,n,o):DN(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,xw.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=wR(e,this._firestore);return this._mutations=this._mutations.concat(new jw(t._key,xw.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ak(ik.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function wR(e,t){if((e=Ie(e)).firestore!==t)throw new ak(ik.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var _R=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new yN(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new XC(this.firestore,null,t)}}]),n}(yR);function xR(e){e=GC(e,XC);var t=GC(e.firestore,sN),n=uN(t),r=new _R(t);return function(e,t){var n=new ok;return e.asyncQueue.enqueueAndForget(_(R().mark((function r(){return R().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=_(R().mark((function e(t,n,r){var i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=rk(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ai.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ak(ik.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=YI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,OC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new JN(t,r,e._key,n,new QN(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function TR(e){e=GC(e,ZC);var t=GC(e.firestore,sN),n=uN(t),r=new _R(t);return function(e,t){var n=new ok;return e.asyncQueue.enqueueAndForget(_(R().mark((function r(){return R().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=_(R().mark((function e(t,n,r){var i,a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mE(t,n,!0);case 3:i=e.sent,a=new pS(n,i.hi),o=a.Gu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=YI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,OC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new ZN(t,r,e,n)}))}function ER(e,t,n){e=GC(e,XC);var r=GC(e.firestore,sN),i=gR(e.converter,t,n);return NR(r,[SN(IN(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xw.none())])}function IR(e,t,n){e=GC(e,XC);for(var r=GC(e.firestore,sN),i=IN(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return NR(r,[("string"==typeof(t=Ie(t))||t instanceof mN?MN(i,"updateDoc",e._key,t,n,o):DN(i,"updateDoc",e._key,t)).toMutation(e._key,xw.exists(!0))])}function SR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ie(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||aN(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(aN(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof XC)l=GC(e.firestore,sN),h=Wb(e._key.path),c={next:function(t){n[u]&&n[u](RR(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=GC(e,ZC);l=GC(p.firestore,sN),h=p._query;var v=new _R(l);c={next:function(e){n[u]&&n[u](new ZN(l,v,p,e))},error:n[u+1],complete:n[u+2]},tR(e._query)}return function(e,t,n,r){var i=new kC(r),a=new sS(t,i,n);return e.asyncQueue.enqueueAndForget(_(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=eS,t.next=3,LC(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.pa(),e.asyncQueue.enqueueAndForget(_(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=nS,t.next=3,LC(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(uN(l),h,f,c)}function CR(e,t){return function(e,t){var n=new kC(t);return e.asyncQueue.enqueueAndForget(_(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){rk(e).Tu.add(t),t.next()},t.next=3,LC(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.pa(),e.asyncQueue.enqueueAndForget(_(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){rk(e).Tu.delete(t)},t.next=3,LC(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(uN(e=GC(e,sN)),aN(t)?t:{next:t})}function NR(e,t){return function(e,t){var n=new ok;return e.asyncQueue.enqueueAndForget(_(R().mark((function r(){return R().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=TS,r.next=3,MC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(uN(e),t)}function RR(e,t,n){var r=n.docs.get(t._key),i=new _R(e);return new JN(e,i,t._key,r,new QN(n.hasPendingWrites,n.fromCache),t.converter)}var PR=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,r))._firestore=e,i}return E(n,[{key:"get",value:function(e){var t=this,r=wR(e,this._firestore),i=new _R(this._firestore);return f(l(n.prototype),"get",this).call(this,e).then((function(e){return new JN(t._firestore,i,r._key,e._document,new QN(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){x(this,e),this._firestore=t,this._transaction=n,this._dataReader=IN(t)}return E(e,[{key:"get",value:function(e){var t=this,n=wR(e,this._firestore),r=new kR(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return tk();var i=e[0];if(i.isFoundDocument())return new GN(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new GN(t._firestore,r,n._key,null,n.converter);throw tk()}))}},{key:"set",value:function(e,t,n){var r=wR(e,this._firestore),i=gR(r.converter,t,n),a=SN(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=wR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Ie(t))||t instanceof mN?MN(this._dataReader,"Transaction.update",i._key,t,n,o):DN(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=wR(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function AR(e,t){return function(e,t){var n=new ok;return e.asyncQueue.enqueueAndForget(_(R().mark((function r(){var i;return R().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return RC(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new _C(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(uN(e=GC(e,sN)),(function(n){return t(new PR(e,n))}))}function OR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PN("arrayUnion",t)}function DR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AN("arrayRemove",t)}function MR(e){return Ep({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r\n\tc0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r\n\tc0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}},{tag:"path",attr:{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r\n\tC34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}},{tag:"path",attr:{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r\n\tc-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}},{tag:"path",attr:{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r\n\tc0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"}}]})(e)}function LR(e){return Ep({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511zM11 .5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V1.707l-4.146 4.147a.5.5 0 0 1-.708-.708L14.293 1H11.5a.5.5 0 0 1-.5-.5z"}}]})(e)}function FR(e){return Ep({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"}}]})(e)}function jR(e){return Ep({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"}}]})(e)}function UR(e){return Ep({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"}}]})(e)}function VR(e){return Ep({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}}]})(e)}function qR(e){return Ep({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7 1.3 3 4.1 4.8 7.3 4.8 66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128.2 304H116c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h12.3c6 0 10.4-3.5 10.4-6.6 0-1.3-.8-2.7-2.1-3.8l-21.9-18.8c-8.5-7.2-13.3-17.5-13.3-28.1 0-21.3 19-38.6 42.4-38.6H156c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8h-12.3c-6 0-10.4 3.5-10.4 6.6 0 1.3.8 2.7 2.1 3.8l21.9 18.8c8.5 7.2 13.3 17.5 13.3 28.1.1 21.3-19 38.6-42.4 38.6zm191.8-8c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8v-68.2l-24.8 55.8c-2.9 5.9-11.4 5.9-14.3 0L224 227.8V296c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8V192c0-8.8 7.2-16 16-16h16c6.1 0 11.6 3.4 14.3 8.8l17.7 35.4 17.7-35.4c2.7-5.4 8.3-8.8 14.3-8.8h16c8.8 0 16 7.2 16 16v104zm48.3 8H356c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h12.3c6 0 10.4-3.5 10.4-6.6 0-1.3-.8-2.7-2.1-3.8l-21.9-18.8c-8.5-7.2-13.3-17.5-13.3-28.1 0-21.3 19-38.6 42.4-38.6H396c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8h-12.3c-6 0-10.4 3.5-10.4 6.6 0 1.3.8 2.7 2.1 3.8l21.9 18.8c8.5 7.2 13.3 17.5 13.3 28.1.1 21.3-18.9 38.6-42.3 38.6z"}}]})(e)}function BR(e){return Ep({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m20.772 10.156-1.368-4.105A2.995 2.995 0 0 0 16.559 4H7.441a2.995 2.995 0 0 0-2.845 2.051l-1.368 4.105A2.003 2.003 0 0 0 2 12v5c0 .753.423 1.402 1.039 1.743-.013.066-.039.126-.039.195V21a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-2h12v2a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-2.062c0-.069-.026-.13-.039-.195A1.993 1.993 0 0 0 22 17v-5c0-.829-.508-1.541-1.228-1.844zM4 17v-5h16l.002 5H4zM7.441 6h9.117c.431 0 .813.274.949.684L18.613 10H5.387l1.105-3.316A1 1 0 0 1 7.441 6z"}},{tag:"circle",attr:{cx:"6.5",cy:"14.5",r:"1.5"}},{tag:"circle",attr:{cx:"17.5",cy:"14.5",r:"1.5"}}]})(e)}function zR(e){return Ep({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 19c.946 0 1.81-.103 2.598-.281l-1.757-1.757c-.273.021-.55.038-.841.038-5.351 0-7.424-3.846-7.926-5a8.642 8.642 0 0 1 1.508-2.297L4.184 8.305c-1.538 1.667-2.121 3.346-2.132 3.379a.994.994 0 0 0 0 .633C2.073 12.383 4.367 19 12 19zm0-14c-1.837 0-3.346.396-4.604.981L3.707 2.293 2.293 3.707l18 18 1.414-1.414-3.319-3.319c2.614-1.951 3.547-4.615 3.561-4.657a.994.994 0 0 0 0-.633C21.927 11.617 19.633 5 12 5zm4.972 10.558-2.28-2.28c.19-.39.308-.819.308-1.278 0-1.641-1.359-3-3-3-.459 0-.888.118-1.277.309L8.915 7.501A9.26 9.26 0 0 1 12 7c5.351 0 7.424 3.846 7.926 5-.302.692-1.166 2.342-2.954 3.558z"}}]})(e)}function WR(e){return Ep({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.57 22a2 2 0 0 0 1.43-.59l2.71-2.71a1 1 0 0 0 0-1.41l-4-4a1 1 0 0 0-1.41 0l-1.6 1.59a7.55 7.55 0 0 1-3-1.59 7.62 7.62 0 0 1-1.59-3l1.59-1.6a1 1 0 0 0 0-1.41l-4-4a1 1 0 0 0-1.41 0L2.59 6A2 2 0 0 0 2 7.43 15.28 15.28 0 0 0 6.3 17.7 15.28 15.28 0 0 0 16.57 22zM6 5.41 8.59 8 7.3 9.29a1 1 0 0 0-.3.91 10.12 10.12 0 0 0 2.3 4.5 10.08 10.08 0 0 0 4.5 2.3 1 1 0 0 0 .91-.27L16 15.41 18.59 18l-2 2a13.28 13.28 0 0 1-8.87-3.71A13.28 13.28 0 0 1 4 7.41zM20 11h2a8.81 8.81 0 0 0-9-9v2a6.77 6.77 0 0 1 7 7z"}},{tag:"path",attr:{d:"M13 8c2.1 0 3 .9 3 3h2c0-3.22-1.78-5-5-5z"}}]})(e)}function HR(e){return Ep({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 9a3.02 3.02 0 0 0-3 3c0 1.642 1.358 3 3 3 1.641 0 3-1.358 3-3 0-1.641-1.359-3-3-3z"}},{tag:"path",attr:{d:"M12 5c-7.633 0-9.927 6.617-9.948 6.684L1.946 12l.105.316C2.073 12.383 4.367 19 12 19s9.927-6.617 9.948-6.684l.106-.316-.105-.316C21.927 11.617 19.633 5 12 5zm0 12c-5.351 0-7.424-3.846-7.926-5C4.578 10.842 6.652 7 12 7c5.351 0 7.424 3.846 7.926 5-.504 1.158-2.578 5-7.926 5z"}}]})(e)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Yg=e}(ct),nt(new Ae("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new sN(i,new lk(e.getProvider("auth-internal")),new pk(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),vt(Gg,"3.4.7",e),vt(Gg,"3.4.7","esm2017")}();var GR=function(){var e=(0,t.useContext)(aB),n=e.auth,r=e.firestore,i=(e.storage,c(Ys(n),1)[0]),a=c((0,t.useState)(""),2),o=a[0],s=a[1],u=c((0,t.useState)(!1),2),l=u[0],h=u[1],f=c((0,t.useState)(""),2),d=f[0],p=f[1],v=c((0,t.useState)(""),2),m=v[0],y=(v[1],c((0,t.useState)(""),2)),g=y[0],k=y[1],b=c((0,t.useState)(""),2),w=b[0],x=b[1],T=c((0,t.useState)("email"),2),E=T[0],I=T[1],S=c((0,t.useState)(0),2),N=(S[0],S[1]),P=c((0,t.useState)(!1),2),A=P[0],O=P[1],D=c((0,t.useState)({first:!1,second:!1}),2),M=D[0],L=D[1],F=yu(),j=r,U=function(e){L(Ap(Ap({},M),{},C({},e,!M[e])))};(0,t.useEffect)((function(){O(!0),r.collection("driversList").doc(""+(null===i||void 0===i?void 0:i.uid)).get().then((function(e){N(1)})).catch((function(e){return e.message})).finally((function(){return O(!1)}))}),[]);var V=function(e){if(e.preventDefault(),"number"===E)if(w!==g)kp.error("Passwords are not compatible");else{window.recaptchaVerifier=new ho("recaptcha-container",{size:"invisible",callback:function(e){}},n);var t=window.recaptchaVerifier;vo(n,o,t).then((function(e){window.confirmationResult=e,console.log("sms sent",o),h(!0)})).catch((function(e){console.log(e)}))}else w!==g?kp.error("Passwords are not compatible"):(console.log(n,m,g),Ki(n,o,g).then((function(e){e.user;alert("success")})).catch((function(e){var t=e.code,n=e.message;console.log(n),kp.error(t)})))};return A?(0,Qs.jsx)(Js,{}):(0,Qs.jsxs)("div",{id:"login",children:[(0,Qs.jsxs)("form",{id:"login-box",onSubmit:function(e){return V(e)},children:[(0,Qs.jsxs)("div",{className:"left",children:[(0,Qs.jsx)("h1",{children:"Sign up"}),(0,Qs.jsx)("input",{required:!0,type:"text",name:"username",placeholder:"Your name",disabled:!!l}),(0,Qs.jsx)("input",{required:!0,disabled:!!l,type:"text",name:E,placeholder:E,onChange:function(e){return s(e.target.value)},value:o}),(0,Qs.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[(0,Qs.jsx)("input",{required:!0,type:M.first?"text":"password",name:"password",placeholder:"Password",disabled:!!l,value:g,onChange:function(e){return k(e.target.value)}}),M.first?(0,Qs.jsx)(zR,{className:"position-absolute",style:{right:"10px",top:"12%"},role:"button",onClick:function(){return U("first")}}):(0,Qs.jsx)(HR,{className:"position-absolute",style:{right:"10px",top:"12%"},role:"button",onClick:function(){return U("first")}})]}),(0,Qs.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[(0,Qs.jsx)("input",{required:!0,disabled:!!l,type:M.second?"text":"password",name:"password2",placeholder:"Retype password",value:w,onChange:function(e){return x(e.target.value)}}),M.second?(0,Qs.jsx)(zR,{className:"position-absolute",style:{right:"10px",top:"12%"},role:"button",onClick:function(){return U("second")}}):(0,Qs.jsx)(HR,{className:"position-absolute",style:{right:"10px",top:"12%"},role:"button",onClick:function(){return U("second")}})]}),(0,Qs.jsx)("button",{disabled:!!l,id:"sign-in-button",type:"submit",name:"signup_submit",children:"Sign up"}),(0,Qs.jsxs)("div",{style:{display:l?"block":"none"},children:[(0,Qs.jsxs)("label",{htmlFor:"confirm_code",children:[o," raqamiga yuborilgan 6 xonali kodni kiriting"]}),(0,Qs.jsx)("input",{type:"password",name:"confirm_code",value:d,onChange:function(e){return p(e.target.value)}}),(0,Qs.jsx)("button",{type:"button",onClick:function(e){return function(e){e.preventDefault(),window.confirmationResult.confirm(d).then((function(e){e.user,alert("success")})).catch((function(e){console.log(e)}))}(e)},children:"Tasdiqlash"})]})]}),(0,Qs.jsxs)("div",{className:"right",children:[(0,Qs.jsxs)("span",{className:"loginwith",children:["Sign in with",(0,Qs.jsx)("br",{}),"social network"]}),(0,Qs.jsxs)("button",{className:"social-signin facebook",onClick:function(e){return function(e){e.preventDefault();var t=new ai;t.addScope("user_birthday"),n.languageCode="it",Ao(n,t).then((function(e){var t=e.user;ai.credentialFromResult(e).accessToken,console.log(t),alert("success")})).catch((function(e){e.code,e.message,e.email,ai.credentialFromError(e),console.log(e.message)}))}(e)},children:["Sign up with facebook ",(0,Qs.jsx)(FR,{className:"mx-2 fs-4"})]}),(0,Qs.jsxs)("button",{className:"social-signin twitter",onClick:function(){I("email"===E?"number":"email")},children:["Sign up ","email"===E?"number":"email","email"===E?(0,Qs.jsx)(qR,{className:"mx-2 fs-4"}):(0,Qs.jsx)(VR,{className:"mx-2 fs-4"})]}),(0,Qs.jsxs)("button",{className:"social-signin google",onClick:function(){var e=new oi;Ao(n,e).then((function(e){oi.credentialFromResult(e).accessToken;var t=e.user;kp.success("Logged in successfully");var n={id:null===t||void 0===t?void 0:t.uid,phoneNumber:null!==t&&void 0!==t&&t.phoneNumber?null===t||void 0===t?void 0:t.phoneNumber:"kiritilmagan",carName:"kiritilmagan",name:null===t||void 0===t?void 0:t.displayName,email:null===t||void 0===t?void 0:t.email,photoURL:t.photoURL?t.photoURL:"https://firebasestorage.googleapis.com/v0/b/taxi-project-bekjon.appspot.com/o/avatars%2Favatar.webp?alt=media&token=ce091c4d-9267-4f85-b8ab-9d39579959e7",carPhoto:"https://firebasestorage.googleapis.com/v0/b/taxi-project-bekjon.appspot.com/o/carPhotos%2Ftaxi.webp?alt=media&token=dbee42d6-9cd5-41b6-9ada-90687639a77f",likes:0},r=function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ER(tN(j,"driversList",null===t||void 0===t?void 0:t.uid),n);case 2:console.log("success");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r(),F("/main")})).catch((function(e){e.code,e.message,e.email,oi.credentialFromError(e);kp.error("Opps, something is went wrong, please try again")}))},children:["Sign up with Google ",(0,Qs.jsx)(MR,{className:"mx-2 fs-4"})]})]}),(0,Qs.jsx)("div",{className:"or",children:"OR"})]}),(0,Qs.jsx)("div",{id:"recaptcha-container"}),(0,Qs.jsx)(sp,{})]})},KR=n(3),YR=function(){return(0,Qs.jsxs)("footer",{children:[(0,Qs.jsx)("h5",{className:"footerTitle text-center py-2",children:"\xa9 This app created by Bekjon Ishpulatov"}),(0,Qs.jsxs)("div",{className:"contacts",children:[(0,Qs.jsx)("div",{children:"Savol va takliflar uchun: "}),(0,Qs.jsxs)("div",{className:"email",children:[(0,Qs.jsx)(VR,{style:{color:"#fff"}}),(0,Qs.jsx)("a",{href:"mailto:bekjonishpulatov8@gmail.com",children:"bekjonishpulatov8@gmail.com"})]}),(0,Qs.jsxs)("div",{children:[(0,Qs.jsx)(jR,{}),(0,Qs.jsx)("a",{href:"https://github.com/bekjon-me",target:"_blank",children:"MyGithub"})]}),(0,Qs.jsxs)("div",{className:"number",children:[(0,Qs.jsx)(LR,{style:{color:"#fff"}}),(0,Qs.jsx)("a",{href:"tel:+998908702909",children:"+998908702909"})]})]})]})};function QR(e){var t=!1;return function(){t||(console.warn(e),t=!0)}}QR("\n>> Error, via react-flip-move <<\n\nYou provided a stateless functional component as a child to <FlipMove>. Unfortunately, SFCs aren't supported, because Flip Move needs access to the backing instances via refs, and SFCs don't have a public instance that holds that info.\n\nPlease wrap your components in a native element (eg. <div>), or a non-functional component.\n"),QR("\n>> Error, via react-flip-move <<\n\nYou provided a primitive (text or number) node as a child to <FlipMove>. Flip Move needs containers with unique keys to move children around.\n\nPlease wrap your value in a native element (eg. <span>), or a component.\n");var JR=QR("\n>> Warning, via react-flip-move <<\n\nWhen using \"wrapperless\" mode (by supplying 'typeName' of 'null'), strange things happen when the direct parent has the default \"static\" position.\n\nFlipMove has added 'position: relative' to this node, to ensure Flip Move animates correctly.\n\nTo avoid seeing this warning, simply apply a non-static position to that parent node.\n"),XR=QR("\n>> Warning, via react-flip-move <<\n\nOne or more of Flip Move's child elements have the html attribute 'disabled' set to true.\n\nPlease note that this will cause animations to break in Internet Explorer 11 and below. Either remove the disabled attribute or set 'animation' to false.\n"),ZR={elevator:{from:{transform:"scale(0)",opacity:"0"},to:{transform:"",opacity:""}},fade:{from:{opacity:"0"},to:{opacity:""}},accordionVertical:{from:{transform:"scaleY(0)",transformOrigin:"center top"},to:{transform:"",transformOrigin:"center top"}},accordionHorizontal:{from:{transform:"scaleX(0)",transformOrigin:"left center"},to:{transform:"",transformOrigin:"left center"}},none:null},$R={elevator:{from:{transform:"scale(1)",opacity:"1"},to:{transform:"scale(0)",opacity:"0"}},fade:{from:{opacity:"1"},to:{opacity:"0"}},accordionVertical:{from:{transform:"scaleY(1)",transformOrigin:"center top"},to:{transform:"scaleY(0)",transformOrigin:"center top"}},accordionHorizontal:{from:{transform:"scaleX(1)",transformOrigin:"left center"},to:{transform:"scaleX(0)",transformOrigin:"left center"}},none:null},eP=ZR,tP="elevator",nP=function(e,t){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return t[n]},rP=function(e){return(rP=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)};var iP=function(e){var t={};return function(n){return t[n]||(t[n]=e(n)),t[n]}}((function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()})),aP="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oP=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},sP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uP=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},cP=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t};function lP(e){var n,r;return r=n=function(n){function r(){return oP(this,r),cP(this,n.apply(this,arguments))}return uP(r,n),r.prototype.checkChildren=function(e){},r.prototype.convertProps=function(e){var t={children:e.children,easing:e.easing,onStart:e.onStart,onFinish:e.onFinish,onStartAll:e.onStartAll,onFinishAll:e.onFinishAll,typeName:e.typeName,disableAllAnimations:e.disableAllAnimations,getPosition:e.getPosition,maintainContainerHeight:e.maintainContainerHeight,verticalAlignment:e.verticalAlignment,duration:this.convertTimingProp("duration"),delay:this.convertTimingProp("delay"),staggerDurationBy:this.convertTimingProp("staggerDurationBy"),staggerDelayBy:this.convertTimingProp("staggerDelayBy"),appearAnimation:this.convertAnimationProp(e.appearAnimation,eP),enterAnimation:this.convertAnimationProp(e.enterAnimation,ZR),leaveAnimation:this.convertAnimationProp(e.leaveAnimation,$R),delegated:{}};this.checkChildren(t.children);var n=Object.keys(t),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}(this.props,n);return r.style=sP({position:"relative"},r.style),t.delegated=r,t},r.prototype.convertTimingProp=function(e){var t=this.props[e],n="number"===typeof t?t:parseInt(t,10);return isNaN(n)?r.defaultProps[e]:n},r.prototype.convertAnimationProp=function(e,t){switch("undefined"===typeof e?"undefined":aP(e)){case"boolean":return t[e?tP:"none"];case"string":return-1===Object.keys(t).indexOf(e)?t.elevator:t[e];default:return e}},r.prototype.render=function(){return t.createElement(e,this.convertProps(this.props))},r}(t.Component),n.defaultProps={easing:"ease-in-out",duration:350,delay:0,staggerDurationBy:0,staggerDelayBy:0,typeName:"div",enterAnimation:tP,leaveAnimation:tP,disableAllAnimations:!1,getPosition:function(e){return e.getBoundingClientRect()},maintainContainerHeight:!1,verticalAlignment:"top"},r}function hP(e){var t=e.domNode,n=e.styles;Object.keys(n).forEach((function(e){t.style.setProperty(iP(e),n[e])}))}var fP=function(e){var t=e.childDomNode,n={top:0,left:0,right:0,bottom:0,height:0,width:0},r=e.childBoundingBox||n,i=e.parentBoundingBox||n,a=(0,e.getPosition)(t),o=a.top-i.top,s=a.left-i.left;return[r.left-s,r.top-o]},dP=function(e,t){var n=t.delay,r=t.duration,i=t.staggerDurationBy,a=t.staggerDelayBy,o=t.easing;n+=e*a,r+=e*i;return["transform","opacity"].map((function(e){return e+" "+r+"ms "+o+" "+n+"ms"})).join(", ")},pP=function(){var e={transition:"transitionend","-o-transition":"oTransitionEnd","-moz-transition":"transitionend","-webkit-transition":"webkitTransitionEnd"};if("undefined"===typeof document)return"";var t=document.createElement("fakeelement"),n=nP((function(e){return void 0!==t.style.getPropertyValue(e)}),Object.keys(e));return n?e[n]:""}(),vP=!pP;function mP(e){return e.key||""}function yP(e){return t.Children.toArray(e)}var gP=function(e){function n(){var t,r;oP(this,n);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return t=r=cP(this,e.call.apply(e,[this].concat(o))),r.state={children:yP(r.props?r.props.children:[]).map((function(e){return sP({},e,{element:e,appearing:!0})}))},r.childrenData={},r.parentData={domNode:null,boundingBox:null},r.heightPlaceholderData={domNode:null},r.remainingAnimations=0,r.childrenToAnimate=[],r.findDOMContainer=function(){var e=i.findDOMNode(r),t=e&&e.parentNode;t&&t instanceof HTMLElement&&("static"===window.getComputedStyle(t).position&&(t.style.position="relative",JR()),r.parentData.domNode=t)},r.runAnimation=function(){var e=r.state.children.filter(r.doesChildNeedToBeAnimated),t=e.map((function(e){return r.computeInitialStyles(e)}));e.forEach((function(e,n){r.remainingAnimations+=1,r.childrenToAnimate.push(mP(e)),r.animateChild(e,n,t[n])})),"function"===typeof r.props.onStartAll&&r.callChildrenHook(r.props.onStartAll)},r.doesChildNeedToBeAnimated=function(e){if(!mP(e))return!1;var t=r.getChildData(mP(e)),n=t.domNode,i=t.boundingBox,a=r.parentData.boundingBox;if(!n)return!1;var o=r.props,s=o.appearAnimation,u=o.enterAnimation,c=o.leaveAnimation,l=o.getPosition,h=e.appearing&&s,f=e.entering&&u,d=e.leaving&&c;if(h||f||d)return!0;var p=fP({childDomNode:n,childBoundingBox:i,parentBoundingBox:a,getPosition:l}),v=p[0],m=p[1];return 0!==v||0!==m},cP(r,t)}return uP(n,e),n.prototype.componentDidMount=function(){null===this.props.typeName&&this.findDOMContainer(),this.props.appearAnimation&&!this.isAnimationDisabled(this.props)&&(this.prepForAnimation(),this.runAnimation())},n.prototype.componentDidUpdate=function(e){null===this.props.typeName&&this.findDOMContainer();var t=!function(e,t){if(e===t)return!0;var n=!rP(e)||!rP(t),r=e.length!==t.length;return!n&&!r&&function(e,t){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}((function(e,n){return e===t[n]}),e)}(yP(this.props.children).map((function(e){return e.key})),yP(e.children).map((function(e){return e.key})))&&!this.isAnimationDisabled(this.props);t&&(this.prepForAnimation(),this.runAnimation())},n.prototype.calculateNextSetOfChildren=function(e){var t=this,n=e.map((function(e){var n=t.findChildByKey(e.key),r=!n||n.leaving;return sP({},e,{element:e,entering:r})})),r=0;return this.state.children.forEach((function(i,a){if(!nP((function(e){return e.key===mP(i)}),e)&&t.props.leaveAnimation){var o=sP({},i,{leaving:!0}),s=a+r;n.splice(s,0,o),r+=1}})),n},n.prototype.prepForAnimation=function(){var e=this,t=this.props,n=t.leaveAnimation,r=t.maintainContainerHeight,i=t.getPosition;if(n){var a=this.state.children.filter((function(e){return e.leaving}));a.forEach((function(t){var n=e.getChildData(mP(t));!e.isAnimationDisabled(e.props)&&n.domNode&&n.domNode.disabled&&XR(),n.boundingBox&&function(e,t){var n=e.domNode,r=e.boundingBox;if(n&&r){var i=window.getComputedStyle(n),a=["margin-top","margin-left","margin-right"].reduce((function(e,t){var n,r=i.getPropertyValue(t);return sP({},e,((n={})[t]=Number(r.replace("px","")),n))}),{});hP({domNode:n,styles:{position:"absolute",top:("bottom"===t?r.top-r.height:r.top)-a["margin-top"]+"px",left:r.left-a["margin-left"]+"px",right:r.right-a["margin-right"]+"px"}})}}(n,e.props.verticalAlignment)})),r&&this.heightPlaceholderData.domNode&&function(e){var t=e.domNode,n=e.parentData,r=e.getPosition,i=n.domNode,a=n.boundingBox;if(i&&a){hP({domNode:t,styles:{height:"0"}});var o=a.height-r(i).height;hP({domNode:t,styles:{height:o>0?o+"px":"0"}})}}({domNode:this.heightPlaceholderData.domNode,parentData:this.parentData,getPosition:i})}this.state.children.forEach((function(t){var n=e.getChildData(mP(t)).domNode;n&&(t.entering||t.leaving||hP({domNode:n,styles:{transition:""}}))}))},n.prototype.UNSAFE_componentWillReceiveProps=function(e){this.updateBoundingBoxCaches();var t=yP(e.children);this.setState({children:this.isAnimationDisabled(e)?t.map((function(e){return sP({},e,{element:e})})):this.calculateNextSetOfChildren(t)})},n.prototype.animateChild=function(e,t,n){var r=this,i=this.getChildData(mP(e)).domNode;i&&(hP({domNode:i,styles:n}),this.props.onStart&&this.props.onStart(e,i),requestAnimationFrame((function(){requestAnimationFrame((function(){var n={transition:dP(t,r.props),transform:"",opacity:""};e.appearing&&r.props.appearAnimation?n=sP({},n,r.props.appearAnimation.to):e.entering&&r.props.enterAnimation?n=sP({},n,r.props.enterAnimation.to):e.leaving&&r.props.leaveAnimation&&(n=sP({},n,r.props.leaveAnimation.to)),hP({domNode:i,styles:n})}))})),this.bindTransitionEndHandler(e))},n.prototype.bindTransitionEndHandler=function(e){var t=this,n=this.getChildData(mP(e)).domNode;if(n){n.addEventListener(pP,(function r(i){i.target===n&&(n.style.transition="",t.triggerFinishHooks(e,n),n.removeEventListener(pP,r),e.leaving&&t.removeChildData(mP(e)))}))}},n.prototype.triggerFinishHooks=function(e,t){var n=this;if(this.props.onFinish&&this.props.onFinish(e,t),this.remainingAnimations-=1,0===this.remainingAnimations){var r=this.state.children.filter((function(e){return!e.leaving})).map((function(e){return sP({},e,{element:e.element,appearing:!1,entering:!1})}));this.setState({children:r},(function(){"function"===typeof n.props.onFinishAll&&n.callChildrenHook(n.props.onFinishAll),n.childrenToAnimate=[]})),this.heightPlaceholderData.domNode&&(this.heightPlaceholderData.domNode.style.height="0")}},n.prototype.callChildrenHook=function(e){var t=this,n=[],r=[];this.childrenToAnimate.forEach((function(e){var i=t.findChildByKey(e);i&&(n.push(i),t.hasChildData(e)&&r.push(t.getChildData(e).domNode))})),e(n,r)},n.prototype.updateBoundingBoxCaches=function(){var e=this,t=this.parentData.domNode;if(t){this.parentData.boundingBox=this.props.getPosition(t);var n=[];this.state.children.forEach((function(r){var i=mP(r);if(i)if(e.hasChildData(i)){var a=e.getChildData(i);a.domNode&&r?n.push(function(e){var t=e.childDomNode,n=e.parentDomNode,r=e.getPosition,i=r(n),a=r(t),o=a.top,s=a.left,u=a.right,c=a.bottom,l=a.width,h=a.height;return{top:o-i.top,left:s-i.left,right:i.right-u,bottom:i.bottom-c,width:l,height:h}}({childDomNode:a.domNode,parentDomNode:t,getPosition:e.props.getPosition})):n.push(null)}else n.push(null);else n.push(null)})),this.state.children.forEach((function(t,r){var i=mP(t),a=n[r];i&&e.setChildData(i,{boundingBox:a})}))}},n.prototype.computeInitialStyles=function(e){if(e.appearing)return this.props.appearAnimation?this.props.appearAnimation.from:{};if(e.entering)return this.props.enterAnimation?sP({position:"",top:"",left:"",right:"",bottom:""},this.props.enterAnimation.from):{};if(e.leaving)return this.props.leaveAnimation?this.props.leaveAnimation.from:{};var t=this.getChildData(mP(e)),n=t.domNode,r=t.boundingBox,i=this.parentData.boundingBox;if(!n)return{};var a=fP({childDomNode:n,childBoundingBox:r,parentBoundingBox:i,getPosition:this.props.getPosition});return{transform:"translate("+a[0]+"px, "+a[1]+"px)"}},n.prototype.isAnimationDisabled=function(e){return vP||e.disableAllAnimations||0===e.duration&&0===e.delay&&0===e.staggerDurationBy&&0===e.staggerDelayBy},n.prototype.findChildByKey=function(e){return nP((function(t){return mP(t)===e}),this.state.children)},n.prototype.hasChildData=function(e){return Object.prototype.hasOwnProperty.call(this.childrenData,e)},n.prototype.getChildData=function(e){return this.hasChildData(e)?this.childrenData[e]:{}},n.prototype.setChildData=function(e,t){this.childrenData[e]=sP({},this.getChildData(e),t)},n.prototype.removeChildData=function(e){delete this.childrenData[e],this.setState((function(t){return sP({},t,{children:t.children.filter((function(t){return t.element.key!==e}))})}))},n.prototype.createHeightPlaceholder=function(){var e=this,n=this.props.typeName,r="ul"===n||"ol"===n?"li":"div";return(0,t.createElement)(r,{key:"height-placeholder",ref:function(t){e.heightPlaceholderData.domNode=t},style:{visibility:"hidden",height:0}})},n.prototype.childrenWithRefs=function(){var e=this;return this.state.children.map((function(n){return(0,t.cloneElement)(n.element,{ref:function(t){if(t){var r=function(e){if("undefined"===typeof HTMLElement)return null;if(e instanceof HTMLElement)return e;var t=(0,i.findDOMNode)(e);return t&&t.nodeType===Node.TEXT_NODE?null:t}(t);e.setChildData(mP(n),{domNode:r})}}})}))},n.prototype.render=function(){var e=this,n=this.props,r=n.typeName,i=n.delegated,a=n.leaveAnimation,o=n.maintainContainerHeight,s=this.childrenWithRefs();if(a&&o&&s.push(this.createHeightPlaceholder()),!r)return s;var u=sP({},i,{children:s,ref:function(t){e.parentData.domNode=t}});return(0,t.createElement)(r,u)},n}(t.Component),kP=lP(gP);var bP=function(){return bP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},bP.apply(this,arguments)},wP=function(e){return{loading:void 0===e||null===e,value:e}},_P=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return bP(bP({},e),{error:t.error,loading:!1,value:void 0});case"reset":return wP(t.defaultValue);case"value":return bP(bP({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),wP(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},s=function(e){a({type:"error",error:e})},u=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:s,setValue:u,value:i.value}}),[i.error,i.loading,o,s,u,i.value])},xP=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},TP=function(e,t){var n=!e&&!t,r=!!e&&!!t&&rN(e,t);return n||r},EP=function(e,t){return xP(e,TP,t)},IP=function(e,n){var r=null===n||void 0===n?void 0:n.snapshotOptions,i=function(e,n){var r=_P(),i=r.error,a=r.loading,o=r.reset,s=r.setError,u=r.setValue,c=r.value,l=EP(e,o);(0,t.useEffect)((function(){if(l.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?SR(l.current,n.snapshotListenOptions,u,s):SR(l.current,u,s);return function(){e()}}u(void 0)}),[l.current]);var h=[c,a,i];return(0,t.useMemo)((function(){return h}),h)}(e,n),a=i[0],o=i[1],s=i[2],u=[SP(a,r),o,s,a];return(0,t.useMemo)((function(){return u}),u)},SP=function(e,n){return(0,t.useMemo)((function(){return null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(n)}))}),[e,n])};function CP(e){return Ep({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 0 0-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4 20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3 40.4-23.5 65.5-66.1 65.5-111 0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 0 1-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0 1 33.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5 21.9 19a56.76 56.76 0 0 1 19.6 43c0 19.1-11 37.5-28.8 48.4z"}}]})(e)}function NP(e){return Ep({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0 1 42.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]})(e)}var RP,PP=function(){var e=(0,t.useContext)(aB),n=e.auth,r=e.firestore,i=(c(Ys(n),1)[0],c(IP(r.collection("driversList").orderBy("cost")),2)),a=i[0],o=i[1],s=c((0,t.useState)(null),2),u=s[0],l=s[1];(0,t.useEffect)((function(){l(a)}),[]);return o?(0,Qs.jsx)(Js,{}):a?(0,Qs.jsxs)("div",{className:"header",children:[(0,Qs.jsx)("img",{src:KR,alt:"Taxi header jpg"}),(0,Qs.jsx)("div",{className:"overlay-best-driver",children:(0,Qs.jsx)("div",{className:"container",children:(0,Qs.jsx)("div",{className:"card mb-3",style:{maxWidth:"940px"},children:(0,Qs.jsxs)("div",{className:"row g-0",children:[(0,Qs.jsx)("div",{className:"col-md-4",children:(0,Qs.jsx)("img",{src:u,className:"img-fluid rounded-start",alt:"userImg"})}),(0,Qs.jsx)("div",{className:"col-md-8",children:(0,Qs.jsxs)("div",{className:"card-body",children:[(0,Qs.jsx)("h5",{className:"card-title",children:"Card title"}),(0,Qs.jsx)("p",{className:"card-text",children:"This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer."}),(0,Qs.jsx)("p",{className:"card-text",children:(0,Qs.jsx)("small",{className:"text-muted",children:"Last updated 3 mins ago"})})]})})]})})})}),(0,Qs.jsxs)("div",{className:"drivers",children:[(0,Qs.jsx)("h1",{className:"text-center mt-3",children:"Mavjud haydovchilar ro'yxati"}),(0,Qs.jsx)("div",{className:"w-50 mx-auto",children:(0,Qs.jsxs)("select",{id:"select_drivers",className:"form-select w-70 mb-5",onChange:function(e){return function(e){"byCost"===e?a.sort((function(e,t){return e.cost-t.cost})):"byName"===e?a.sort((function(e,t){return e.name.localeCompare(t.name)})):a.sort((function(e,t){return e.carName.localeCompare(t.carName)})),l(S(a))}(e.target.value)},defaultValue:"byCost",children:[(0,Qs.jsx)("option",{value:"byCost",children:"Sort by cost (cheap to expensive)"}),(0,Qs.jsx)("option",{value:"byName",children:"Sort by diver's name (alphabetically)"}),(0,Qs.jsx)("option",{value:"byCarName",children:"Sort by car name (alphabetically)"})]})}),(0,Qs.jsx)(kP,{className:"row row-cols-1 row-cols-md-3 g-4",id:"driversCard",children:null===a||void 0===a?void 0:a.map((function(e){var t=e.carName,n=e.cost,r=e.email,i=e.photoURL,a=e.name,o=e.phoneNumber,s=e.carPhoto,u=e.id,c=e.likes;return(0,Qs.jsx)("div",{children:(0,Qs.jsx)("div",{className:"col",children:(0,Qs.jsxs)("div",{className:"card bg-light shadow m-1",children:[(0,Qs.jsxs)("div",{className:"d-flex",children:[(0,Qs.jsx)("div",{className:"w-100 mx-0 d-flex justify-content-center align-items-center",children:(0,Qs.jsx)("img",{src:i,className:"card-img-top p-0",alt:"userImg",style:{borderRadius:"10px",maxWidth:"90%",position:"relative",height:"auto",boxShadow:"0 10px 10px -5px",margin:"10px auto"}})}),(0,Qs.jsx)("div",{className:"w-100 d-flex justify-content-center align-items-center",children:(0,Qs.jsx)("img",{src:s,className:"card-img-top p-0",alt:"carImg",style:{borderRadius:"10px",maxWidth:"90%",position:"relative",height:"auto",margin:"10px auto",boxShadow:"0 10px 10px -5px"}})})]}),(0,Qs.jsxs)("div",{className:"card-body",children:[(0,Qs.jsx)("h5",{className:"card-title text-center",children:a}),(0,Qs.jsx)("p",{className:"card-text",children:"This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer"}),(0,Qs.jsxs)("div",{className:"bg-primary text-white rounded p-2",style:{minHeight:"10rem"},children:[(0,Qs.jsxs)("div",{className:"w-100 my-2",children:[(0,Qs.jsx)("span",{className:"card-text mx-2",children:n})," ",(0,Qs.jsx)("span",{className:"position-absolute",style:{right:"30px"},children:(0,Qs.jsxs)("div",{className:"text-white p-1",children:[(0,Qs.jsx)("span",{className:"mx-1",children:c}),(0,Qs.jsx)(NP,{className:"mx-1",role:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Like"}),(0,Qs.jsx)(CP,{role:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Dislike"})]})})]}),(0,Qs.jsxs)("div",{className:"w-100 my-1",children:[(0,Qs.jsx)("span",{className:"card-text mx-2",children:o})," ",(0,Qs.jsx)("span",{className:"position-absolute",style:{right:"30px"},children:(0,Qs.jsx)("a",{href:"tel: ".concat(o),className:"text-white bg-info p-1 rounded",children:(0,Qs.jsx)(WR,{})})})]}),(0,Qs.jsxs)("div",{className:"w-100 my-1",children:[(0,Qs.jsx)("span",{className:"card-text mx-2",children:t})," ",(0,Qs.jsx)("span",{className:"position-absolute",style:{right:"30px"},children:(0,Qs.jsx)("a",{className:"text-white bg-info p-1 rounded",children:(0,Qs.jsx)(BR,{})})})]}),(0,Qs.jsxs)("div",{className:"w-100 my-1",children:[(0,Qs.jsx)("span",{className:"card-text mx-2",children:r})," ",(0,Qs.jsx)("span",{className:"position-absolute",style:{right:"30px"},children:(0,Qs.jsx)("a",{href:"mailto: ".concat(r),className:"text-white bg-info p-1 rounded",children:(0,Qs.jsx)(VR,{})})})]})]})]})]})})},u)}))})]}),(0,Qs.jsx)("hr",{style:{border:"2px solid #000"}}),(0,Qs.jsx)(YR,{})]}):(0,Qs.jsx)(Js,{})},AP=function(){function e(t,n){var r=this;x(this,e),this._delegate=t,this.firebase=n,et(t,new Ae("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return E(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),dt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){et(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){tt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),OP=(C(RP={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),C(RP,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),RP),DP=new ne("app-compat","Firebase",OP);var MP=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=lt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ue(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:vt,setLogLevel:yt,onLog:mt,apps:null,SDK_VERSION:ct,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(nt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw DP.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&z(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ue(n,e=e||Je))throw DP.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(AP);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){z(n,e)},createSubscribe:ge,ErrorFactory:ne,deepExtend:z}),n}(),LP=new He("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){LP.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var FP=self.firebase.SDK_VERSION;FP&&FP.indexOf("LITE")>=0&&LP.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var jP=MP;!function(e){vt("@firebase/app-compat","0.1.21",e)}();var UP="@firebase/database",VP="0.12.7",qP="";function BP(e){qP=e}var zP=function(){function e(t){x(this,e),this.domStorage_=t,this.prefix_="firebase:"}return E(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),oe(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ae(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),WP=function(){function e(){x(this,e),this.cache_={},this.isInMemoryStorage=!0}return E(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ue(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),HP=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new zP(t)}}catch(n){}return new WP},GP=HP("localStorage"),KP=HP("sessionStorage"),YP=new He("@firebase/database"),QP=function(){var e=1;return function(){return e++}}(),JP=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,L(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ye;n.update(t);var r=n.digest();return U.encodeByteArray(r)},XP=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?oe(r):r,t+=" "}return t},ZP=null,$P=!0,eA=function(e,t){L(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(YP.logLevel=Le.VERBOSE,ZP=YP.log.bind(YP),t&&KP.set("logging_enabled",!0)):"function"===typeof e?ZP=e:(ZP=null,KP.remove("logging_enabled"))},tA=function(){if(!0===$P&&($P=!1,null===ZP&&!0===KP.get("logging_enabled")&&eA(!0)),ZP){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=XP.apply(null,t);ZP(r)}},nA=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];tA.apply(void 0,[e].concat(n))}},rA=function(){var e="FIREBASE INTERNAL ERROR: "+XP.apply(void 0,arguments);YP.error(e)},iA=function(){var e="FIREBASE FATAL ERROR: ".concat(XP.apply(void 0,arguments));throw YP.error(e),new Error(e)},aA=function(){var e="FIREBASE WARNING: "+XP.apply(void 0,arguments);YP.warn(e)},oA=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},sA="[MIN_NAME]",uA="[MAX_NAME]",cA=function(e,t){if(e===t)return 0;if(e===sA||t===uA)return-1;if(t===sA||e===uA)return 1;var n=kA(e),r=kA(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},lA=function(e,t){return e===t?0:e<t?-1:1},hA=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+oe(t))},fA=function e(t){if("object"!==typeof t||null===t)return oe(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=oe(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},dA=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function pA(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var vA=function(e){L(!oA(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var mA=new RegExp("^-?(0*)\\d{1,10}$"),yA=-2147483648,gA=2147483647,kA=function(e){if(mA.test(e)){var t=Number(e);if(t>=yA&&t<=gA)return t}return null},bA=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw aA("Exception was thrown by user callback.",e),t}),Math.floor(0))}},wA=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},_A=function(){function e(t,n){var r=this;x(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return E(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){aA('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),xA=function(){function e(t,n,r){var i=this;x(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return E(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(tA("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',aA(e)}}]),e}(),TA=function(){function e(t){x(this,e),this.accessToken=t}return E(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();TA.OWNER="owner";var EA="5",IA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,SA="websocket",CA="long_polling",NA=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];x(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=GP.get("host:"+t)||this._host}return E(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&GP.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function RA(e,t,n){var r;if(L("string"===typeof t,"typeof type must == string"),L("object"===typeof n,"typeof params must == object"),t===SA)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==CA)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return pA(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var PA=function(){function e(){x(this,e),this.counters_={}}return E(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ue(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return z(void 0,this.counters_)}}]),e}(),AA={},OA={};function DA(e){var t=e.toString();return AA[t]||(AA[t]=new PA),AA[t]}var MA=function(){function e(t){x(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return E(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&bA((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),LA="start",FA="close",jA=function(){function e(t,n,r,i,a,o,s){var u=this;x(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nA(t),this.stats_=DA(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),RA(n,CA,e)}}return E(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new MA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if($()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new UA((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===LA)n.id=a,n.password=o;else{if(i!==FA)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=EA,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&IA.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=oe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=V(t),r=dA(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!$()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=oe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!$()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),UA=function(){function e(t,n,r,i){if(x(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,$())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=QP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){tA("frame writing exception"),s.stack&&tA(s.stack),tA(s)}}}return E(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;$()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){tA("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||tA("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),VA=null;"undefined"!==typeof MozWebSocket?VA=MozWebSocket:"undefined"!==typeof WebSocket&&(VA=WebSocket);var qA=function(){function e(t,n,r,i,a,o,s){x(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nA(this.connId),this.stats_=DA(n),this.connURL=e.connectionURL_(n,o,s,i),this.nodeAdmin=n.nodeAdmin}return E(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,GP.set("previous_websocket_failure",!0);try{if($()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(EA,"/").concat(qP,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new VA(this.connURL,[],i)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new VA(this.connURL,[],s)}}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){GP.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ae(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(L(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=oe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=dA(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=EA,!$()&&"undefined"!==typeof location&&location.hostname&&IA.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),RA(e,SA,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==VA&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return GP.isInMemoryStorage||!0===GP.get("previous_websocket_failure")}}]),e}();qA.responsesRequiredToBeHealthy=2,qA.healthyTimeout=3e4;var BA=function(){function e(t){x(this,e),this.initTransports_(t)}return E(e,[{key:"initTransports_",value:function(t){var n=qA&&qA.isAvailable(),r=n&&!qA.previouslyFailed();if(t.webSocketOnly&&(n||aA("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[qA];else{var i,a=this.transports_=[],o=b(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[jA,qA]}}]),e}(),zA=function(){function e(t,n,r,i,a,o,s,u,c,l){x(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nA("c:"+this.id+":"),this.transportManager_=new BA(n),this.log_("Connection created"),this.start_()}return E(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=wA((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=hA("t",e),n=hA("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=hA("t",e),n=hA("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=hA("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?rA("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rA("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),EA!==n&&aA("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),wA((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wA((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(GP.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),WA=function(){function e(){x(this,e)}return E(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),HA=function(){function e(t){x(this,e),this.allowedEvents_=t,this.listeners_={},L(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return E(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=S(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){L(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),GA=function(e){v(n,e);var t=k(n);function n(){var e;return x(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Y()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return E(n,[{key:"getInitialEvent",value:function(e){return L("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(HA),KA=function(){function e(t,n){if(x(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return E(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function YA(){return new KA("")}function QA(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function JA(e){return e.pieces_.length-e.pieceNum_}function XA(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new KA(e.pieces_,t)}function ZA(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function $A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function eO(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new KA(t,0)}function tO(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof KA)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new KA(n,0)}function nO(e){return e.pieceNum_>=e.pieces_.length}function rO(e,t){var n=QA(e),r=QA(t);if(null===n)return t;if(n===r)return rO(XA(e),XA(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function iO(e,t){for(var n=$A(e,0),r=$A(t,0),i=0;i<n.length&&i<r.length;i++){var a=cA(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function aO(e,t){if(JA(e)!==JA(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function oO(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(JA(e)>JA(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var sO=E((function e(t,n){x(this,e),this.errorPrefix_=n,this.parts_=$A(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Ee(this.parts_[r]);uO(this)}));function uO(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+cO(e))}function cO(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var lO=function(e){v(n,e);var t=k(n);function n(){var e,r,i;return x(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return E(n,[{key:"getInitialEvent",value:function(e){return L("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(HA),hO=1e3,fO=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,s,u,c){var l;if(x(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=nA("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=hO,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!$())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return lO.getInstance().on("visible",l.onVisible_,d(l)),-1===e.host.indexOf("fblocal")&&GA.getInstance().on("online",l.onOnline_,d(l)),l}return E(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(oe(i)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new H,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=se(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=se(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+oe(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):rA("Unrecognized action received from server: "+oe(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hO,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=hO,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=hO),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=_(R().mark((function e(){var t,r,i,a,o,s,u,l,h,f,d,p,v,m,y=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,l=function(){u?u.close():(s=!0,i())},h=function(e){L(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=c(d,2),v=p[0],m=p[1],s?tA("getToken() completed but was canceled"):(tA("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,u=new zA(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){aA(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&aA(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){tA("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){tA("Resuming connection for reason: "+e),delete this.interruptReasons_[e],le(this.interruptReasons_)&&(this.reconnectDelay_=hO,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return fA(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new KA(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){tA("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){tA("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=b(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=b(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";$()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+qP.replace(/\./g,"-")]=1,Y()?e["framework.cordova"]=1:X()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=GA.getInstance().currentlyOnline();return le(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ue(e,"w")){var n=ce(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();aA("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(WA);fO.nextPersistentConnectionId_=0,fO.nextConnectionId_=0;var dO,pO=function(){function e(t,n){x(this,e),this.name=t,this.node=n}return E(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),vO=function(){function e(){x(this,e)}return E(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new pO(sA,e),r=new pO(sA,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return pO.MIN}}]),e}(),mO=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"compare",value:function(e,t){return cA(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw F("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return pO.MIN}},{key:"maxPost",value:function(){return new pO(uA,dO)}},{key:"makePost",value:function(e,t){return L("string"===typeof e,"KeyIndex indexValue must always be a string."),new pO(e,dO)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return dO},set:function(e){dO=e}}]),n}(vO),yO=new mO,gO=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;x(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return E(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),kO=function(){function e(t,n,r,i,a){x(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:_O.EMPTY_NODE,this.right=null!=a?a:_O.EMPTY_NODE}return E(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return _O.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return _O.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();kO.RED=!0,kO.BLACK=!1;var bO,wO=function(){function e(){x(this,e)}return E(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new kO(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),_O=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;x(this,e),this.comparator_=t,this.root_=n}return E(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,kO.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,kO.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new gO(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new gO(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new gO(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new gO(this.root_,null,this.comparator_,!0,e)}}]),e}();function xO(e,t){return cA(e.name,t.name)}function TO(e,t){return cA(e,t)}_O.EMPTY_NODE=new wO;var EO,IO,SO,CO=function(e){return"number"===typeof e?"number:"+vA(e):"string:"+e},NO=function(e){if(e.isLeafNode()){var t=e.val();L("string"===typeof t||"number"===typeof t||"object"===typeof t&&ue(t,".sv"),"Priority must be a string or number.")}else L(e===bO||e.isEmpty(),"priority of unexpected type.");L(e===bO||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},RO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;x(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,L(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),NO(this.priorityNode_)}return E(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return nO(t)?this:".priority"===QA(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=QA(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(L(".priority"!==r||1===JA(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(XA(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+CO(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?vA(this.value_):this.value_,this.lazyHash_=JP(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(L(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return L(i>=0,"Unknown leaf type: "+n),L(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return EO},set:function(e){EO=e}}]),e}();RO.VALUE_TYPE_ORDER=["object","boolean","number","string"];var PO,AO,OO=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?cA(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return pO.MIN}},{key:"maxPost",value:function(){return new pO(uA,new RO("[PRIORITY-POST]",SO))}},{key:"makePost",value:function(e,t){var n=IO(e);return new pO(t,new RO("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(vO),DO=new OO,MO=Math.log(2),LO=function(){function e(t){x(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/MO,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return E(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),FO=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new kO(o,a.node,kO.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new kO(o,a.node,kO.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new kO(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,kO.BLACK):(s(h,kO.BLACK),s(h,kO.RED))}return a}(new LO(e.length));return new _O(r||t,a)},jO={},UO=function(){function e(t,n){x(this,e),this.indexes_=t,this.indexSet_=n}return E(e,[{key:"get",value:function(e){var t=ce(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _O?t:null}},{key:"hasIndex",value:function(e){return ue(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){L(t!==yO,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(pO.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?FO(i,t.getCompare()):jO;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=he(this.indexes_,(function(e,i){var a=ce(r.indexSet_,i);if(L(a,"Missing index implementation for "+i),e===jO){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(pO.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),FO(o,a.getCompare())}return jO}var c=n.get(t.name),l=e;return c&&(l=l.remove(new pO(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(he(this.indexes_,(function(e){if(e===jO)return e;var r=n.get(t.name);return r?e.remove(new pO(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return L(jO&&DO,"ChildrenNode.ts has not been loaded"),PO=PO||new e({".priority":jO},{".priority":DO})}}]),e}(),VO=function(){function e(t,n,r){x(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&NO(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return E(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||AO}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?AO:t}},{key:"getChild",value:function(e){var t=QA(e);return null===t?this:this.getImmediateChild(t).getChild(XA(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(L(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new pO(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?AO:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=QA(e);if(null===n)return t;L(".priority"!==QA(e)||1===JA(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(XA(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(DO,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+CO(this.getPriority().val())+":"),this.forEachChild(DO,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":JP(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new pO(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new pO(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new pO(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,pO.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,pO.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===qO?-1:0}},{key:"withIndex",value:function(t){if(t===yO||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===yO||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(DO),r=t.getIterator(DO),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===yO?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return AO||(AO=new e(new _O(TO),null,UO.Default))}}]),e}();VO.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var qO=new(function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.call(this,new _O(TO),VO.EMPTY_NODE,UO.Default)}return E(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return VO.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(VO));Object.defineProperties(pO,{MIN:{value:new pO(sA,VO.EMPTY_NODE)},MAX:{value:new pO(uA,qO)}}),mO.__EMPTY_NODE=VO.EMPTY_NODE,RO.__childrenNodeConstructor=VO,bO=qO,function(e){SO=e}(qO);function BO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return VO.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),L(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new RO(n,BO(t))}if(e instanceof Array){var r=VO.EMPTY_NODE;return pA(e,(function(t,n){if(ue(e,t)&&"."!==t.substring(0,1)){var i=BO(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(BO(t))}var i=[],a=!1,o=e;if(pA(o,(function(e,t){if("."!==e.substring(0,1)){var n=BO(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new pO(e,n)))}})),0===i.length)return VO.EMPTY_NODE;var s=FO(i,xO,(function(e){return e.name}),TO);if(a){var u=FO(i,DO.getCompare());return new VO(s,BO(t),new UO({".priority":u},{".priority":DO}))}return new VO(s,BO(t),UO.Default)}!function(e){IO=e}(BO);var zO=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this)).indexPath_=e,L(!nO(e)&&".priority"!==QA(e),"Can't create PathIndex with empty path or .priority key"),r}return E(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?cA(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=BO(e),r=VO.EMPTY_NODE.updateChild(this.indexPath_,n);return new pO(t,r)}},{key:"maxPost",value:function(){var e=VO.EMPTY_NODE.updateChild(this.indexPath_,qO);return new pO(uA,e)}},{key:"toString",value:function(){return $A(this.indexPath_,0).join("/")}}]),n}(vO),WO=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?cA(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return pO.MIN}},{key:"maxPost",value:function(){return pO.MAX}},{key:"makePost",value:function(e,t){var n=BO(e);return new pO(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(vO),HO=new WO,GO="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",KO=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=GO.charAt(n%64),n=Math.floor(n/64);L(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=GO.charAt(t[r]);return L(20===o.length,"nextPushId: Length should be 20."),o}}(),YO=function(e){if("2147483647"===e)return"-";var t=kA(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return uA;var a=n[i],o=GO.charAt(GO.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},QO=function(e){if("-2147483648"===e)return sA;var t=kA(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=GO.charAt(GO.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function JO(e){return{type:"value",snapshotNode:e}}function XO(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ZO(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function $O(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var eD=function(){function e(t){x(this,e),this.index_=t}return E(e,[{key:"updateChild",value:function(e,t,n,r,i,a){L(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(ZO(t,o)):L(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(XO(t,n)):a.trackChildChange($O(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(DO,(function(e,r){t.hasChild(e)||n.trackChildChange(ZO(e,r))})),t.isLeafNode()||t.forEachChild(DO,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange($O(t,r,i))}else n.trackChildChange(XO(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?VO.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),tD=function(){function e(t){x(this,e),this.indexedFilter_=new eD(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return E(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new pO(t,n))||(n=VO.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=VO.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(VO.EMPTY_NODE);var i=this;return t.forEachChild(DO,(function(e,t){i.matches(new pO(e,t))||(r=r.updateImmediateChild(e,VO.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),nD=function(){function e(t){x(this,e),this.rangedFilter_=new tD(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return E(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new pO(t,n))||(n=VO.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=VO.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=VO.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(VO.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,VO.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;L(s.numChildren()===this.limit_,"");var u=new pO(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange($O(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(ZO(t,h));var p=s.updateImmediateChild(t,VO.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(XO(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(ZO(c.name,c.node)),i.trackChildChange(XO(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,VO.EMPTY_NODE)):e}}]),e}(),rD=function(){function e(){x(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=DO}return E(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sA}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uA}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===DO}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function iD(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function aD(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function oD(e,t){var n=e.copy();return n.index_=t,n}function sD(e){var t,n={};return e.isDefault()||(e.index_===DO?t="$priority":e.index_===HO?t="$value":e.index_===yO?t="$key":(L(e.index_ instanceof zO,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=oe(t),e.startSet_&&(n.startAt=oe(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+oe(e.indexStartName_))),e.endSet_&&(n.endAt=oe(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+oe(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function uD(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==DO&&(t.i=e.index_.toString()),t}var cD=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o;return x(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=nA("p:rest:"),o.listens_={},o}return E(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=sD(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ce(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=sD(e._queryParams),r=e._path.toString(),i=new H;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+pe(n);t.log_("Sending REST request for "+u);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+u+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=ae(l.responseText)}catch(n){aA("Failed to parse JSON response for "+u+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&aA("Got unsuccessful REST response for "+u+" Status: "+l.status),r(l.status);r=null}},l.open("GET",u,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(WA),lD=function(){function e(){x(this,e),this.rootNode_=VO.EMPTY_NODE}return E(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function hD(){return{value:null,children:new Map}}function fD(e,t,n){if(nO(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=QA(t);e.children.has(r)||e.children.set(r,hD()),fD(e.children.get(r),t=XA(t),n)}}function dD(e,t){if(nO(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(DO,(function(t,n){fD(e,new KA(t),n)})),dD(e,t)}if(e.children.size>0){var r=QA(t);if(t=XA(t),e.children.has(r))dD(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function pD(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){pD(r,new KA(t.toString()+"/"+e),n)}))}var vD,mD=function(){function e(t){x(this,e),this.collection_=t,this.last_=null}return E(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&pA(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),yD=function(){function e(t,n){x(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new mD(t);var r=1e4+2e4*Math.random();wA(this.reportStats_.bind(this),Math.floor(r))}return E(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;pA(t,(function(t,i){i>0&&ue(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),wA(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function gD(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(vD||(vD={}));var kD,bD=function(){function e(t,n,r){x(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=vD.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return E(e,[{key:"operationForChild",value:function(t){if(nO(this.path)){if(null!=this.affectedTree.value)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new KA(t));return new e(YA(),n,this.revert)}return L(QA(this.path)===t,"operationForChild called for unrelated child."),new e(XA(this.path),this.affectedTree,this.revert)}}]),e}(),wD=function(){function e(t,n){x(this,e),this.source=t,this.path=n,this.type=vD.LISTEN_COMPLETE}return E(e,[{key:"operationForChild",value:function(t){return nO(this.path)?new e(this.source,YA()):new e(this.source,XA(this.path))}}]),e}(),_D=function(){function e(t,n,r){x(this,e),this.source=t,this.path=n,this.snap=r,this.type=vD.OVERWRITE}return E(e,[{key:"operationForChild",value:function(t){return nO(this.path)?new e(this.source,YA(),this.snap.getImmediateChild(t)):new e(this.source,XA(this.path),this.snap)}}]),e}(),xD=function(){function e(t,n,r){x(this,e),this.source=t,this.path=n,this.children=r,this.type=vD.MERGE}return E(e,[{key:"operationForChild",value:function(t){if(nO(this.path)){var n=this.children.subtree(new KA(t));return n.isEmpty()?null:n.value?new _D(this.source,YA(),n.value):new e(this.source,YA(),n)}return L(QA(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,XA(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),TD=function(){function e(t,n,r){x(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return E(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(nO(e))return this.isFullyInitialized()&&!this.filtered_;var t=QA(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),ED=E((function e(t){x(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function ID(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw F("Should only compare child_ events.");var r=new pO(t.childName,t.snapshotNode),i=new pO(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function SD(e,t){return{eventCache:e,serverCache:t}}function CD(e,t,n,r){return SD(new TD(t,n,r),e.serverCache)}function ND(e,t,n,r){return SD(e.eventCache,new TD(t,n,r))}function RD(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function PD(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var AD=function(){return kD||(kD=new _O(lA)),kD},OD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AD();x(this,e),this.value=t,this.children=n}return E(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:YA(),value:this.value};if(nO(e))return null;var n=QA(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(XA(e),t);return null!=i?{path:tO(new KA(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(nO(t))return this;var n=QA(t),r=this.children.get(n);return null!==r?r.subtree(XA(t)):new e(null)}},{key:"set",value:function(t,n){if(nO(t))return new e(n,this.children);var r=QA(t),i=(this.children.get(r)||new e(null)).set(XA(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(nO(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=QA(t),r=this.children.get(n);if(r){var i,a=r.remove(XA(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(nO(e))return this.value;var t=QA(e),n=this.children.get(t);return n?n.get(XA(e)):null}},{key:"setTree",value:function(t,n){if(nO(t))return n;var r,i=QA(t),a=(this.children.get(i)||new e(null)).setTree(XA(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(YA(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(tO(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,YA(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(nO(e))return null;var i=QA(e),a=this.children.get(i);return a?a.findOnPath_(XA(e),tO(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,YA(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(nO(t))return this;this.value&&r(n,this.value);var i=QA(t),a=this.children.get(i);return a?a.foreachOnPath_(XA(t),tO(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(YA(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(tO(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return pA(t,(function(e,t){n=n.set(new KA(e),t)})),n}}]),e}(),DD=function(){function e(t){x(this,e),this.writeTree_=t}return E(e,null,[{key:"empty",value:function(){return new e(new OD(null))}}]),e}();function MD(e,t,n){if(nO(t))return new DD(new OD(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=rO(i,t);return a=a.updateChild(o,n),new DD(e.writeTree_.set(i,a))}var s=new OD(n),u=e.writeTree_.setTree(t,s);return new DD(u)}function LD(e,t,n){var r=e;return pA(n,(function(e,n){r=MD(r,tO(t,e),n)})),r}function FD(e,t){if(nO(t))return DD.empty();var n=e.writeTree_.setTree(t,new OD(null));return new DD(n)}function jD(e,t){return null!=UD(e,t)}function UD(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(rO(n.path,t)):null}function VD(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(DO,(function(e,n){t.push(new pO(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new pO(e,n.value))})),t}function qD(e,t){if(nO(t))return e;var n=UD(e,t);return new DD(null!=n?new OD(n):e.writeTree_.subtree(t))}function BD(e){return e.writeTree_.isEmpty()}function zD(e,t){return WD(YA(),e.writeTree_,t)}function WD(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(L(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=WD(tO(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(tO(e,".priority"),r)),n}function HD(e,t){return aM(t,e)}function GD(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function KD(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));L(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&YD(s,r.path)?i=!1:oO(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=JD(e.allWrites,QD,YA()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=FD(e.visibleWrites,r.path):pA(r.children,(function(t){e.visibleWrites=FD(e.visibleWrites,tO(r.path,t))}));return!0}return!1}function YD(e,t){if(e.snap)return oO(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&oO(tO(e.path,n),t))return!0;return!1}function QD(e){return e.visible}function JD(e,t,n){for(var r=DD.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)oO(n,o)?r=MD(r,s=rO(n,o),a.snap):oO(o,n)&&(s=rO(o,n),r=MD(r,YA(),a.snap.getChild(s)));else{if(!a.children)throw F("WriteRecord should have .snap or .children");if(oO(n,o))r=LD(r,s=rO(n,o),a.children);else if(oO(o,n))if(nO(s=rO(o,n)))r=LD(r,YA(),a.children);else{var u=ce(a.children,QA(s));if(u){var c=u.getChild(XA(s));r=MD(r,YA(),c)}}}}}return r}function XD(e,t,n,r,i){if(r||i){var a=qD(e.visibleWrites,t);if(!i&&BD(a))return n;if(i||null!=n||jD(a,YA())){return zD(JD(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(oO(e.path,t)||oO(t,e.path))}),t),n||VO.EMPTY_NODE)}return null}var o=UD(e.visibleWrites,t);if(null!=o)return o;var s=qD(e.visibleWrites,t);return BD(s)?n:null!=n||jD(s,YA())?zD(s,n||VO.EMPTY_NODE):null}function ZD(e,t,n,r){return XD(e.writeTree,e.treePath,t,n,r)}function $D(e,t){return function(e,t,n){var r=VO.EMPTY_NODE,i=UD(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(DO,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=qD(e.visibleWrites,t);return n.forEachChild(DO,(function(e,t){var n=zD(qD(a,new KA(e)),t);r=r.updateImmediateChild(e,n)})),VD(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return VD(qD(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function eM(e,t,n,r){return function(e,t,n,r,i){L(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=tO(t,n);if(jD(e.visibleWrites,a))return null;var o=qD(e.visibleWrites,a);return BD(o)?i.getChild(n):zD(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function tM(e,t){return function(e,t){return UD(e.visibleWrites,t)}(e.writeTree,tO(e.treePath,t))}function nM(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=qD(e.visibleWrites,t),c=UD(u,YA());if(null!=c)s=c;else{if(null==n)return[];s=zD(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function rM(e,t,n){return function(e,t,n,r){var i=tO(t,n),a=UD(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?zD(qD(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function iM(e,t){return aM(tO(e.treePath,t),e.writeTree)}function aM(e,t){return{treePath:e,writeTree:t}}var oM=function(){function e(){x(this,e),this.changeMap=new Map}return E(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;L("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),L(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,$O(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ZO(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,XO(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw F("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,$O(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),sM=new(function(){function e(){x(this,e)}return E(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),uM=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;x(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return E(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new TD(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rM(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:PD(this.viewCache_),i=nM(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function cM(e,t,n,r,i){var a,o,s=new oM;if(n.type===vD.OVERWRITE){var u=n;u.source.fromUser?a=fM(e,t,u.path,u.snap,r,i,s):(L(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!nO(u.path),a=hM(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===vD.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=tO(n,r);dM(t,QA(c))&&(s=fM(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=tO(n,r);dM(t,QA(c))||(s=fM(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(L(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=vM(e,t,c.path,c.children,r,i,o,s))}else if(n.type===vD.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=tM(r,n))return t;var s,u=new uM(r,t,i),c=t.eventCache.getNode();if(nO(n)||".priority"===QA(n)){var l;if(t.serverCache.isFullyInitialized())l=ZD(r,PD(t));else{var h=t.serverCache.getNode();L(h instanceof VO,"serverChildren would be complete if leaf node"),l=$D(r,h)}l=l,s=e.filter.updateFullNode(c,l,a)}else{var f=QA(n),d=rM(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,XA(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,VO.EMPTY_NODE,XA(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=ZD(r,PD(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=tM(r,YA()),CD(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=tM(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(nO(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return hM(e,t,n,u.getNode().getChild(n),i,a,s,o);if(nO(n)){var c=new OD(null);return u.getNode().forEachChild(yO,(function(e,t){c=c.set(new KA(e),t)})),vM(e,t,n,c,i,a,s,o)}return t}var l=new OD(null);return r.foreach((function(e,t){var r=tO(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),vM(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==vD.LISTEN_COMPLETE)throw F("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=ND(t,a.getNode(),a.isFullyInitialized()||nO(n),a.isFiltered());return lM(e,o,n,r,sM,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=RD(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(JO(RD(t)))}}(t,a,h),{viewCache:a,changes:h}}function lM(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=tM(r,n))return t;if(nO(n))if(L(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=PD(t),l=$D(r,c instanceof VO?c:VO.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=ZD(r,PD(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=QA(n);if(".priority"===f){L(1===JA(n),"Can't have a priority with additional path components");var d=u.getNode(),p=eM(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=XA(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var y=eM(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(f).updateChild(m,y):u.getNode().getImmediateChild(f)}else v=rM(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,i,a):u.getNode()}}return CD(t,o,u.isFullyInitialized()||nO(n),e.filter.filtersNodes())}function hM(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(nO(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=QA(n);if(!c.isCompleteForPath(n)&&JA(n)>1)return t;var d=XA(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,sM,null)}var v=ND(t,u,c.isFullyInitialized()||nO(n),l.filtersNodes());return lM(e,v,n,i,new uM(i,v,a),s)}function fM(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new uM(i,t,a);if(nO(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=CD(t,u,!0,e.filter.filtersNodes());else{var h=QA(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=CD(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=XA(n),p=c.getNode().getImmediateChild(h);if(nO(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===ZA(d)&&v.getChild(eO(d)).isEmpty()?v:v.updateChild(d,r):VO.EMPTY_NODE}if(p.equals(f))s=t;else s=CD(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function dM(e,t){return e.eventCache.isCompleteForChild(t)}function pM(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function vM(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=nO(n)?r:new OD(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=pM(0,t.serverCache.getNode().getImmediateChild(n),r);c=hM(e,c,new KA(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=pM(0,t.serverCache.getNode().getImmediateChild(n),r);c=hM(e,c,new KA(n),h,i,a,o,s)}})),c}var mM,yM=function(){function e(t,n){x(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new eD(i.getIndex()),o=(r=i).loadsAllData()?new eD(r.getIndex()):r.hasLimit()?new nD(r):new tD(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(VO.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(VO.EMPTY_NODE,u.getNode(),null),h=new TD(c,s.isFullyInitialized(),a.filtersNodes()),f=new TD(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=SD(f,h),this.eventGenerator_=new ED(this.query_)}return E(e,[{key:"query",get:function(){return this.query_}}]),e}();function gM(e,t){var n=PD(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!nO(t)&&!n.getImmediateChild(QA(t)).isEmpty())?n.getChild(t):null}function kM(e){return 0===e.eventRegistrations_.length}function bM(e,t,n){var r=[];if(n){L(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function wM(e,t,n,r){t.type===vD.MERGE&&null!==t.source.queryId&&(L(PD(e.viewCache_),"We should always have a full cache before handling merges"),L(RD(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=cM(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,L(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),L(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),L(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,_M(e,s.changes,s.viewCache.eventCache.getNode(),null)}function _M(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),ID(e,i,"child_removed",t,r,n),ID(e,i,"child_added",t,r,n),ID(e,i,"child_moved",a,r,n),ID(e,i,"child_changed",t,r,n),ID(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var xM,TM=E((function e(){x(this,e),this.views=new Map}));function EM(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return L(null!=a,"SyncTree gave us an op for an invalid query."),wM(a,t,n,r)}var o,s=[],u=b(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(wM(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function IM(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=ZD(n,i?r:null),u=!1;s?u=!0:r instanceof VO?(s=$D(n,r),u=!1):(s=VO.EMPTY_NODE,u=!1);var c=SD(new TD(s,u,!1),new TD(r,i,!1));return new yM(t,c)}return o}function SM(e,t,n,r,i,a){var o=IM(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(DO,(function(e,t){r.push(XO(e,t))})),n.isFullyInitialized()&&r.push(JO(n.getNode())),_M(e,r,n.getNode(),t)}(o,n)}function CM(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=OM(e);if("default"===i){var u,l=b(e.views.entries());try{for(l.s();!(u=l.n()).done;){var h=c(u.value,2),f=h[0],d=h[1];o=o.concat(bM(d,n,r)),kM(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(bM(p,n,r)),kM(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!OM(e)&&a.push(new(L(mM,"Reference.ts has not been loaded"),mM)(t._repo,t._path)),{removed:a,events:o}}function NM(e){var t,n=[],r=b(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function RM(e,t){var n,r=null,i=b(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||gM(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function PM(e,t){if(t._queryParams.loadsAllData())return DM(e);var n=t._queryIdentifier;return e.views.get(n)}function AM(e,t){return null!=PM(e,t)}function OM(e){return null!=DM(e)}function DM(e){var t,n=b(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var MM=1,LM=E((function e(t){x(this,e),this.listenProvider_=t,this.syncPointTree_=new OD(null),this.pendingWriteTree_={visibleWrites:DD.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function FM(e,t,n,r,i){return function(e,t,n,r,i){L(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=MD(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?HM(e,new _D({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function jM(e,t,n,r){!function(e,t,n,r){L(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=LD(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=OD.fromObject(n);return HM(e,new xD({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function UM(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=GD(e.pendingWriteTree_,t),i=KD(e.pendingWriteTree_,t);if(i){var a=new OD(null);return null!=r.snap?a=a.set(YA(),!0):pA(r.children,(function(e){a=a.set(new KA(e),!0)})),HM(e,new bD(r.path,a,n))}return[]}function VM(e,t,n){return HM(e,new _D({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function qM(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||AM(a,t))){var s=CM(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;o=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return OM(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&OM(t))return[DM(t)];var r=[];return t&&(r=NM(t)),pA(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,m=YM(e,p);e.listenProvider_.startListening(eL(v),QM(e,v),m.hashFn,m.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(eL(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(JM(t));e.listenProvider_.stopListening(eL(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=JM(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,u)}return o}function BM(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=rO(e,r);i=i||RM(t,n),a=a||OM(t)}));var o,s=e.syncPointTree_.get(r);(s?(a=a||OM(s),i=i||RM(s,YA())):(s=new TM,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i)?o=!0:(o=!1,i=VO.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=RM(t,YA());n&&(i=i.updateImmediateChild(e,n))})));var u=AM(s,t);if(!u&&!t._queryParams.loadsAllData()){var c=JM(t);L(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=MM++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var h=SM(s,t,n,HD(e.pendingWriteTree_,r),i,o);if(!u&&!a){var f=PM(s,t);h=h.concat(function(e,t,n){var r=t._path,i=QM(e,t),a=YM(e,n),o=e.listenProvider_.startListening(eL(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)L(!OM(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!nO(e)&&t&&OM(t))return[DM(t).query];var r=[];return t&&(r=r.concat(NM(t).map((function(e){return e.query})))),pA(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(eL(l),QM(e,l))}return o}(e,t,f))}return h}function zM(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=RM(n,rO(e,t));if(r)return r}));return XD(r,t,i,n,!0)}function WM(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=rO(e,n);r=r||RM(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||RM(i,YA()):(i=new TM,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new TD(r,!0,!1):null;return function(e){return RD(e.viewCache_)}(IM(i,t,HD(e.pendingWriteTree_,t._path),a?o.getNode():VO.EMPTY_NODE,a))}function HM(e,t){return GM(t,e.syncPointTree_,null,HD(e.pendingWriteTree_,YA()))}function GM(e,t,n,r){if(nO(e.path))return KM(e,t,n,r);var i=t.get(YA());null==n&&null!=i&&(n=RM(i,YA()));var a=[],o=QA(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=iM(r,o);a=a.concat(GM(s,u,c,l))}return i&&(a=a.concat(EM(i,e,r,n))),a}function KM(e,t,n,r){var i=t.get(YA());null==n&&null!=i&&(n=RM(i,YA()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=iM(r,t),u=e.operationForChild(t);u&&(a=a.concat(KM(u,i,o,s)))})),i&&(a=a.concat(EM(i,e,r,n))),a}function YM(e,t){var n=t.query,r=QM(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||VO.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=XM(e,n);if(r){var i=ZM(r),a=i.path,o=i.queryId,s=rO(a,t);return $M(e,a,new wD(gD(o),s))}return[]}(e,n._path,r):function(e,t){return HM(e,new wD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return qM(e,n,null,i)}}}function QM(e,t){var n=JM(t);return e.queryToTagMap.get(n)}function JM(e){return e._path.toString()+"$"+e._queryIdentifier}function XM(e,t){return e.tagToQueryMap.get(t)}function ZM(e){var t=e.indexOf("$");return L(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new KA(e.substr(0,t))}}function $M(e,t,n){var r=e.syncPointTree_.get(t);return L(r,"Missing sync point for query tag that we're tracking"),EM(r,n,HD(e.pendingWriteTree_,t),null)}function eL(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(L(xM,"Reference.ts has not been loaded"),xM)(e._repo,e._path):e}var tL=function(){function e(t){x(this,e),this.node_=t}return E(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),nL=function(){function e(t,n){x(this,e),this.syncTree_=t,this.path_=n}return E(e,[{key:"getImmediateChild",value:function(t){var n=tO(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return zM(this.syncTree_,this.path_)}}]),e}(),rL=function(e,t,n){return e&&"object"===typeof e?(L(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?iL(e[".sv"],t,n):"object"===typeof e[".sv"]?aL(e[".sv"],t):void L(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},iL=function(e,t,n){if("timestamp"===e)return n.timestamp;L(!1,"Unexpected server value: "+e)},aL=function(e,t,n){e.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&L(!1,"Unexpected increment value: "+r);var i=t.node();if(L(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},oL=function(e,t,n,r){return uL(t,new nL(n,e),r)},sL=function(e,t,n){return uL(e,new tL(t),n)};function uL(e,t,n){var r,i=e.getPriority().val(),a=rL(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=rL(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new RO(s,BO(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new RO(a))),u.forEachChild(DO,(function(e,i){var a=uL(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var cL=E((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};x(this,e),this.name=t,this.parent=n,this.node=r}));function lL(e,t){for(var n=t instanceof KA?t:new KA(t),r=e,i=QA(n);null!==i;){var a=ce(r.node.children,i)||{children:{},childCount:0};r=new cL(i,r,a),i=QA(n=XA(n))}return r}function hL(e){return e.node.value}function fL(e,t){e.node.value=t,yL(e)}function dL(e){return e.node.childCount>0}function pL(e,t){pA(e.node.children,(function(n,r){t(new cL(n,e,r))}))}function vL(e,t,n,r){n&&!r&&t(e),pL(e,(function(e){vL(e,t,!0,r)})),n&&r&&t(e)}function mL(e){return new KA(null===e.parent?e.name:mL(e.parent)+"/"+e.name)}function yL(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===hL(e)&&!dL(e)}(n),i=ue(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,yL(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,yL(e))}(e.parent,e.name,e)}var gL=/[\[\].#$\/\u0000-\u001F\u007F]/,kL=/[\[\].#$\u0000-\u001F\u007F]/,bL=10485760,wL=function(e){return"string"===typeof e&&0!==e.length&&!gL.test(e)},_L=function(e){return"string"===typeof e&&0!==e.length&&!kL.test(e)},xL=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!oA(e)||e&&"object"===typeof e&&ue(e,".sv")},TL=function(e,t,n,r){r&&void 0===t||EL(_e(e,"value"),t,n)},EL=function e(t,n,r){var i=r instanceof KA?new sO(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+cO(i));if("function"===typeof n)throw new Error(t+"contains a function "+cO(i)+" with contents = "+n.toString());if(oA(n))throw new Error(t+"contains "+n.toString()+" "+cO(i));if("string"===typeof n&&n.length>bL/3&&Ee(n)>bL)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+cO(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(pA(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!wL(n)))throw new Error(t+" contains an invalid key ("+n+") "+cO(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ee(t),uO(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Ee(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+cO(i)+" in addition to actual children.")}},IL=function(e,t,n,r){if(!r||void 0!==t){var i=_e(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];pA(t,(function(e,t){var r=new KA(e);if(EL(i,t,tO(n,r)),".priority"===ZA(r)&&!xL(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=$A(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!wL(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(iO);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&oO(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},SL=function(e,t,n){if(!n||void 0!==t){if(oA(t))throw new Error(_e(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xL(t))throw new Error(_e(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},CL=function(e,t,n,r){if((!r||void 0!==n)&&!wL(n))throw new Error(_e(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},NL=function(e,t,n,r){if((!r||void 0!==n)&&!_L(n))throw new Error(_e(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},RL=function(e,t){if(".info"===QA(t))throw new Error(e+" failed = Can't modify data under /.info/")},PL=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!wL(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),_L(e)}(n))throw new Error(_e(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},AL=E((function e(){x(this,e),this.eventLists_=[],this.recursionDepth_=0}));function OL(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||aO(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function DL(e,t,n){OL(e,n),LL(e,(function(e){return aO(e,t)}))}function ML(e,t,n){OL(e,n),LL(e,(function(e){return oO(e,t)||oO(t,e)}))}function LL(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(FL(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function FL(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();ZP&&tA("event: "+n.toString()),bA(r)}}}var jL="repo_interrupt",UL=function(){function e(t,n,r,i){x(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new AL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hD(),this.transactionQueueTree_=new cL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return E(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function VL(e,t,n){if(e.stats_=DA(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new cD(e.repoInfo_,(function(t,n,r,i){zL(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return WL(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new fO(e.repoInfo_,t,(function(t,n,r,i){zL(e,t,n,r,i)}),(function(t){WL(e,t)}),(function(t){!function(e,t){pA(t,(function(t,n){HL(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return OA[n]||(OA[n]=t()),OA[n]}(e.repoInfo_,(function(){return new yD(e.stats_,e.server_)})),e.infoData_=new lD,e.infoSyncTree_=new LM({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=VM(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),HL(e,"connected",!1),e.serverSyncTree_=new LM({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);ML(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function qL(e){var t=e.infoData_.getNode(new KA(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function BL(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:qL(e)})}function zL(e,t,n,r,i){e.dataUpdateCount++;var a=new KA(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=he(n,(function(e){return BO(e)}));o=function(e,t,n,r){var i=XM(e,r);if(i){var a=ZM(i),o=a.path,s=a.queryId,u=rO(o,t),c=OD.fromObject(n);return $M(e,o,new xD(gD(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=BO(n);o=function(e,t,n,r){var i=XM(e,r);if(null!=i){var a=ZM(i),o=a.path,s=a.queryId,u=rO(o,t);return $M(e,o,new _D(gD(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var c=he(n,(function(e){return BO(e)}));o=function(e,t,n){var r=OD.fromObject(n);return HM(e,new xD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=BO(n);o=VM(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=rF(e,a)),ML(e.eventQueue_,h,o)}function WL(e,t){HL(e,"connected",t),!1===t&&function(e){ZL(e,"onDisconnectEvents");var t=BL(e),n=hD();pD(e.onDisconnect_,YA(),(function(r,i){var a=oL(r,i,e.serverSyncTree_,t);fD(n,r,a)}));var r=[];pD(n,YA(),(function(t,n){r=r.concat(VM(e.serverSyncTree_,t,n));var i=uF(e,t);rF(e,i)})),e.onDisconnect_=hD(),ML(e.eventQueue_,YA(),r)}(e)}function HL(e,t,n){var r=new KA("/.info/"+t),i=BO(n);e.infoData_.updateSnapshot(r,i);var a=VM(e.infoSyncTree_,r,i);ML(e.eventQueue_,r,a)}function GL(e){return e.nextWriteId_++}function KL(e,t,n,r,i){ZL(e,"set",{path:t.toString(),value:n,priority:r});var a=BL(e),o=BO(n,r),s=zM(e.serverSyncTree_,t),u=sL(o,s,a),c=GL(e),l=FM(e.serverSyncTree_,t,u,c,!0);OL(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||aA("set at "+t+" failed: "+n);var o=UM(e.serverSyncTree_,c,!a);ML(e.eventQueue_,t,o),$L(e,i,n,r)}));var h=uF(e,t);rF(e,h),ML(e.eventQueue_,h,[])}function YL(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&dD(e.onDisconnect_,t),$L(e,n,r,i)}))}function QL(e,t,n,r){var i=BO(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&fD(e.onDisconnect_,t,i),$L(e,r,n,a)}))}function JL(e,t,n){var r;r=".info"===QA(t._path)?qM(e.infoSyncTree_,t,n):qM(e.serverSyncTree_,t,n),DL(e.eventQueue_,t._path,r)}function XL(e){e.persistentConnection_&&e.persistentConnection_.interrupt(jL)}function ZL(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];tA.apply(void 0,[t].concat(r))}function $L(e,t,n,r){t&&bA((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function eF(e,t,n){return zM(e.serverSyncTree_,t,n)||VO.EMPTY_NODE}function tF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||sF(e,t),hL(t)){var n=aF(e,t);L(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&nF(e,mL(t),n)}else dL(t)&&pL(t,(function(t){tF(e,t)}))}function nF(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=eF(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];L(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=rO(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){ZL(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(UM(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);sF(e,lL(e.transactionQueueTree_,t)),tF(e,e.transactionQueueTree_),ML(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)bA(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{aA("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}rF(e,t)}}),o)}function rF(e,t){var n=iF(e,t),r=mL(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=rO(n,u.path),l=!1,h=void 0;if(L(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(UM(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(UM(e.serverSyncTree_,u.currentWriteId,!0));else{var f=eF(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){EL("transaction failed: Data returned ",d,u.path);var p=BO(d);"object"===typeof d&&null!=d&&ue(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,m=BL(e),y=sL(p,f,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=GL(e),o.splice(o.indexOf(v),1),i=(i=i.concat(FM(e.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(UM(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(UM(e.serverSyncTree_,u.currentWriteId,!0))}ML(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);sF(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)bA(r[c]);tF(e,e.transactionQueueTree_)}(e,aF(e,n),r),r}function iF(e,t){var n,r=e.transactionQueueTree_;for(n=QA(t);null!==n&&void 0===hL(r);)r=lL(r,n),n=QA(t=XA(t));return r}function aF(e,t){var n=[];return oF(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function oF(e,t,n){var r=hL(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);pL(t,(function(t){oF(e,t,n)}))}function sF(e,t){var n=hL(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,fL(t,n.length>0?n:void 0)}pL(t,(function(t){sF(e,t)}))}function uF(e,t){var n=mL(iF(e,t)),r=lL(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){cF(e,t)})),cF(e,r),vL(r,(function(t){cF(e,t)})),n}function cF(e,t){var n=hL(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(L(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(L(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(UM(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?fL(t,void 0):n.length=a+1,ML(e.eventQueue_,mL(t),i);for(var s=0;s<r.length;s++)bA(r[s])}}var lF=function(e,t){var n=hF(e),r=n.namespace;"firebase.com"===n.domain&&iA(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||iA("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&aA("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new NA(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new KA(n.pathString)}},hF=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=b(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):aA("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},fF=function(){function e(t,n,r,i){x(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return E(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+oe(this.snapshot.exportVal())}}]),e}(),dF=function(){function e(t,n,r){x(this,e),this.eventRegistration=t,this.error=n,this.path=r}return E(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),pF=function(){function e(t,n){x(this,e),this.snapshotCallback=t,this.cancelCallback=n}return E(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return L(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),vF=function(){function e(t,n){x(this,e),this._repo=t,this._path=n}return E(e,[{key:"cancel",value:function(){var e=new H;return YL(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){RL("OnDisconnect.remove",this._path);var e=new H;return QL(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){RL("OnDisconnect.set",this._path),TL("OnDisconnect.set",e,this._path,!1);var t=new H;return QL(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){RL("OnDisconnect.setWithPriority",this._path),TL("OnDisconnect.setWithPriority",e,this._path,!1),SL("OnDisconnect.setWithPriority",t,!1);var n=new H;return function(e,t,n,r,i){var a=BO(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&fD(e.onDisconnect_,t,a),$L(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){RL("OnDisconnect.update",this._path),IL("OnDisconnect.update",e,this._path,!1);var t=new H;return function(e,t,n,r){if(le(n))return tA("onDisconnect().update() called with empty data.  Don't do anything."),void $L(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&pA(n,(function(n,r){var i=BO(r);fD(e.onDisconnect_,tO(t,n),i)})),$L(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),mF=function(){function e(t,n,r,i){x(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return E(e,[{key:"key",get:function(){return nO(this._path)?null:ZA(this._path)}},{key:"ref",get:function(){return new bF(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=uD(this._queryParams),t=fA(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return uD(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Ie(t))instanceof e))return!1;var n=this._repo===t._repo,r=aO(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function yF(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function gF(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===yO){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==sA)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==uA)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===DO){if(null!=t&&!xL(t)||null!=n&&!xL(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(L(e.getIndex()instanceof zO||e.getIndex()===HO,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function kF(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var bF=function(e){v(n,e);var t=k(n);function n(e,r){return x(this,n),t.call(this,e,r,new rD,!1)}return E(n,[{key:"parent",get:function(){var e=eO(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(mF),wF=function(){function e(t,n,r){x(this,e),this._node=t,this.ref=n,this._index=r}return E(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new KA(t),r=TF(this.ref,t);return new e(this._node.getChild(n),r,DO)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,TF(n.ref,r),DO))}))}},{key:"hasChild",value:function(e){var t=new KA(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function _F(e,t){return(e=Ie(e))._checkNotDeleted("ref"),void 0!==t?TF(e._root,t):e._root}function xF(e,t){(e=Ie(e))._checkNotDeleted("refFromURL");var n=lF(t,e._repo.repoInfo_.nodeAdmin);PL("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||iA("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),_F(e,n.path.toString())}function TF(e,t){var n,r,i,a;return null===QA((e=Ie(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),NL(n,r,i,a)):NL("child","path",t,!1),new bF(e._repo,tO(e._path,t))}function EF(e,t){e=Ie(e),RL("push",e._path),TL("push",t,e._path,!0);var n,r=qL(e._repo),i=KO(r),a=TF(e,i),o=TF(e,i);return n=null!=t?SF(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function IF(e){return RL("remove",e._path),SF(e,null)}function SF(e,t){e=Ie(e),RL("set",e._path),TL("set",t,e._path,!1);var n=new H;return KL(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function CF(e,t){e=Ie(e),RL("setPriority",e._path),SL("setPriority",t,!1);var n=new H;return KL(e._repo,tO(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function NF(e,t,n){if(RL("setWithPriority",e._path),TL("setWithPriority",t,e._path,!1),SL("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new H;return KL(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function RF(e,t){IL("update",t,e._path,!1);var n=new H;return function(e,t,n,r){ZL(e,"update",{path:t.toString(),value:n});var i=!0,a=BL(e),o={};if(pA(n,(function(n,r){i=!1,o[n]=oL(tO(t,n),BO(r),e.serverSyncTree_,a)})),i)tA("update() called with empty data.  Don't do anything."),$L(0,r,"ok",void 0);else{var s=GL(e),u=jM(e.serverSyncTree_,t,o,s);OL(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||aA("update at "+t+" failed: "+n);var o=UM(e.serverSyncTree_,s,!a),u=o.length>0?rF(e,t):t;ML(e.eventQueue_,u,o),$L(0,r,n,i)})),pA(n,(function(n){var r=uF(e,tO(t,n));rF(e,r)})),ML(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function PF(e){return function(e,t){var n=WM(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=BO(n).withIndex(t._queryParams.getIndex()),i=VM(e.serverSyncTree_,t._path,r);return DL(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return ZL(e,"get for query "+oe(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=Ie(e))._repo,e).then((function(t){return new wF(t,new bF(e._repo,e._path),e._queryParams.getIndex())}))}var AF=function(){function e(t){x(this,e),this.callbackContext=t}return E(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new fF("value",this,new wF(e.snapshotNode,new bF(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new dF(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),OF=function(){function e(t,n){x(this,e),this.eventType=t,this.callbackContext=n}return E(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new dF(this,e,t):null}},{key:"createEvent",value:function(e,t){L(null!=e.childName,"Child events should have a childName.");var n=TF(new bF(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new fF(e.type,this,new wF(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function DF(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){JL(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new pF(n,a||void 0),c="value"===t?new AF(u):new OF(t,u);return function(e,t,n){var r;r=".info"===QA(t._path)?BM(e.infoSyncTree_,t,n):BM(e.serverSyncTree_,t,n),DL(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return JL(e._repo,e,c)}}function MF(e,t,n,r){return DF(e,"value",t,n,r)}function LF(e,t,n,r){return DF(e,"child_added",t,n,r)}function FF(e,t,n,r){return DF(e,"child_changed",t,n,r)}function jF(e,t,n,r){return DF(e,"child_moved",t,n,r)}function UF(e,t,n,r){return DF(e,"child_removed",t,n,r)}function VF(e,t,n){var r=null,i=n?new pF(n):null;"value"===t?r=new AF(i):t&&(r=new OF(t,i)),JL(e._repo,e,r)}var qF=E((function e(){x(this,e)})),BF=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this))._value=e,i._key=r,i}return E(n,[{key:"_apply",value:function(e){TL("endAt",this._value,e._path,!0);var t=aD(e._queryParams,this._value,this._key);if(kF(t),gF(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mF(e._repo,e._path,t,e._orderByCalled)}}]),n}(qF);function zF(e,t){return CL("endAt","key",t,!0),new BF(e,t)}var WF=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this))._value=e,i._key=r,i}return E(n,[{key:"_apply",value:function(e){TL("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===yO?("string"===typeof t&&(t=QO(t)),r=aD(e,t,n)):r=aD(e,t,null==n?sA:QO(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(kF(t),gF(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mF(e._repo,e._path,t,e._orderByCalled)}}]),n}(qF);function HF(e,t){return CL("endBefore","key",t,!0),new WF(e,t)}var GF=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this))._value=e,i._key=r,i}return E(n,[{key:"_apply",value:function(e){TL("startAt",this._value,e._path,!0);var t=iD(e._queryParams,this._value,this._key);if(kF(t),gF(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mF(e._repo,e._path,t,e._orderByCalled)}}]),n}(qF);function KF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return CL("startAt","key",t,!0),new GF(e,t)}var YF=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this))._value=e,i._key=r,i}return E(n,[{key:"_apply",value:function(e){TL("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===yO?("string"===typeof t&&(t=YO(t)),r=iD(e,t,n)):r=iD(e,t,null==n?uA:YO(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(kF(t),gF(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mF(e._repo,e._path,t,e._orderByCalled)}}]),n}(qF);function QF(e,t){return CL("startAfter","key",t,!0),new YF(e,t)}var JF=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this))._limit=e,r}return E(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mF(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(qF);function XF(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new JF(e)}var ZF=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this))._limit=e,r}return E(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mF(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(qF);function $F(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ZF(e)}var ej=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this))._path=e,r}return E(n,[{key:"_apply",value:function(e){yF(e,"orderByChild");var t=new KA(this._path);if(nO(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new zO(t),r=oD(e._queryParams,n);return gF(r),new mF(e._repo,e._path,r,!0)}}]),n}(qF);function tj(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return NL("orderByChild","path",e,!1),new ej(e)}var nj=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"_apply",value:function(e){yF(e,"orderByKey");var t=oD(e._queryParams,yO);return gF(t),new mF(e._repo,e._path,t,!0)}}]),n}(qF);function rj(){return new nj}var ij=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"_apply",value:function(e){yF(e,"orderByPriority");var t=oD(e._queryParams,DO);return gF(t),new mF(e._repo,e._path,t,!0)}}]),n}(qF);function aj(){return new ij}var oj=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"_apply",value:function(e){yF(e,"orderByValue");var t=oD(e._queryParams,HO);return gF(t),new mF(e._repo,e._path,t,!0)}}]),n}(qF);function sj(){return new oj}var uj=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this))._value=e,i._key=r,i}return E(n,[{key:"_apply",value:function(e){if(TL("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new BF(this._value,this._key)._apply(new GF(this._value,this._key)._apply(e))}}]),n}(qF);function cj(e,t){return CL("equalTo","key",t,!0),new uj(e,t)}function lj(e){for(var t=Ie(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){L(!mM,"__referenceConstructor has already been defined"),mM=e}(bF),function(e){L(!xM,"__referenceConstructor has already been defined"),xM=e}(bF);var hj={},fj=!1;function dj(e,t,n,r){e.repoInfo_=new NA("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function pj(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||iA("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tA("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=lF(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=lF(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new TA(TA.OWNER):new xA(e.name,e.options,t);PL("Invalid Firebase Database URL",s),nO(s.path)||iA("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=hj[t.name];i||(i={},hj[t.name]=i);var a=i[e.toURLString()];a&&iA("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new UL(e,fj,n,r),i[e.toURLString()]=a,a}(u,e,l,new _A(e.name,n));return new vj(h,e)}var vj=function(){function e(t,n){x(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return E(e,[{key:"_repo",get:function(){return this._instanceStarted||(VL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new bF(this._repo,YA())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=hj[t];n&&n[e.key]===e||iA("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),XL(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&iA("Cannot call "+e+" on a deleted database.")}}]),e}();function mj(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Ie(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&iA("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&iA('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new TA(TA.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:G(r.mockUserToken,e.app.options.projectId);a=new TA(o)}dj(i,t,n,a)}function yj(e){(e=Ie(e))._checkNotDeleted("goOffline"),XL(e._repo)}function gj(e){var t;(e=Ie(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(jL)}function kj(e,t){eA(e,t)}var bj={".sv":"timestamp"};var wj=function(){function e(t,n){x(this,e),this.committed=t,this.snapshot=n}return E(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function _j(e,t,n){var r;if(e=Ie(e),RL("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new H,o=MF(e,(function(){}));return function(e,t,n,r,i,a){ZL(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:QP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=eF(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{EL("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=lL(e.transactionQueueTree_,t),h=hL(l)||[];h.push(o),fL(l,h),"object"===typeof u&&null!==u&&ue(u,".priority")?(c=ce(u,".priority"),L(xL(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(zM(e.serverSyncTree_,t)||VO.EMPTY_NODE).getPriority().val();var f=BL(e),d=BO(u,c),p=sL(d,s,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=GL(e);var v=FM(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);ML(e.eventQueue_,t,v),tF(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new wF(r,new bF(e._repo,e._path),DO),a.resolve(new wj(n,i)))}),o,i),a.promise}fO.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},fO.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){BP(ct),nt(new Ae("database",(function(e,t){var n=t.instanceIdentifier;return pj(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),vt(UP,VP,e),vt(UP,VP,"esm2017")}();var xj=new He("@firebase/database-compat"),Tj=function(e){var t="FIREBASE WARNING: "+e;xj.warn(t)},Ej=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(_e(e,t)+"must be a boolean.")},Ij=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(_e(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Sj=function(){function e(t){x(this,e),this._delegate=t}return E(e,[{key:"cancel",value:function(e){we("OnDisconnect.cancel",0,1,arguments.length),xe("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){we("OnDisconnect.remove",0,1,arguments.length),xe("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){we("OnDisconnect.set",1,2,arguments.length),xe("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){we("OnDisconnect.setWithPriority",2,3,arguments.length),xe("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(we("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Tj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xe("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Cj=function(){function e(t,n){x(this,e),this.committed=t,this.snapshot=n}return E(e,[{key:"toJSON",value:function(){return we("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Nj=function(){function e(t,n){x(this,e),this._database=t,this._delegate=n}return E(e,[{key:"val",value:function(){return we("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return we("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return we("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return we("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return we("DataSnapshot.child",0,1,arguments.length),t=String(t),NL("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return we("DataSnapshot.hasChild",1,1,arguments.length),NL("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return we("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return we("DataSnapshot.forEach",1,1,arguments.length),xe("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return we("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return we("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return we("DataSnapshot.ref",0,0,arguments.length),new Pj(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Rj=function(){function e(t,n){x(this,e),this.database=t,this._delegate=n}return E(e,[{key:"on",value:function(t,n,r,i){var a,o=this;we("Query.on",2,4,arguments.length),xe("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new Nj(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return MF(this._delegate,u,c),n;case"child_added":return LF(this._delegate,u,c),n;case"child_removed":return UF(this._delegate,u,c),n;case"child_changed":return FF(this._delegate,u,c),n;case"child_moved":return jF(this._delegate,u,c),n;default:throw new Error(_e("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(we("Query.off",0,3,arguments.length),Ij("Query.off",e,!0),xe("Query.off","callback",t,!0),Te("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,VF(this._delegate,e,r)}else VF(this._delegate,e)}},{key:"get",value:function(){var e=this;return PF(this._delegate).then((function(t){return new Nj(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;we("Query.once",1,4,arguments.length),xe("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new H,u=function(e,t){var r=new Nj(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":MF(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":LF(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":UF(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":FF(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":jF(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(_e("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return we("Query.limitToFirst",1,1,arguments.length),new e(this.database,lj(this._delegate,XF(t)))}},{key:"limitToLast",value:function(t){return we("Query.limitToLast",1,1,arguments.length),new e(this.database,lj(this._delegate,$F(t)))}},{key:"orderByChild",value:function(t){return we("Query.orderByChild",1,1,arguments.length),new e(this.database,lj(this._delegate,tj(t)))}},{key:"orderByKey",value:function(){return we("Query.orderByKey",0,0,arguments.length),new e(this.database,lj(this._delegate,rj()))}},{key:"orderByPriority",value:function(){return we("Query.orderByPriority",0,0,arguments.length),new e(this.database,lj(this._delegate,aj()))}},{key:"orderByValue",value:function(){return we("Query.orderByValue",0,0,arguments.length),new e(this.database,lj(this._delegate,sj()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return we("Query.startAt",0,2,arguments.length),new e(this.database,lj(this._delegate,KF(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return we("Query.startAfter",0,2,arguments.length),new e(this.database,lj(this._delegate,QF(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return we("Query.endAt",0,2,arguments.length),new e(this.database,lj(this._delegate,zF(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return we("Query.endBefore",0,2,arguments.length),new e(this.database,lj(this._delegate,HF(t,n)))}},{key:"equalTo",value:function(t,n){return we("Query.equalTo",1,2,arguments.length),new e(this.database,lj(this._delegate,cj(t,n)))}},{key:"toString",value:function(){return we("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return we("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(we("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Pj(this.database,new bF(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,xe(e,"cancel",r.cancel,!0),r.context=n,Te(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(_e(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Pj=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,new mF(r._repo,r._path,new rD,!1))).database=e,i._delegate=r,i}return E(n,[{key:"getKey",value:function(){return we("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return we("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,TF(this._delegate,e))}},{key:"getParent",value:function(){we("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return we("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){we("Reference.set",1,2,arguments.length),xe("Reference.set","onComplete",t,!0);var n=SF(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(we("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Tj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}RL("Reference.update",this._delegate._path),xe("Reference.update","onComplete",t,!0);var i=RF(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){we("Reference.setWithPriority",2,3,arguments.length),xe("Reference.setWithPriority","onComplete",n,!0);var r=NF(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){we("Reference.remove",0,1,arguments.length),xe("Reference.remove","onComplete",e,!0);var t=IF(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;we("Reference.transaction",1,3,arguments.length),xe("Reference.transaction","transactionUpdate",e,!1),xe("Reference.transaction","onComplete",t,!0),Ej("Reference.transaction","applyLocally",n,!0);var i=_j(this._delegate,e,{applyLocally:n}).then((function(e){return new Cj(e.committed,new Nj(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){we("Reference.setPriority",1,2,arguments.length),xe("Reference.setPriority","onComplete",t,!0);var n=CF(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;we("Reference.push",0,2,arguments.length),xe("Reference.push","onComplete",t,!0);var i=EF(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return RL("Reference.onDisconnect",this._delegate._path),new Sj(new vF(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Rj),Aj=function(){function e(t,n){var r=this;x(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return E(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mj(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(we("database.ref",0,1,arguments.length),e instanceof Pj){var t=xF(this._delegate,e.toString());return new Pj(this,t)}var n=_F(this._delegate,e);return new Pj(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";we(t,1,1,arguments.length);var n=xF(this._delegate,e);return new Pj(this,n)}},{key:"goOffline",value:function(){return we("database.goOffline",0,0,arguments.length),yj(this._delegate)}},{key:"goOnline",value:function(){return we("database.goOnline",0,0,arguments.length),gj(this._delegate)}}]),e}();Aj.ServerValue={TIMESTAMP:bj,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Oj,Dj=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;BP(r);var u=new De("auth-internal",new Fe("database-standalone"));return u.setComponent(new Ae("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Aj(pj(t,u,void 0,n,s),t),namespace:a}}}),Mj=Aj.ServerValue;(Oj=jP).INTERNAL.registerComponent(new Ae("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Aj(i,r)}),"PUBLIC").setServiceProps({Reference:Pj,Query:Rj,Database:Aj,DataSnapshot:Nj,enableLogging:kj,INTERNAL:Dj,ServerValue:Mj}).setMultipleInstances(!0)),Oj.registerVersion("@firebase/database-compat","0.1.7");var Lj="firebasestorage.googleapis.com",Fj=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,jj(e),"Firebase Storage: ".concat(r," (").concat(jj(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(d(i),n.prototype),i}return E(n,[{key:"_codeEquals",value:function(e){return jj(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(te);function jj(e){return"storage/"+e}function Uj(){return new Fj("unknown","An unknown error occurred, please check the error payload for server response.")}function Vj(){return new Fj("canceled","User canceled the upload/download.")}function qj(){return new Fj("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Bj(e){return new Fj("invalid-argument",e)}function zj(){return new Fj("app-deleted","The Firebase app was deleted.")}function Wj(e){return new Fj("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hj(e,t){return new Fj("invalid-format","String does not match format '"+e+"': "+t)}function Gj(e){throw new Fj("internal-error","Internal error: "+e)}var Kj,Yj=function(){function e(t,n){x(this,e),this.bucket=t,this.path_=n}return E(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new Fj("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Lj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new Fj("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Qj=function(){function e(t){x(this,e),this.promise_=Promise.reject(t)}return E(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Jj(e){return"string"===typeof e||e instanceof String}function Xj(e){return Zj()&&e instanceof Blob}function Zj(){return"undefined"!==typeof Blob}function $j(e,t,n,r){if(r<t)throw Bj("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Bj("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function eU(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function tU(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Kj||(Kj={}));var nU=function(){function e(t,n,r,i,a,o,s,u,c,l,h){var f=this;x(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return E(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=Uj();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?zj():Vj());else i(new Fj("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new rU(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new rU(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Kj.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new rU(o,r))}else{var s=r.getErrorCode()===Kj.ABORT;t(!1,new rU(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),rU=E((function e(t,n,r){x(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function iU(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function aU(){for(var e=iU(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Zj())return new Blob(n);throw new Fj("unsupported-environment","This browser doesn't seem to support creating Blobs")}var oU={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},sU=E((function e(t,n){x(this,e),this.data=t,this.contentType=n||null}));function uU(e,t){switch(e){case oU.RAW:return new sU(cU(t));case oU.BASE64:case oU.BASE64URL:return new sU(lU(e,t));case oU.DATA_URL:return new sU(function(e){var t=new hU(e);return t.base64?lU(oU.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Hj(oU.DATA_URL,"Malformed data URL.")}return cU(t)}(t.rest)}(t),new hU(t).contentType)}throw Uj()}function cU(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function lU(e,t){switch(e){case oU.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Hj(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case oU.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Hj(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw Hj(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var hU=E((function e(t){x(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Hj(oU.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var fU=function(){function e(t,n){x(this,e);var r=0,i="";Xj(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return E(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Xj(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Zj()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(aU.apply(null,i))}var a=n.map((function(e){return Jj(e)?uU(oU.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function dU(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function pU(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function vU(e,t){return t}var mU=E((function e(t,n,r,i){x(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||vU})),yU=null;function gU(){if(yU)return yU;var e=[];e.push(new mU("bucket")),e.push(new mU("generation")),e.push(new mU("metageneration")),e.push(new mU("name","fullPath",!0));var t=new mU("name");t.xform=function(e,t){return function(e){return!Jj(e)||e.length<2?e:pU(e)}(t)},e.push(t);var n=new mU("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new mU("timeCreated")),e.push(new mU("updated")),e.push(new mU("md5Hash",null,!0)),e.push(new mU("cacheControl",null,!0)),e.push(new mU("contentDisposition",null,!0)),e.push(new mU("contentEncoding",null,!0)),e.push(new mU("contentLanguage",null,!0)),e.push(new mU("contentType",null,!0)),e.push(new mU("metadata","customMetadata",!0)),yU=e}function kU(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Yj(n,r);return t._makeStorageReference(i)}})}(r,e),r}function bU(e,t,n){var r=dU(t);return null===r?null:kU(e,r,n)}function wU(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function _U(e,t,n){var r=dU(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=b(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new Yj(t,o));r.prefixes.push(s)}}catch(f){a.e(f)}finally{a.f()}}if(n.items){var u,c=b(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=e._makeStorageReference(new Yj(t,l.name));r.items.push(h)}}catch(f){c.e(f)}finally{c.f()}}return r}(e,t,r)}var xU=E((function e(t,n,r,i){x(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function TU(e){if(!e)throw Uj()}function EU(e,t){return function(n,r){var i=bU(e,r,t);return TU(null!==i),i}}function IU(e,t){return function(n,r){var i=bU(e,r,t);return TU(null!==i),function(e,t,n,r){var i=dU(t);if(null===i)return null;if(!Jj(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return eU("/b/"+o(i)+"/o/"+o(a),n,r)+tU({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function SU(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Fj("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Fj("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Fj("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Fj("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function CU(e){var t=SU(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Fj("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function NU(e,t,n){var r=eU(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new xU(r,"GET",EU(e,n),i);return a.errorHandler=CU(t),a}function RU(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=eU(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new xU(o,"GET",function(e,t){return function(n,r){var i=_U(e,t,r);return TU(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=SU(t),u}function PU(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function AU(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=PU(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wU(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=fU.getBlob(c,r,l);if(null===h)throw qj();var f={name:u.fullPath},d=eU(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new xU(d,"POST",EU(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=SU(t),v}var OU=E((function e(t,n,r,i){x(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function DU(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){TU(!1)}return TU(!!n&&-1!==(t||["active"]).indexOf(n)),n}var MU=262144;function LU(e,t,n,r,i,a,o,s){var u=new OU(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Fj("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(h,f);if(null===p)throw qj();var v=t.maxUploadRetryTime,m=new xU(n,"POST",(function(e,n){var i,o=DU(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?EU(t,a)(e,n):null,new OU(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=SU(e),m}var FU={STATE_CHANGED:"state_changed"},jU={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function UU(e){switch(e){case"running":case"pausing":case"canceling":return jU.RUNNING;case"paused":return jU.PAUSED;case"success":return jU.SUCCESS;case"canceled":return jU.CANCELED;default:return jU.ERROR}}var VU=E((function e(t,n,r){x(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function qU(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var BU=function(){function e(){var t=this;x(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kj.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Kj.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Kj.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return E(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Gj("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Gj("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Gj("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Gj("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Gj("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),zU=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(BU);function WU(){return new zU}var HU=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;x(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=gU(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return E(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=PU(t,r,i),s={name:o.fullPath},u=eU(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=wU(o,n),h=e.maxUploadRetryTime,f=new xU(u,"POST",(function(e){var t;DU(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){TU(!1)}return TU(Jj(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=SU(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,WU,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new xU(n,"POST",(function(e){var t=DU(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){TU(!1)}n||TU(!1);var i=Number(n);return TU(!isNaN(i)),new OU(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=SU(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,WU,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=MU*this._chunkMultiplier,n=new OU(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=LU(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,WU,i,a);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){MU*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=NU(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,WU,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=AU(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,WU,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Vj(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=UU(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new VU(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(UU(this._state)){case jU.SUCCESS:qU(this._resolve.bind(null,this.snapshot))();break;case jU.CANCELED:case jU.ERROR:qU(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(UU(this._state)){case jU.RUNNING:case jU.PAUSED:e.next&&qU(e.next.bind(e,this.snapshot))();break;case jU.SUCCESS:e.complete&&qU(e.complete.bind(e))();break;default:e.error&&qU(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),GU=function(){function e(t,n){x(this,e),this._service=t,this._location=n instanceof Yj?n:Yj.makeFromUrl(n,t.host)}return E(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Yj(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return pU(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Yj(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Wj(e)}}]),e}();function KU(e,t,n){e._throwIfRoot("uploadBytes");var r=AU(e.storage,e._location,gU(),new fU(t,!0),n);return e.storage.makeRequestWithTokens(r,WU).then((function(t){return{metadata:t,ref:e}}))}function YU(e,t,n){return QU.apply(this,arguments)}function QU(){return(QU=_(R().mark((function e(t,n,r){var i,a,o,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,JU(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,S(s.prefixes)),(a=n.items).push.apply(a,S(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,YU(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JU(e,t){null!=t&&"number"===typeof t.maxResults&&$j("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=RU(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,WU)}function XU(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=eU(t.fullServerUrl(),e.host,e._protocol),a=wU(n,r),o=e.maxOperationRetryTime,s=new xU(i,"PATCH",EU(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=CU(t),s}(e.storage,e._location,t,gU());return e.storage.makeRequestWithTokens(n,WU)}function ZU(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=eU(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new xU(r,"GET",IU(e,n),i);return a.errorHandler=CU(t),a}(e.storage,e._location,gU());return e.storage.makeRequestWithTokens(t,WU).then((function(e){if(null===e)throw new Fj("no-download-url","The given file does not have any download URLs.");return e}))}function $U(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=eU(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new xU(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=CU(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,WU)}function eV(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Yj(e._location.bucket,n);return new GU(e.storage,r)}function tV(e,t){if(e instanceof aV){var n=e;if(null==n._bucket)throw new Fj("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new GU(n,n._bucket);return null!=t?tV(r,t):r}return void 0!==t?eV(e,t):e}function nV(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof aV)return new GU(e,t);throw Bj("To use ref(service, url), the first argument must be a Storage instance.")}return tV(e,t)}function rV(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:Yj.makeFromBucketSpec(n,e)}function iV(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:G(i,e.app.options.projectId))}var aV=function(){function e(t,n,r,i,a){x(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Lj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Yj.makeFromBucketSpec(i,this._host):rV(this._host,this.app.options)}return E(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Yj.makeFromBucketSpec(this._url,e):this._bucket=rV(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){$j("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){$j("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=_(R().mark((function e(){var t,n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=_(R().mark((function e(){var t,n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new GU(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new Qj(zj());var a=function(e,t,n,r,i,a){var o=tU(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new nU(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=_(R().mark((function e(t,n){var r,i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),oV="@firebase/storage",sV="0.9.4",uV="storage";function cV(e,t,n){return KU(e=Ie(e),t,n)}function lV(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new HU(e,new fU(t),n)}(e=Ie(e),t,n)}function hV(e){return function(e){e._throwIfRoot("getMetadata");var t=NU(e.storage,e._location,gU());return e.storage.makeRequestWithTokens(t,WU)}(e=Ie(e))}function fV(e){return function(e){var t={prefixes:[],items:[]};return YU(e,t).then((function(){return t}))}(e=Ie(e))}function dV(e){return ZU(e=Ie(e))}function pV(e,t){return nV(e=Ie(e),t)}function vV(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};iV(e,t,n,r)}function mV(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new aV(r,i,a,n,ct)}nt(new Ae(uV,mV,"PUBLIC").setMultipleInstances(!0)),vt(oV,sV,""),vt(oV,sV,"esm2017");var yV=function(){return(0,Qs.jsxs)("div",{className:"lds-roller",children:[(0,Qs.jsx)("div",{}),(0,Qs.jsx)("div",{}),(0,Qs.jsx)("div",{}),(0,Qs.jsx)("div",{}),(0,Qs.jsx)("div",{}),(0,Qs.jsx)("div",{}),(0,Qs.jsx)("div",{}),(0,Qs.jsx)("div",{})]})},gV=function(){var e=(0,t.useContext)(aB),n=e.auth,r=e.storage,i=e.firestore,a=c(Ys(n),1)[0],o=c((0,t.useState)(!1),2),s=o[0],u=o[1],l=c((0,t.useState)(null),2),h=l[0],f=l[1],d=c((0,t.useState)(null),2),p=(d[0],d[1]),v=c((0,t.useState)(!1),2),m=v[0],y=v[1],g=c((0,t.useState)(!1),2),k=g[0],b=g[1],w=c((0,t.useState)(null),2),x=w[0],T=w[1],E=c((0,t.useState)(""),2),I=E[0],S=E[1],N=c((0,t.useState)(null),2),P=N[0],A=N[1],O=c((0,t.useState)(null),2),D=(O[0],O[1]),M=c((0,t.useState)(null),2),L=M[0],F=M[1],j=(0,t.useRef)(null);(0,t.useEffect)((function(){localStorage.getItem("carPhoto")&&p(JSON.parse(localStorage.getItem("carPhoto"))),localStorage.getItem("avatar")&&D(JSON.parse(localStorage.getItem("avatar"))),i.collection("driversList").doc(""+(null===a||void 0===a?void 0:a.uid)).get().then((function(e){T(e.data())}))}),[i]);var U=function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files&&"carPhoto"===I?f(t.target.files[0]):t.target.files&&"avatar"===I&&A(t.target.files[0]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=_(R().mark((function e(t){var n,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),k?h?(y(!0),cV(n=pV(r,"carPhotos/".concat(a.uid)),h).then((function(){dV(n).then((function(e){p(e),i.collection("driversList").doc(null===a||void 0===a?void 0:a.uid).update({carPhoto:e}),localStorage.setItem("carPhoto",JSON.stringify(e)),y(!1),console.log("success")})).catch((function(e){console.log(e.message,"error getting the image url")}))})).catch((function(e){console.log(e.message,"error getting the image url")}))):(y(!0),cV(o=pV(r,"avatars/".concat(a.uid)),P).then((function(){dV(o).then((function(e){D(e),i.collection("driversList").doc(null===a||void 0===a?void 0:a.uid).update({photoURL:e}),localStorage.setItem("avatar",JSON.stringify(e)),y(!1),console.log("success")})).catch((function(e){console.log(e.message,"error getting the image url")}))})).catch((function(e){console.log(e.message,"error getting the image url")}))):(i.collection("driversList").doc(null===a||void 0===a?void 0:a.uid).update(C({},L,j.current.value)),console.log("success"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){"avatar"===e?(S("avatar"),u(!0),b(!0)):(S("carPhoto"),u(!0),b(!0))},B=function(e,t){u(!0),b(!1),console.log(e),j.current.value=e,F(t)};return m?(0,Qs.jsx)(Js,{}):x?(0,Qs.jsxs)(Qs.Fragment,{children:[(0,Qs.jsx)("div",{id:"profile",className:"container d-flex justify-content-center align-items-center",children:(0,Qs.jsx)("div",{className:"card mb-3 w-100",style:{height:"75%"},children:(0,Qs.jsxs)("div",{className:"row g-0",children:[(0,Qs.jsxs)("div",{className:"col-md-4",id:"profile_img",children:[x.photoURL?(0,Qs.jsx)("img",{src:x.photoURL,className:"img-fluid rounded-start",alt:"Avatar"}):(0,Qs.jsx)(yV,{}),(0,Qs.jsx)(UR,{id:"changeBtn",onClick:function(){return q("avatar")},style:{position:"absolute",left:"1%",top:"3.5%",fontSize:"40px"}})]}),(0,Qs.jsx)("div",{className:"col-md-4 bg-light",children:(0,Qs.jsxs)("div",{className:"card-body",children:[(0,Qs.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Qs.jsx)("h5",{className:"card-title ",children:"Name:"}),(0,Qs.jsxs)("span",{className:"card-text mx-2",style:{transform:"translate(0, -10%)"},children:[x.name,(0,Qs.jsx)(UR,{id:"changeBtn",className:"mx-2",onClick:function(){return B(x.name,"name")}})]})]}),(0,Qs.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Qs.jsx)("h5",{className:"card-title ",children:"Email:"}),(0,Qs.jsxs)("span",{className:"card-text mx-2",style:{transform:"translate(0, -10%)"},children:[x.email,(0,Qs.jsx)(UR,{id:"changeBtn",className:"mx-2",onClick:function(){return B(null===x||void 0===x?void 0:x.email,"email")}})]})]}),(0,Qs.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Qs.jsx)("h5",{className:"card-title ",children:"Number:"}),(0,Qs.jsxs)("span",{className:"card-text mx-2",style:{transform:"translate(0, -10%)"},children:[x.phoneNumber,(0,Qs.jsx)(UR,{id:"changeBtn",className:"mx-2",onClick:function(){return B(x.phoneNumber,"phoneNumber")}})]})]}),(0,Qs.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Qs.jsx)("h5",{className:"card-title ",children:"Car name:"}),(0,Qs.jsxs)("span",{className:"card-text mx-2",style:{transform:"translate(0, -10%)"},children:[x.carName,(0,Qs.jsx)(UR,{id:"changeBtn",className:"mx-2",onClick:function(){return B(x.carName,"carName")}})]})]}),(0,Qs.jsx)("p",{className:"card-text",children:(0,Qs.jsx)("small",{className:"text-muted",children:"Profil ma'lumolari (qalamchani bosish orqali o'zgartirish mumkin)"})})]})}),(0,Qs.jsxs)("div",{className:"col-md-4 justify-content-center",children:[x.carPhoto?(0,Qs.jsx)("img",{id:"carPhoto",src:x.carPhoto,alt:"userPhoto"}):(0,Qs.jsx)(yV,{}),(0,Qs.jsx)(UR,{style:{fontSize:"40px",position:"absolute",top:"4%",right:"1%",cursor:"pointer"},onClick:function(){return q("carPhoto")}})]})]})})}),(0,Qs.jsx)("div",{className:s?"modal d-block":"modal",tabIndex:"-1",children:(0,Qs.jsx)("div",{className:"modal-dialog",children:(0,Qs.jsxs)("form",{className:"modal-content",onSubmit:V,children:[(0,Qs.jsxs)("div",{className:"modal-header",children:[(0,Qs.jsx)("h5",{className:"modal-title",children:"Ma'lumotlarni o'zgartirmoqchimisiz"}),(0,Qs.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){return u(!1)}})]}),(0,Qs.jsx)("div",{className:"modal-body",children:(0,Qs.jsx)("input",{type:k?"file":"text",onChange:function(e){return U(e)},ref:j})}),(0,Qs.jsxs)("div",{className:"modal-footer",children:[(0,Qs.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function(){return u(!1)},children:"Close"}),(0,Qs.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){return u(!1)},children:"Save changes"})]})]})})})]}):(0,Qs.jsx)(Js,{})},kV=[{id:Rp()(),path:"login",element:(0,Qs.jsx)(GR,{})}],bV=[{id:Rp()(),path:"main",element:(0,Qs.jsx)(PP,{})},{id:Rp()(),path:"profile",element:(0,Qs.jsx)(gV,{})}],wV=function(){var e=(0,t.useContext)(aB).auth,n=c(Ys(e),1)[0];return(0,Qs.jsx)(Qs.Fragment,{children:n?(0,Qs.jsxs)(Lu,{children:[(0,Qs.jsx)(Cp,{}),(0,Qs.jsxs)(du,{children:[bV.map((function(e){var t=e.id,n=e.path,r=e.element;return(0,Qs.jsx)(hu,{path:n,element:r},t)})),(0,Qs.jsx)(hu,{path:"",element:(0,Qs.jsx)(Ad,{})}),(0,Qs.jsx)(hu,{path:"*",element:(0,Qs.jsx)(lu,{to:"main"})})]})]}):(0,Qs.jsxs)(Lu,{children:[(0,Qs.jsx)(Cp,{}),(0,Qs.jsxs)(du,{children:[kV.map((function(e){var t=e.id,n=e.path,r=e.element;return(0,Qs.jsx)(hu,{path:n,element:r},t)})),(0,Qs.jsx)(hu,{path:"",element:(0,Qs.jsx)(Ad,{})}),(0,Qs.jsx)(hu,{path:"*",element:(0,Qs.jsx)(lu,{to:"login"})})]})]})})};var _V=function(){var e=(0,t.useContext)(aB).auth,n=c(Ys(e),3),r=(n[0],n[1]);return n[2],r?(0,Qs.jsx)(Js,{}):(0,Qs.jsx)(wV,{})};jP.registerVersion("firebase","9.6.10","app-compat");function xV(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ak("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function TV(){if("undefined"===typeof Uint8Array)throw new ak("unimplemented","Uint8Arrays are not available in this environment.")}function EV(){if("undefined"==typeof atob)throw new ak("unimplemented","Blobs are unavailable in Firestore in this environment.")}var IV=function(){function e(t){x(this,e),this._delegate=t}return E(e,[{key:"toBase64",value:function(){return EV(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return TV(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return EV(),new e(yN.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return TV(),new e(yN.fromUint8Array(t))}}]),e}();function SV(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=b(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var CV=function(){function e(){x(this,e)}return E(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){vN(e=GC(e,sN));var n=uN(e),r=e._freezeSettings(),i=new yC;return lN(n,i,new vC(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){vN(e=GC(e,sN));var t=uN(e),n=e._freezeSettings(),r=new yC;return lN(t,r,new mC(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new ak(ik.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ok;return e._queue.enqueueAndForgetEvenWhileRestricted(_(R().mark((function n(){return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xx.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,xx.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(eE(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),NV=function(){function e(t,n,r){var i=this;x(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Vk||(this._appCompat=t)}return E(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||$g("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};JC(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return hN(this._delegate)}},{key:"disableNetwork",value:function(){return fN(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&BC("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ok;return e.asyncQueue.enqueueAndForget(_(R().mark((function n(){return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=MS,n.next=3,MC(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(uN(e=GC(e,sN)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return CR(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new ak("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new zV(this,eN(this._delegate,e))}catch(t){throw MV(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new DV(this,tN(this._delegate,e))}catch(t){throw MV(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new VV(this,function(e,t){if(e=GC(e,QC),qC("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ak(ik.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ZC(e,null,function(e){return new Bb(Sk.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw MV(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return AR(this._delegate,(function(n){return e(new PV(t,n))}))}},{key:"batch",value:function(){var e=this;return uN(this._delegate),new AV(new bR(this._delegate,(function(t){return NR(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return dN(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return pN(this._delegate,e).then((function(e){return e?new VV(t,e):null}))}}]),e}(),RV=function(e){v(n,e);var t=k(n);function n(e){var r;return x(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new IV(new yN(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return DV.forKey(t,this.firestore,null)}}]),n}(yR);var PV=function(){function e(t,n){x(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new RV(t)}return E(e,[{key:"get",value:function(e){var t=this,n=WV(e);return this._delegate.get(n).then((function(e){return new jV(t._firestore,new JN(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=WV(e);return n?(xV("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=WV(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WV(e);return this._delegate.delete(t),this}}]),e}(),AV=function(){function e(t){x(this,e),this._delegate=t}return E(e,[{key:"set",value:function(e,t,n){var r=WV(e);return n?(xV("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=WV(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WV(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),OV=function(){function e(t,n,r){x(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return E(e,[{key:"fromFirestore",value:function(e,t){var n=new XN(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new UV(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new RV(t),n),i.set(n,a)),a}}]),e}();OV.INSTANCES=new WeakMap;var DV=function(){function e(t,n){x(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new RV(t)}return E(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new zV(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new zV(this.firestore,eN(this._delegate,e))}catch(t){throw MV(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ie(e))instanceof XC&&nN(this._delegate,e)}},{key:"set",value:function(e,t){t=xV("DocumentReference.set",t);try{return t?ER(this._delegate,e,t):ER(this._delegate,e)}catch(n){throw MV(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?IR(this._delegate,e):IR.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw MV(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return NR(GC(e.firestore,sN),[new jw(e._key,xw.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=LV(n),a=FV(n,(function(t){return new jV(e.firestore,new JN(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return SR(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?xR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=GC(e,XC);var t=GC(e.firestore,sN);return jC(uN(t),e._key,{source:"server"}).then((function(n){return RR(t,e,n)}))}(this._delegate):function(e){e=GC(e,XC);var t=GC(e.firestore,sN);return jC(uN(t),e._key).then((function(n){return RR(t,e,n)}))}(this._delegate),t.then((function(e){return new jV(n.firestore,new JN(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(OV.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new ak("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new XC(n._delegate,r,new Wk(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new XC(n._delegate,r,t))}}]),e}();function MV(e,t,n){return e.message=e.message.replace(t,n),e}function LV(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!SV(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function FV(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=SV(e[0])?e[0]:SV(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var jV=function(){function e(t,n){x(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"ref",get:function(){return new DV(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return eR(this._delegate,e._delegate)}}]),e}(),UV=function(e){v(n,e);var t=k(n);function n(){return x(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||tk()}(void 0!==t),t}}]),n}(jV),VV=function(){function e(t,n){x(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new RV(t)}return E(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,rR(this._delegate,function(e,t,n){var r=t,i=YN("where",e);return new iR(i,r,n)}(t,n,r)))}catch(i){throw MV(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,rR(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=YN("orderBy",e);return new aR(n,t)}(t,n)))}catch(r){throw MV(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,rR(this._delegate,function(e){return KC("limit",e),new oR("limit",e,"F")}(t)))}catch(n){throw MV(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,rR(this._delegate,function(e){return KC("limitToLast",e),new oR("limitToLast",e,"L")}(t)))}catch(n){throw MV(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,rR(this._delegate,uR.apply(void 0,arguments)))}catch(t){throw MV(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,rR(this._delegate,cR.apply(void 0,arguments)))}catch(t){throw MV(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,rR(this._delegate,hR.apply(void 0,arguments)))}catch(t){throw MV(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,rR(this._delegate,fR.apply(void 0,arguments)))}catch(t){throw MV(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return rN(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?TR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=GC(e,ZC);var t=GC(e.firestore,sN),n=uN(t),r=new _R(t);return UC(n,e._query,{source:"server"}).then((function(n){return new ZN(t,r,e,n)}))}(this._delegate):function(e){e=GC(e,ZC);var t=GC(e.firestore,sN),n=uN(t),r=new _R(t);return tR(e._query),UC(n,e._query).then((function(n){return new ZN(t,r,e,n)}))}(this._delegate),t.then((function(e){return new BV(n.firestore,new ZN(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=LV(n),a=FV(n,(function(t){return new BV(e.firestore,new ZN(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return SR(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(OV.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),qV=function(){function e(t,n){x(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new UV(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),BV=function(){function e(t,n){x(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"query",get:function(){return new VV(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new UV(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new qV(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new UV(n._firestore,r))}))}},{key:"isEqual",value:function(e){return eR(this._delegate,e._delegate)}}]),e}(),zV=function(e){v(n,e);var t=k(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return E(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new DV(this.firestore,e):null}},{key:"doc",value:function(e){try{return new DV(this.firestore,void 0===e?tN(this._delegate):tN(this._delegate,e))}catch(t){throw MV(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=GC(e.firestore,sN),r=tN(e),i=gR(e.converter,t);return NR(n,[SN(IN(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xw.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new DV(t.firestore,e)}))}},{key:"isEqual",value:function(e){return nN(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(OV.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(VV);function WV(e){return GC(e,XC)}var HV=function(){function e(){x(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=P(mN,n)}return E(e,[{key:"isEqual",value:function(e){return(e=Ie(e))instanceof mN&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Nk.keyField().canonicalString())}}]),e}(),GV=function(){function e(t){x(this,e),this._delegate=t}return E(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new RN("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new CN("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=OR.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=DR.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new ON("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),KV={Firestore:NV,GeoPoint:kN,Timestamp:wk,Blob:IV,Transaction:PV,WriteBatch:AV,DocumentReference:DV,DocumentSnapshot:jV,Query:VV,QueryDocumentSnapshot:UV,QuerySnapshot:BV,CollectionReference:zV,FieldPath:HV,FieldValue:GV,setLogLevel:function(e){!function(e){Qg.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function YV(){return window}!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ae("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},KV)))}(e,(function(e,t){return new NV(e,t,new CV)})),e.registerVersion("@firebase/firestore-compat","0.1.16")}(jP);function QV(e,t,n){return JV.apply(this,arguments)}function JV(){return JV=_(R().mark((function e(t,n,r){var i,a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=YV(),o=a.BuildInfo,an(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,nq(n.sessionId);case 4:return s=e.sent,u={},cr()?u.ibi=o.packageName:or()?u.apn=o.packageName:Xt(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",Ps(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),JV.apply(this,arguments)}function XV(){return XV=_(R().mark((function e(t){var n,r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=YV(),r=n.BuildInfo,i={},cr()?i.iosBundleId=r.packageName:or()?i.androidPackageName=r.packageName:Xt(t,"operation-not-supported-in-this-environment"),e.next=5,ss(t,i);case 5:case"end":return e.stop()}}),e)}))),XV.apply(this,arguments)}function ZV(e){var t=YV().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function $V(e,t,n){return eq.apply(this,arguments)}function eq(){return eq=_(R().mark((function e(t,n,r){var i,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=YV(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Zt(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),or()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),eq.apply(this,arguments)}function tq(e){var t,n,r,i,a,o,s,u,c,l,h=YV();nn("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),nn("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),nn("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),nn("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),nn("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function nq(e){return rq.apply(this,arguments)}function rq(){return(rq=_(R().mark((function e(t){var n,r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=iq(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iq(e){if(an(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var aq=function(e){v(n,e);var t=k(n);function n(){var e;return x(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return E(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),f(l(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(is);function oq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:hq(),postBody:null,tenantId:e.tenantId,error:Zt(e,"no-auth-event")}}function sq(e,t){return fq()._set(dq(e),t)}function uq(e){return cq.apply(this,arguments)}function cq(){return cq=_(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fq()._get(dq(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,fq()._remove(dq(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),cq.apply(this,arguments)}function lq(e,t){var n,r,i=function(e){var t=pq(e),n=t.link?decodeURIComponent(t.link):void 0,r=pq(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return pq(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=pq(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Zt(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function hq(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function fq(){return sn(xa)}function dq(e){return $n("authEvent",e.config.apiKey,e.name)}function pq(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||I(t)||s(t)||u();r[0];return ve(r.slice(1).join("?"))}var vq=function(){function e(){x(this,e),this._redirectPersistence=Ea,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=es}return E(e,[{key:"_initialize",value:function(){var e=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new aq(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Xt(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=_(R().mark((function e(t,n,r,i){var a,o,s,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tq(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),jo.clear(),e.next=10,this._originValidation(t);case 10:return o=oq(t,r,i),e.next=13,sq(t,o);case 13:return e.next=15,QV(t,o,n);case 15:return s=e.sent,e.next=18,ZV(s);case 18:return u=e.sent,e.abrupt("return",$V(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return XV.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=YV(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(_(R().mark((function n(){return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,uq(e);case 2:t.onEvent(yq());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=_(R().mark((function n(r){var i,a;return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,uq(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=lq(i,r.url)),t.onEvent(a||yq());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");YV().handleOpenURL=function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),mq=vq;function yq(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zt("no-auth-event")}}function gq(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function kq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return!("file:"!==gq()&&"ionic:"!==gq()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function bq(){return Z()&&11===(null===document||void 0===document?void 0:document.documentMode)}function wq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/Edge\/\d+/.test(e)}function _q(){try{var e=self.localStorage,t=Ca();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return bq()||wq(e)}()||ee()}catch(n){return xq()&&ee()}return!1}function xq(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Tq(){return("http:"===gq()||"https:"===gq()||J()||kq())&&!(X()||Q())&&_q()&&!xq()}function Eq(){return kq()&&"undefined"!==typeof document}function Iq(){return Sq.apply(this,arguments)}function Sq(){return(Sq=_(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Eq()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cq={LOCAL:"local",NONE:"none",SESSION:"session"},Nq=nn,Rq="persistence";function Pq(e,t){Nq(Object.values(Cq).includes(t),e,"invalid-persistence-type"),X()?Nq(t!==Cq.SESSION,e,"unsupported-persistence-type"):Q()?Nq(t===Cq.NONE,e,"unsupported-persistence-type"):xq()?Nq(t===Cq.NONE||t===Cq.LOCAL&&ee(),e,"unsupported-persistence-type"):Nq(t===Cq.NONE||_q(),e,"unsupported-persistence-type")}function Aq(e){return Oq.apply(this,arguments)}function Oq(){return Oq=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Dq(),r=$n(Rq,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Oq.apply(this,arguments)}function Dq(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Mq=nn,Lq=function(){function e(){x(this,e),this.browserResolver=sn(Ds),this.cordovaResolver=sn(mq),this.underlyingResolver=null,this._redirectPersistence=Ea,this._completeRedirectFn=es}return E(e,[{key:"_initialize",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=_(R().mark((function e(t,n,r,i){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=_(R().mark((function e(t,n,r,i){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Eq()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Mq(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Iq();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Fq(e){return e.unwrap()}function jq(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new zq(e,function(e,t){var n,r=Ie(e),i=t;return nn(t.customData.operationType,r,"argument-error"),nn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),va._fromError(r,i)}(e,t));else if(r){var i=Uq(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Uq(e){var t=(e instanceof te?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof te)&&"temporaryProof"in t&&"phoneNumber"in t)return xo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Ft)return null;switch(r){case Lt:n=oi;break;case Dt:n=ai;break;case Mt:n=si;break;case jt:n=li;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?ui._create(r,s):Gr._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new ii(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof te?n.credentialFromError(e):n.credentialFromResult(e)}function Vq(e,t){return t.catch((function(t){throw t instanceof te&&jq(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Uq(t)),additionalUserInfo:da(e),user:Wq.getOrCreate(r)}}))}function qq(e,t){return Bq.apply(this,arguments)}function Bq(){return Bq=_(R().mark((function e(t,n){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Vq(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Bq.apply(this,arguments)}var zq=function(){function e(t,n){x(this,e),this.resolver=n,this.auth=t.wrapped()}return E(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Vq(Fq(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Wq=function(){function e(t){x(this,e),this._delegate=t,this.multiFactor=function(e){var t=Ie(e);return ka.has(t)||ka.set(t,ga._fromUser(t)),ka.get(t)}(t)}return E(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vq(this.auth,Pi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qq(this.auth,yo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vq(this.auth,Mo(this._delegate,t,Lq)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aq(vr(this.auth));case 2:return e.abrupt("return",Jo(this._delegate,t,Lq));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vq(this.auth,Oi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return qq(this.auth,function(e,t,n){return ko.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Vq(this.auth,function(e,t,n){return Do.apply(this,arguments)}(this._delegate,e,Lq))}},{key:"reauthenticateWithRedirect",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aq(vr(this.auth));case 2:return e.abrupt("return",Yo(this._delegate,t,Lq));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ea.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return aa(Ie(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return aa(Ie(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return _o.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ia.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ta.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Wq.USER_MAP=new WeakMap;var Hq=nn,Gq=function(){function e(t,n){if(x(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Hq(r,"invalid-api-key",{appName:t.name}),Hq(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Lq:void 0;this._delegate=n.initialize({options:{persistence:Yq(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Gt),this.linkUnderlyingAuth()}return E(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Wq.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){yr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return zi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Wi(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Bi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=_(R().mark((function e(t,n){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vq(this._delegate,Ki(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return $i.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ei.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=_(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hq(Tq(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Zo(this._delegate,Lq);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Vq(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){vr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Kq(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Kq(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Qi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return qi.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=_(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Pq(this._delegate,t),e.t0=t,e.next=e.t0===Cq.SESSION?4:e.t0===Cq.LOCAL?6:e.t0===Cq.NONE?11:13;break;case 4:return n=Ea,e.abrupt("break",14);case 6:return e.next=8,sn(Ya)._isAvailable();case 8:return r=e.sent,n=r?Ya:xa,e.abrupt("break",14);case 11:return n=Zn,e.abrupt("break",14);case 13:return e.abrupt("return",Xt("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Vq(this._delegate,function(e){return vi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Vq(this._delegate,Ni(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Vq(this._delegate,function(e,t){return Fi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Vq(this._delegate,function(e,t,n){return Ni(Ie(e),ti.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Vq(this._delegate,function(e,t,n){return Ji.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return qq(this._delegate,vo(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hq(Tq(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Vq(this._delegate,Ao(this._delegate,t,Lq)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=_(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hq(Tq(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Aq(this._delegate);case 3:return e.abrupt("return",Go(this._delegate,t,Lq));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Gi.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Kq(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Wq.getOrCreate(e))},error:t,complete:n}}function Yq(e,t){var n=function(e,t){var n=Dq();if(!n)return[];var r=$n(Rq,e,t);switch(n.getItem(r)){case Cq.NONE:return[Zn];case Cq.LOCAL:return[Ya,Ea];case Cq.SESSION:return[Ea];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ya)||n.push(Ya),"undefined"!==typeof window)for(var r=0,i=[xa,Ea];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Zn)||n.push(Zn),n}Gq.Persistence=Cq;var Qq=function(){function e(){x(this,e),this.providerId="phone",this._delegate=new xo(Fq(jP.auth()))}return E(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return xo.credential(e,t)}}]),e}();Qq.PHONE_SIGN_IN_METHOD=xo.PHONE_SIGN_IN_METHOD,Qq.PROVIDER_ID=xo.PROVIDER_ID;var Jq=nn,Xq=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jP.app();x(this,e),Jq(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ho(t,n,i.auth()),this.type=this._delegate.type}return E(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Ae("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Gq(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ut,PASSWORD_RESET:Vt,RECOVER_EMAIL:qt,REVERT_SECOND_FACTOR_ADDITION:Bt,VERIFY_AND_CHANGE_EMAIL:zt,VERIFY_EMAIL:Wt}},EmailAuthProvider:ti,FacebookAuthProvider:ai,GithubAuthProvider:si,GoogleAuthProvider:oi,OAuthProvider:ii,SAMLAuthProvider:ci,PhoneAuthProvider:Qq,PhoneMultiFactorGenerator:Fs,RecaptchaVerifier:Xq,TwitterAuthProvider:li,Auth:Gq,AuthCredential:br,Error:te}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.11")}(jP);var Zq=function(){function e(t,n,r){x(this,e),this._delegate=t,this.task=n,this.ref=r}return E(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),$q=function(){function e(t,n){x(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return E(e,[{key:"snapshot",get:function(){return new Zq(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Zq(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Zq(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Zq(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),eB=function(){function e(t,n){x(this,e),this._delegate=t,this._service=n}return E(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new tB(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new tB(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),tB=function(){function e(t,n){x(this,e),this._delegate=t,this.storage=n}return E(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return eV(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new $q(lV(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oU.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=uU(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new $q(new HU(this._delegate,new fU(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return fV(this._delegate).then((function(t){return new eB(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return JU(e=Ie(e),t)}(this._delegate,e||void 0).then((function(e){return new eB(e,t.storage)}))}},{key:"getMetadata",value:function(){return hV(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return XU(e=Ie(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return dV(this._delegate)}},{key:"delete",value:function(){return this._throwIfRoot("delete"),$U(Ie(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Wj(e)}}]),e}(),nB=function(){function e(t,n){x(this,e),this.app=t,this._delegate=n}return E(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(rB(e))throw Bj("ref() expected a child path but got a URL, use refFromURL instead.");return new tB(pV(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!rB(e))throw Bj("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Yj.makeFromUrl(e,this._delegate.host)}catch(t){throw Bj("refFromUrl() expected a valid full URL but got an invalid one.")}return new tB(pV(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vV(this._delegate,e,t,n)}}]),e}();function rB(e){return/^[A-Za-z]+:\/\//.test(e)}function iB(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new nB(r,i)}!function(e){var t={TaskState:jU,TaskEvent:FU,StringFormat:oU,Storage:nB,Reference:tB};e.INTERNAL.registerComponent(new Ae("storage-compat",iB,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.12")}(jP);jP.initializeApp({apiKey:"AIzaSyCNxdEjajvnAVsy2Q0VIC3yo2EkL6IR_UA",authDomain:"taxi-project-bekjon.firebaseapp.com",projectId:"taxi-project-bekjon",storageBucket:"taxi-project-bekjon.appspot.com",messagingSenderId:"292237657455",appId:"1:292237657455:web:61b143854c418c5f4f949a",measurementId:"G-EYYRDKD44J"});var aB=(0,t.createContext)(null),oB=jP.auth(),sB=jP.firestore(),uB=jP.storage();i.render((0,Qs.jsx)(aB.Provider,{value:{firestore:sB,storage:uB,auth:oB,firebase:jP},children:(0,Qs.jsx)(_V,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.99ddc7a9.js.map